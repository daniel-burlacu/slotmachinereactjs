{"ast":null,"code":"import React,{useState,useRef,useEffect,forwardRef}from\"react\";import Constants from\"../Constants\";import{motion}from'framer-motion';import Symbol from\"./Symbol\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var offset=0;var generatedReels=0;var Reel=function Reel(props){//42 symbols\n//  const symbols = \"DDDGNNSSVVVCCFFRRYYIIJJZZMMOOLLTTPPKKQQAAG\";\n//const symbols = \"DDDGNNSS\";\nvar reels=[];var symbols=Constants.REEL_SYMBOLS;var reelSymbols=[];var symbolRef=useRef();var randomNr=3;var reelIdx=[];var reelImg=[];var randomBetween=function randomBetween(min,max){return Math.floor(Math.random()*(max-min+1)+min);};var sendArrayList=function sendArrayList(){if(reelIdx.length===3){props.createArray(reelIdx,reelImg);}generatedReels++;};var generatedSymbols=function generatedSymbols(randomNr){var elementPos=-(randomNr/242);for(var i=0;i<3;i++){reelIdx.push(elementPos+i);reelImg.push(reelSymbols[elementPos+i]);}};var getRandomNr=function getRandomNr(){if(props.gameOn>0){randomNr=-(randomBetween((Constants.REELS_REPEAT-2)*symbols[props.index].length,(Constants.REELS_REPEAT-8)*symbols[props.index].length)*242);}if(offset===randomNr){getRandomNr();}else{generatedSymbols(randomNr);//modified \noffset=randomNr;}};if(props.gameOn===0){reelSymbols=symbols[props.index].split(\"\");}else if(props.gameOn>0){reelSymbols=symbols[props.index].repeat(Constants.REELS_REPEAT).split(\"\");getRandomNr();}var createReels=function createReels(){reels=reelSymbols.map(function(el,idx){return/*#__PURE__*/_jsx(Symbol,{symbol:el,index:idx,spin:props.gameOn},idx);});return/*#__PURE__*/_jsx(_Fragment,{children:reels});};var variants={opacity:{opacity:1},spin:{y:offset,opacity:1,transition:{duration:3,delay:props.index*0.8}},exit:{opacity:1}};return/*#__PURE__*/_jsx(motion.div,{className:\"reel\",children:/*#__PURE__*/_jsxs(motion.div,{variants:variants,opacity:\"initial\",animate:\"spin\",className:\"icons\",ref:symbolRef,children:[createReels(),sendArrayList()]},props.index)});};export default Reel;","map":{"version":3,"names":["React","useState","useRef","useEffect","forwardRef","Constants","motion","Symbol","offset","generatedReels","Reel","props","reels","symbols","REEL_SYMBOLS","reelSymbols","symbolRef","randomNr","reelIdx","reelImg","randomBetween","min","max","Math","floor","random","sendArrayList","length","createArray","generatedSymbols","elementPos","i","push","getRandomNr","gameOn","REELS_REPEAT","index","split","repeat","createReels","map","el","idx","variants","opacity","spin","y","transition","duration","delay","exit"],"sources":["F:/Games/slotmachinereact/src/components/Reel.js"],"sourcesContent":["import React, { useState, useRef, useEffect, forwardRef } from \"react\";\r\nimport Constants from \"../Constants\";\r\nimport {motion} from 'framer-motion';\r\nimport Symbol from \"./Symbol\";\r\n\r\nlet offset=0;\r\nlet generatedReels=0;\r\n\r\nconst Reel = (props) => {\r\n  //42 symbols\r\n//  const symbols = \"DDDGNNSSVVVCCFFRRYYIIJJZZMMOOLLTTPPKKQQAAG\";\r\n//const symbols = \"DDDGNNSS\";\r\n let reels = [];\r\n  const symbols = Constants.REEL_SYMBOLS;\r\n  let reelSymbols = [];\r\n  let symbolRef = useRef();\r\n  let randomNr= 3;\r\n  let reelIdx=[];\r\n  let reelImg= [];\r\n\r\n  const randomBetween = (min, max) => {\r\n    return Math.floor(Math.random() * (max - min + 1) + min);\r\n  };\r\n\r\n  const sendArrayList = ()=>{\r\n    \r\n    if(reelIdx.length===3){\r\n        props.createArray(reelIdx, reelImg);\r\n    }\r\n    generatedReels++;\r\n  }\r\n\r\n  const generatedSymbols =(randomNr)=>{\r\n       let elementPos=-(randomNr/242);\r\n\r\n       for(let i=0; i<3;i++){\r\n        reelIdx.push(elementPos+i);\r\n        reelImg.push(reelSymbols[elementPos+i]);\r\n       }\r\n     }\r\n\r\n  const getRandomNr = () => {\r\n    if (props.gameOn > 0) {\r\n    randomNr = -(randomBetween(\r\n        (Constants.REELS_REPEAT - 2) * symbols[props.index].length,\r\n        (Constants.REELS_REPEAT - 8) * symbols[props.index].length\r\n      ) * 242);\r\n    }\r\n\r\n    if(offset===randomNr){\r\n      getRandomNr();\r\n    }\r\n   else{\r\n        generatedSymbols(randomNr); //modified \r\n        offset=randomNr;\r\n    }\r\n  };\r\n\r\n  if(props.gameOn===0){\r\n      reelSymbols=symbols[props.index].split(\"\");\r\n  }else if(props.gameOn>0){\r\n    reelSymbols= symbols[props.index].repeat(Constants.REELS_REPEAT).split(\"\");\r\n    getRandomNr();\r\n  }  \r\n\r\nconst createReels = () =>{\r\n  reels=reelSymbols.map((el, idx) => {\r\n      return (\r\n        <Symbol symbol={el} key={idx} index={idx} spin={props.gameOn} />\r\n      );\r\n    })\r\n\r\n    return <>{reels}</>\r\n}\r\n\r\nconst variants = {\r\n  opacity:{\r\n      opacity: 1 \r\n  },\r\n  spin: {\r\n     y:offset,\r\n     opacity:1, \r\n     transition:{ \r\n          duration:3, \r\n          delay:props.index * 0.8 \r\n      },\r\n  },\r\n  exit : { opacity: 1 }\r\n};\r\n\r\nreturn (\r\n  <motion.div className=\"reel\" >\r\n    <motion.div key={props.index} variants={variants}  opacity=\"initial\"  animate=\"spin\" className=\"icons\" ref={symbolRef}>\r\n      {createReels()}{sendArrayList()}\r\n    </motion.div>\r\n  </motion.div>\r\n);\r\n};\r\nexport default Reel;\r\n\r\n\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}