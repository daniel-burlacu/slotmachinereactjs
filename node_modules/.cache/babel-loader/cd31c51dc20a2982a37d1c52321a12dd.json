{"ast":null,"code":"var _jsxFileName = \"F:\\\\Games\\\\slotmachinereact\\\\src\\\\components\\\\Reel.js\";\nimport React, { Component } from 'react';\nimport View from 'react-view';\nimport { Animated } from \"react-move\";\nimport Constants from '../Constants';\nimport Symbol from './Symbol';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Reel extends Component {\n  constructor(props) {\n    super(props);\n\n    this.highLightAtIndex = (index, highLight) => {\n      this.symbolsRefs[this.position + index].setActive(highLight);\n    };\n\n    this.shakeAtIndex = index => {\n      this.symbolsRefs[this.position + index].shake();\n    };\n\n    this.scrollByOffSet = (offset, callback) => {\n      for (let i = 0; i < Constants.SYMBOLS; i++) {\n        this.symbolsRefs[this.position + i].setActive(true);\n      }\n\n      this.currentScrollPos = this.currentScrollPos + this.symbolHeight * offset;\n      this.position = this.position - offset;\n      Animated.timing(this.state.scrollPos, {\n        toValue: this.currentScrollPos,\n        duration: 750 + this.props.index * 250,\n        useNativeDriver: true,\n        easing: Animated.easing //  easing: Easing.inOut(Easing.exp)\n\n      }).start(() => {\n        this.position = (Constants.REELS_REPEAT - 2) * this.symbols.length + this.position % this.symbols.length;\n        let results = [];\n\n        for (let i = 0; i < Constants.SYMBOLS; i++) {\n          this.symbolsRefs[this.position + i].setActive(false);\n          results.push(this.reelSymbols[this.position + i]);\n        }\n\n        this.currentScrollPos = this.position * this.symbolHeight * -1;\n        this.state.scrollPos.setValue(this.currentScrollPos);\n        callback(this.props.index, results);\n      });\n    };\n\n    this.symbols = Constants.REEL_SYMBOLS[this.props.index];\n    this.reelSymbols = this.symbols.repeat(Constants.REELS_REPEAT).split(\"\");\n    this.symbolHeight = this.props.height / Constants.SYMBOLS;\n    this.symbolsRefs = [];\n    this.position = this.reelSymbols.length - Constants.SYMBOLS;\n    this.currentScrollPos = this.position * this.symbolHeight * -1;\n    this.state = {\n      scrollPos: new Animated.Value(this.currentScrollPos)\n    };\n  }\n\n  render() {\n    const reel = {\n      overflow: 'hidden'\n    };\n    return /*#__PURE__*/_jsxDEV(View, {\n      style: [reel, {\n        width: this.props.width,\n        height: this.props.height\n      }],\n      children: /*#__PURE__*/_jsxDEV(Animated.View, {\n        style: {\n          width: this.props.width,\n          height: this.reelSymbols.length * this.symbolHeight,\n          transform: [{\n            translateY: this.state.scrollPos\n          }]\n        },\n        children: this.reelSymbols.map((el, idx) => {\n          return /*#__PURE__*/_jsxDEV(Symbol, {\n            symbol: el,\n            index: idx,\n            width: this.props.width,\n            height: this.symbolHeight,\n            ref: ref => {\n              this.symbolsRefs[idx] = ref;\n            }\n          }, idx, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 31\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 16\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default Reel;","map":{"version":3,"names":["React","Component","View","Animated","Constants","Symbol","Reel","constructor","props","highLightAtIndex","index","highLight","symbolsRefs","position","setActive","shakeAtIndex","shake","scrollByOffSet","offset","callback","i","SYMBOLS","currentScrollPos","symbolHeight","timing","state","scrollPos","toValue","duration","useNativeDriver","easing","start","REELS_REPEAT","symbols","length","results","push","reelSymbols","setValue","REEL_SYMBOLS","repeat","split","height","Value","render","reel","overflow","width","transform","translateY","map","el","idx","ref"],"sources":["F:/Games/slotmachinereact/src/components/Reel.js"],"sourcesContent":["import React,{ Component } from 'react';\r\nimport View from 'react-view';\r\nimport { Animated } from \"react-move\";\r\nimport Constants from '../Constants';\r\nimport Symbol from './Symbol';\r\n\r\nclass Reel extends Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.symbols=Constants.REEL_SYMBOLS[this.props.index];\r\n        this.reelSymbols = this.symbols.repeat(Constants.REELS_REPEAT).split(\"\");\r\n        this.symbolHeight = this.props.height/ Constants.SYMBOLS;\r\n\r\n        this.symbolsRefs = [];\r\n\r\n        this.position = this.reelSymbols.length - Constants.SYMBOLS;\r\n        this.currentScrollPos=this.position * this.symbolHeight * -1;\r\n        this.state = {\r\n            scrollPos: new Animated.Value(this.currentScrollPos)\r\n        }\r\n    }\r\n\r\n    highLightAtIndex = (index, highLight) => {\r\n        this.symbolsRefs[this.position + index].setActive(highLight);\r\n    }\r\n\r\n    shakeAtIndex = (index) => {\r\n        this.symbolsRefs[this.position + index].shake();\r\n    }\r\n\r\n    scrollByOffSet = (offset, callback) => {\r\n\r\n        for(let i=0; i<Constants.SYMBOLS; i++){\r\n            this.symbolsRefs[this.position+i].setActive(true);\r\n    }\r\n\r\n        this.currentScrollPos = this.currentScrollPos + (this.symbolHeight * offset);\r\n        this.position = this.position - offset;\r\n        Animated.timing(\r\n            this.state.scrollPos,\r\n            {\r\n                toValue:this.currentScrollPos,\r\n                duration: 750 + (this.props.index * 250),\r\n                useNativeDriver: true,\r\n                easing: Animated.easing\r\n              //  easing: Easing.inOut(Easing.exp)\r\n\r\n            }\r\n            \r\n        ).start(()=>{\r\n            this.position = ((Constants.REELS_REPEAT - 2) * this.symbols.length ) + (this.position % this.symbols.length);\r\n            let results = [];\r\n            for(let i=0; i<Constants.SYMBOLS; i++){\r\n                this.symbolsRefs[this.position+i].setActive(false);\r\n                results.push(this.reelSymbols[this.position+i]);\r\n            }\r\n\r\n            this.currentScrollPos = this.position * this.symbolHeight * -1;\r\n            this.state.scrollPos.setValue(this.currentScrollPos);\r\n\r\n            callback(this.props.index, results);\r\n        });\r\n    }\r\n\r\n    render(){\r\n        const reel= {\r\n            overflow: 'hidden'\r\n        }\r\n        return(\r\n            <View style={[reel,{width: this.props.width, height: this.props.height}]} >\r\n               <Animated.View style={{ width:this.props.width, height:this.reelSymbols.length * this.symbolHeight, transform:[{ translateY: this.state.scrollPos }] }}>\r\n                   {this.reelSymbols.map((el, idx)=>{\r\n                       return <Symbol symbol={el} key={idx} index={idx} width={this.props.width} height={this.symbolHeight} ref={(ref) => { this.symbolsRefs[idx]=ref; }}/>\r\n                   })}\r\n               </Animated.View>\r\n            </View>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Reel;"],"mappings":"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"},"metadata":{},"sourceType":"module"}