{"ast":null,"code":"var _jsxFileName = \"F:\\\\Games\\\\slotmachinereact\\\\src\\\\components\\\\Reel.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport Symbol from './Symbol';\nimport '../assets/css/App.css';\nimport Constants from '../Constants';\nimport { motion, animate, transform, motionValue, Easing } from \"framer-motion\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Reel = props => {\n  _s();\n\n  const [scrollPos, setScrollPos] = useState(motionValue(currentScrollPos)); //const symbols=Constants.REEL_SYMBOLS[props.index];\n\n  const symbols = \"DDDGNNSSVVVCCFFRRYYIIJJZZMMOOLLTTPPBBQQAAG\";\n  const reelSymbols = symbols.repeat(Constants.REELS_REPEAT).split(\"\");\n  const symbolHeight = props.height / Constants.SYMBOLS;\n  let symbolsRefs = [];\n  const position = reelSymbols.length - Constants.SYMBOLS;\n  const currentScrollPos = position * symbolHeight * -1;\n\n  const highLightAtIndex = (index, highLight) => {\n    symbolsRefs[position + index].setActive(highLight);\n  };\n\n  const shakeAtIndex = index => {\n    symbolsRefs[position + index].shake();\n  };\n\n  const scrollByOffSet = (offset, callback) => {\n    for (let i = 0; i < Constants.SYMBOLS; i++) {\n      symbolsRefs[position + i].setActive(true);\n    }\n\n    currentScrollPos = currentScrollPos + symbolHeight * offset;\n    position = position - offset;\n    motion.timing(scrollPos, {\n      toValue: currentScrollPos,\n      duration: 750 + props.index * 250,\n      useNativeDriver: true,\n      easing: Easing.inOut(Easing.exp)\n    }).start(() => {\n      position = (Constants.REELS_REPEAT - 2) * symbols.length + position % symbols.length;\n      let results = [];\n\n      for (let i = 0; i < Constants.SYMBOLS; i++) {\n        symbolsRefs[position + i].setActive(false);\n        results.push(reelSymbols[position + i]);\n      }\n\n      currentScrollPos = position * symbolHeight * -1;\n      setScrollPos(currentScrollPos);\n      callback(props.index, results);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"reel\",\n    children: /*#__PURE__*/_jsxDEV(motion.div, {\n      style: {\n        width: props.width,\n        height: reelSymbols.length * symbolHeight,\n        transform: [{\n          translateY: scrollPos\n        }]\n      },\n      children: reelSymbols.map((el, idx) => {\n        return /*#__PURE__*/_jsxDEV(Symbol, {\n          symbol: el,\n          index: idx,\n          width: props.width,\n          height: symbolHeight,\n          refs: ref => {\n            symbolsRefs[idx] = ref;\n          }\n        }, idx, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 31\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 16\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 13\n  }, this);\n};\n\n_s(Reel, \"SZrUCWBkd4o7O9VeCB++eCVlVYk=\");\n\n_c = Reel;\nexport default Reel;\n\nvar _c;\n\n$RefreshReg$(_c, \"Reel\");","map":{"version":3,"names":["React","useState","Symbol","Constants","motion","animate","transform","motionValue","Easing","Reel","props","scrollPos","setScrollPos","currentScrollPos","symbols","reelSymbols","repeat","REELS_REPEAT","split","symbolHeight","height","SYMBOLS","symbolsRefs","position","length","highLightAtIndex","index","highLight","setActive","shakeAtIndex","shake","scrollByOffSet","offset","callback","i","timing","toValue","duration","useNativeDriver","easing","inOut","exp","start","results","push","width","translateY","map","el","idx","ref"],"sources":["F:/Games/slotmachinereact/src/components/Reel.js"],"sourcesContent":["import React,{useState} from 'react';\r\nimport Symbol from './Symbol';\r\nimport '../assets/css/App.css';\r\nimport Constants from '../Constants';\r\nimport {motion,animate,transform, motionValue, Easing} from \"framer-motion\";\r\n\r\nconst Reel = (props) =>{\r\n \r\nconst [scrollPos, setScrollPos] = useState(motionValue(currentScrollPos));\r\n\r\n//const symbols=Constants.REEL_SYMBOLS[props.index];\r\nconst symbols = \"DDDGNNSSVVVCCFFRRYYIIJJZZMMOOLLTTPPBBQQAAG\";\r\nconst reelSymbols = symbols.repeat(Constants.REELS_REPEAT).split(\"\");\r\nconst symbolHeight = props.height/ Constants.SYMBOLS;\r\n\r\nlet symbolsRefs = [];\r\n\r\nconst position = reelSymbols.length - Constants.SYMBOLS;\r\nconst currentScrollPos=position * symbolHeight * -1;\r\n       \r\nconst highLightAtIndex = (index, highLight) => {\r\n        symbolsRefs[position + index].setActive(highLight);\r\n}\r\n\r\nconst shakeAtIndex = (index) => {\r\n    symbolsRefs[position + index].shake();\r\n}\r\n\r\nconst scrollByOffSet = (offset, callback) => {\r\n\r\n        for(let i=0; i<Constants.SYMBOLS; i++){\r\n            symbolsRefs[position+i].setActive(true);\r\n}\r\n\r\ncurrentScrollPos = currentScrollPos + (symbolHeight * offset);\r\n        position = position - offset;\r\n        motion.timing(\r\n            scrollPos,\r\n            {\r\n                toValue:currentScrollPos,\r\n                duration: 750 + (props.index * 250),\r\n                useNativeDriver: true,\r\n                easing: Easing.inOut(Easing.exp)\r\n\r\n            }\r\n            \r\n        ).start(()=>{\r\n            position = ((Constants.REELS_REPEAT - 2) * symbols.length ) + (position % symbols.length);\r\n            let results = [];\r\n            for(let i=0; i<Constants.SYMBOLS; i++){\r\n                symbolsRefs[position+i].setActive(false);\r\n                results.push(reelSymbols[position+i]);\r\n            }\r\n\r\n            currentScrollPos = position * symbolHeight * -1;\r\n            setScrollPos(currentScrollPos);\r\n\r\n            callback(props.index, results);\r\n        });\r\n    }\r\n\r\n\r\n        return(\r\n            <div className=\"reel\" >\r\n               <motion.div style={{ width:props.width, height:reelSymbols.length * symbolHeight, transform:[{ translateY: scrollPos }] }}>\r\n                   {reelSymbols.map((el, idx)=>{\r\n                       return <Symbol symbol={el} key={idx} index={idx} width={props.width} height={symbolHeight} refs={(ref) => { symbolsRefs[idx]=ref; }}/>\r\n                   })}\r\n               </motion.div>\r\n            </div>\r\n        );\r\n}\r\n\r\nexport default Reel;"],"mappings":"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"},"metadata":{},"sourceType":"module"}