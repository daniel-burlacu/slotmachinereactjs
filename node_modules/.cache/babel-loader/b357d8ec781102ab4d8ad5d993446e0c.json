{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.link = void 0;\n\nconst ethers_1 = require(\"ethers\");\n\nfunction link(contract, libraryName, libraryAddress) {\n  const {\n    object\n  } = contract.evm.bytecode;\n\n  if (object.indexOf('$') >= 0) {\n    linkSolidity5(contract, libraryName, libraryAddress);\n  } else {\n    linkSolidity4(contract, libraryName, libraryAddress);\n  }\n}\n\nexports.link = link;\n\nfunction linkSolidity4(contract, libraryName, libraryAddress) {\n  const address = libraryAddress.replace('0x', '');\n  const libraryNamePrefix = libraryName.slice(0, 36);\n  const pattern = new RegExp(`_+${libraryNamePrefix}_+`, 'g');\n\n  if (!pattern.exec(contract.evm.bytecode.object)) {\n    throw new Error(`Can't link '${libraryName}'.`);\n  }\n\n  contract.evm.bytecode.object = contract.evm.bytecode.object.replace(pattern, address);\n}\n\nfunction linkSolidity5(contract, libraryName, libraryAddress) {\n  const address = libraryAddress.replace('0x', '');\n  const encodedLibraryName = ethers_1.utils.solidityKeccak256(['string'], [libraryName]).slice(2, 36);\n  const pattern = new RegExp(`_+\\\\$${encodedLibraryName}\\\\$_+`, 'g');\n  const bytecode = contract.evm.bytecode.object;\n\n  if (!pattern.exec(bytecode)) {\n    throw new Error(`Can't link '${libraryName}'.`);\n  }\n\n  contract.evm.bytecode.object = bytecode.replace(pattern, address);\n}","map":{"version":3,"names":["Object","defineProperty","exports","value","link","ethers_1","require","contract","libraryName","libraryAddress","object","evm","bytecode","indexOf","linkSolidity5","linkSolidity4","address","replace","libraryNamePrefix","slice","pattern","RegExp","exec","Error","encodedLibraryName","utils","solidityKeccak256"],"sources":["F:/Games/slotmachinereact/node_modules/@ethereum-waffle/compiler/dist/cjs/link.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.link = void 0;\nconst ethers_1 = require(\"ethers\");\nfunction link(contract, libraryName, libraryAddress) {\n    const { object } = contract.evm.bytecode;\n    if (object.indexOf('$') >= 0) {\n        linkSolidity5(contract, libraryName, libraryAddress);\n    }\n    else {\n        linkSolidity4(contract, libraryName, libraryAddress);\n    }\n}\nexports.link = link;\nfunction linkSolidity4(contract, libraryName, libraryAddress) {\n    const address = libraryAddress.replace('0x', '');\n    const libraryNamePrefix = libraryName.slice(0, 36);\n    const pattern = new RegExp(`_+${libraryNamePrefix}_+`, 'g');\n    if (!pattern.exec(contract.evm.bytecode.object)) {\n        throw new Error(`Can't link '${libraryName}'.`);\n    }\n    contract.evm.bytecode.object = contract.evm.bytecode.object.replace(pattern, address);\n}\nfunction linkSolidity5(contract, libraryName, libraryAddress) {\n    const address = libraryAddress.replace('0x', '');\n    const encodedLibraryName = ethers_1.utils\n        .solidityKeccak256(['string'], [libraryName])\n        .slice(2, 36);\n    const pattern = new RegExp(`_+\\\\$${encodedLibraryName}\\\\$_+`, 'g');\n    const bytecode = contract.evm.bytecode.object;\n    if (!pattern.exec(bytecode)) {\n        throw new Error(`Can't link '${libraryName}'.`);\n    }\n    contract.evm.bytecode.object = bytecode.replace(pattern, address);\n}\n"],"mappings":"AAAA;;AACAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;EAAEC,KAAK,EAAE;AAAT,CAA7C;AACAD,OAAO,CAACE,IAAR,GAAe,KAAK,CAApB;;AACA,MAAMC,QAAQ,GAAGC,OAAO,CAAC,QAAD,CAAxB;;AACA,SAASF,IAAT,CAAcG,QAAd,EAAwBC,WAAxB,EAAqCC,cAArC,EAAqD;EACjD,MAAM;IAAEC;EAAF,IAAaH,QAAQ,CAACI,GAAT,CAAaC,QAAhC;;EACA,IAAIF,MAAM,CAACG,OAAP,CAAe,GAAf,KAAuB,CAA3B,EAA8B;IAC1BC,aAAa,CAACP,QAAD,EAAWC,WAAX,EAAwBC,cAAxB,CAAb;EACH,CAFD,MAGK;IACDM,aAAa,CAACR,QAAD,EAAWC,WAAX,EAAwBC,cAAxB,CAAb;EACH;AACJ;;AACDP,OAAO,CAACE,IAAR,GAAeA,IAAf;;AACA,SAASW,aAAT,CAAuBR,QAAvB,EAAiCC,WAAjC,EAA8CC,cAA9C,EAA8D;EAC1D,MAAMO,OAAO,GAAGP,cAAc,CAACQ,OAAf,CAAuB,IAAvB,EAA6B,EAA7B,CAAhB;EACA,MAAMC,iBAAiB,GAAGV,WAAW,CAACW,KAAZ,CAAkB,CAAlB,EAAqB,EAArB,CAA1B;EACA,MAAMC,OAAO,GAAG,IAAIC,MAAJ,CAAY,KAAIH,iBAAkB,IAAlC,EAAuC,GAAvC,CAAhB;;EACA,IAAI,CAACE,OAAO,CAACE,IAAR,CAAaf,QAAQ,CAACI,GAAT,CAAaC,QAAb,CAAsBF,MAAnC,CAAL,EAAiD;IAC7C,MAAM,IAAIa,KAAJ,CAAW,eAAcf,WAAY,IAArC,CAAN;EACH;;EACDD,QAAQ,CAACI,GAAT,CAAaC,QAAb,CAAsBF,MAAtB,GAA+BH,QAAQ,CAACI,GAAT,CAAaC,QAAb,CAAsBF,MAAtB,CAA6BO,OAA7B,CAAqCG,OAArC,EAA8CJ,OAA9C,CAA/B;AACH;;AACD,SAASF,aAAT,CAAuBP,QAAvB,EAAiCC,WAAjC,EAA8CC,cAA9C,EAA8D;EAC1D,MAAMO,OAAO,GAAGP,cAAc,CAACQ,OAAf,CAAuB,IAAvB,EAA6B,EAA7B,CAAhB;EACA,MAAMO,kBAAkB,GAAGnB,QAAQ,CAACoB,KAAT,CACtBC,iBADsB,CACJ,CAAC,QAAD,CADI,EACQ,CAAClB,WAAD,CADR,EAEtBW,KAFsB,CAEhB,CAFgB,EAEb,EAFa,CAA3B;EAGA,MAAMC,OAAO,GAAG,IAAIC,MAAJ,CAAY,QAAOG,kBAAmB,OAAtC,EAA8C,GAA9C,CAAhB;EACA,MAAMZ,QAAQ,GAAGL,QAAQ,CAACI,GAAT,CAAaC,QAAb,CAAsBF,MAAvC;;EACA,IAAI,CAACU,OAAO,CAACE,IAAR,CAAaV,QAAb,CAAL,EAA6B;IACzB,MAAM,IAAIW,KAAJ,CAAW,eAAcf,WAAY,IAArC,CAAN;EACH;;EACDD,QAAQ,CAACI,GAAT,CAAaC,QAAb,CAAsBF,MAAtB,GAA+BE,QAAQ,CAACK,OAAT,CAAiBG,OAAjB,EAA0BJ,OAA1B,CAA/B;AACH"},"metadata":{},"sourceType":"script"}