{"ast":null,"code":"import _regeneratorRuntime from\"F:/Games/slotmachinereact/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"F:/Games/slotmachinereact/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"F:/Games/slotmachinereact/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useRef,useEffect,useState}from\"react\";import{ethers}from\"ethers\";import ReelSet from\"./components/ReelSet\";import\"./assets/css/App.css\";import Mint from\"./components/Mint\";import PFPRacerNFT from'./artifacts/contracts/PFPRacerNFT.sol/abi.json';import{assert}from\"chai\";import GameScoreCarousels from'./components/GameScoreCarousel';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var App=function App(){var _useState=useState(0),_useState2=_slicedToArray(_useState,2),spin=_useState2[0],setSpin=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),connecting=_useState4[0],setConnecting=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),showList=_useState6[0],setShowList=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),welcomeMessage=_useState8[0],setWelcomeMessage=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),account=_useState10[0],setAccount=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),contract=_useState12[0],setContract=_useState12[1];var contractAddr=\"0x01e06a0795d91D346B0C441439001A044AdE67c8\";var _useState13=useState(0),_useState14=_slicedToArray(_useState13,2),widthCarousel=_useState14[0],setWidthCarousel=_useState14[1];var carousel=useRef();var callbackSetSpin=function callbackSetSpin(spin){console.log(\"My App score is: \"+spin);setSpin(spin);};var callBackShowWin=function callBackShowWin(){setShowList(1);};var welcomeWallMessage=function welcomeWallMessage(){if(welcomeMessage===\"\"){return/*#__PURE__*/_jsx(\"div\",{className:\"welcome\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"div-connect\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"h2-title\",children:\"Racer NFT Slot Machine\"}),/*#__PURE__*/_jsx(\"button\",{className:connect?\"connect connecting\":\"connect\",onClick:function onClick(){checkConnection();},children:\"Connect to Metamask Wallet\"})]})});}else{return/*#__PURE__*/_jsxs(\"div\",{className:\"welcome\",children:[/*#__PURE__*/_jsx(Mint,{account:account,contract:contract}),/*#__PURE__*/_jsxs(\"h2\",{id:\"h2-connect\",children:[\"Welcome Player :\",/*#__PURE__*/_jsx(\"p\",{id:\"p-welcomeMessage\",children:welcomeMessage})]})]});}};/*\nI need to retrieve withdraw\n*/var checkConnection=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var accounts,provider,newSigner,chainId;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(typeof window.ethereum!==\"undefined\")){_context.next=18;break;}_context.next=3;return window.ethereum.request({method:\"eth_requestAccounts\"});case 3:accounts=_context.sent;if(!(accounts[0]!==undefined)){_context.next=15;break;}setWelcomeMessage(accounts);provider=new ethers.providers.Web3Provider(window.ethereum);newSigner=provider.getSigner();// console.log(\"My chain id is: \"+ newSigner.getChainId().then(val => val)\n// .catch(err => err.message));\n_context.next=10;return newSigner.getChainId();case 10:chainId=_context.sent;console.log(\"My chain id is:\"+chainId);if(chainId!==80001){alert(\"You are not connected the Correct network please switch to: chainID:80001 RPC URL:https://matic-mumbai.chainstacklabs.com\");}else{setAccount(accounts[0]);setContract(new ethers.Contract(contractAddr,PFPRacerNFT.abi,newSigner));}_context.next=16;break;case 15:setWelcomeMessage(account);case 16:_context.next=19;break;case 18:alert(\"Metamask not installed !!! Please install metamask in order to place a mint or do a withdrawal !!!\");case 19:case\"end\":return _context.stop();}}},_callee);}));return function checkConnection(){return _ref.apply(this,arguments);};}();var connect=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var accounts,provider,newSigner;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(typeof window.ethereum!==\"undefined\")){_context2.next=7;break;}_context2.next=3;return window.ethereum.request({method:\"eth_requestAccounts\"});case 3:accounts=_context2.sent;if(accounts[0]===undefined){provider=new ethers.providers.Web3Provider(window.ethereum);newSigner=provider.getSigner();setAccount(accounts[0]);setContract(new ethers.Contract(contractAddr,PFPRacerNFT.abi,newSigner));setWelcomeMessage(\"Welcome player: \"+account+\" !\");}else{assert(\"You already are connected to \"+account);}_context2.next=8;break;case 7:alert(\"Metamask not installed !!! Please install metamask in order to place a mint or do a withdrawal !!!\");case 8:case\"end\":return _context2.stop();}}},_callee2);}));return function connect(){return _ref2.apply(this,arguments);};}();useEffect(function(){checkConnection();welcomeWallMessage();console.log(\"My welcome message is \"+welcomeMessage);},[account]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{children:welcomeWallMessage()}),/*#__PURE__*/_jsx(ReelSet,{runGame:spin,spinCallback:callbackSetSpin,showWinCallback:callBackShowWin}),/*#__PURE__*/_jsx(GameScoreCarousels,{})]});};export default App;","map":{"version":3,"names":["React","useRef","useEffect","useState","ethers","ReelSet","Mint","PFPRacerNFT","assert","GameScoreCarousels","axios","App","spin","setSpin","connecting","setConnecting","showList","setShowList","welcomeMessage","setWelcomeMessage","account","setAccount","contract","setContract","contractAddr","widthCarousel","setWidthCarousel","carousel","callbackSetSpin","console","log","callBackShowWin","welcomeWallMessage","connect","checkConnection","window","ethereum","request","method","accounts","undefined","provider","providers","Web3Provider","newSigner","getSigner","getChainId","chainId","alert","Contract","abi"],"sources":["F:/Games/slotmachinereact/src/App.js"],"sourcesContent":["import React, { useRef,useEffect, useState } from \"react\";\nimport {ethers} from \"ethers\";\nimport ReelSet from \"./components/ReelSet\";\nimport \"./assets/css/App.css\";\nimport Mint from \"./components/Mint\";\nimport PFPRacerNFT from './artifacts/contracts/PFPRacerNFT.sol/abi.json'\nimport { assert } from \"chai\";\nimport GameScoreCarousels from './components/GameScoreCarousel';\nimport axios from 'axios';\n\nconst App = () => {\n  const [spin, setSpin] = useState(0);\n  const [connecting, setConnecting] = useState();\n  const [showList, setShowList] = useState(0);\n  const [welcomeMessage, setWelcomeMessage] = useState(\"\");\n  const [account, setAccount] = useState(\"\");\n  const [contract, setContract] = useState(\"\");\n  const contractAddr = \"0x01e06a0795d91D346B0C441439001A044AdE67c8\";\n  const [widthCarousel, setWidthCarousel] = useState(0);\n  const carousel = useRef();\n\n\n  const callbackSetSpin = (spin) => {\n    console.log(\"My App score is: \" + spin);\n    setSpin(spin);\n  };\n\n  const callBackShowWin = () => {\n    setShowList(1);\n  };\n\n  const welcomeWallMessage = () => {\n    if(welcomeMessage===\"\"){\n      return (\n        <div className=\"welcome\">\n        <div className=\"div-connect\">   \n        <h2 className=\"h2-title\">Racer NFT Slot Machine</h2>\n          <button\n              className={connect ? \"connect connecting\" : \"connect\"}\n              onClick={() => {checkConnection()}}\n          >Connect to Metamask Wallet</button>\n        </div> \n      </div>);\n  }else{\n    return(\n    <div className=\"welcome\">\n      <Mint account={account} contract={contract} /> \n      <h2 id=\"h2-connect\">Welcome Player :\n        <p id=\"p-welcomeMessage\">{welcomeMessage}</p>\n        </h2>\n    </div>\n    );\n  }\n  }\n/*\nI need to retrieve withdraw\n*/\n\n\n  const checkConnection = async() =>{\n    if(typeof window.ethereum !== \"undefined\"){\n        const accounts = await window.ethereum.request({\n          method: \"eth_requestAccounts\",\n        });\n\n        if(accounts[0]!==undefined){\n          setWelcomeMessage(accounts);\n          const provider =  new ethers.providers.Web3Provider(window.ethereum);\n            const newSigner =  provider.getSigner();\n\n            // console.log(\"My chain id is: \"+ newSigner.getChainId().then(val => val)\n            // .catch(err => err.message));\n          let chainId = await newSigner.getChainId();\n          console.log(\"My chain id is:\"+chainId);\n          if(chainId!==80001){\n            alert(\"You are not connected the Correct network please switch to: chainID:80001 RPC URL:https://matic-mumbai.chainstacklabs.com\");\n          }else{\n            setAccount(accounts[0]);\n            setContract(\n              new ethers.Contract(\n                contractAddr,\n                PFPRacerNFT.abi,\n                newSigner\n              )\n            )\n          }\n        }else{\n          setWelcomeMessage(account);\n        }\n  }else{\n    alert(\"Metamask not installed !!! Please install metamask in order to place a mint or do a withdrawal !!!\");\n  }\n}\n\nconst connect = async () => {\n    if(typeof window.ethereum !== \"undefined\"){\n      const accounts = await window.ethereum.request({\n        method: \"eth_requestAccounts\",\n      });\n\n      if(accounts[0]===undefined){\n        const provider =  new ethers.providers.Web3Provider(window.ethereum);\n        const newSigner =  provider.getSigner();\n        setAccount(accounts[0]);\n        setContract(\n          new ethers.Contract(\n            contractAddr,\n            PFPRacerNFT.abi,\n            newSigner\n          )\n        )\n        \n        setWelcomeMessage(\"Welcome player: \"+account+\" !\");\n     }else{\n      assert(\"You already are connected to \"+account);\n     }\n    }else{\n      alert(\"Metamask not installed !!! Please install metamask in order to place a mint or do a withdrawal !!!\");\n    }\n  }\n\n  useEffect(()=>{\n    checkConnection();\n    welcomeWallMessage();\n    console.log(\"My welcome message is \"+welcomeMessage);\n  },[account])\n\n  return (\n    <>\n      <div>{welcomeWallMessage()}</div>    \n      <ReelSet\n        runGame={spin}\n        spinCallback={callbackSetSpin}\n        showWinCallback={callBackShowWin}\n      />\n      <GameScoreCarousels/>\n    </>\n    \n  );\n};\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}