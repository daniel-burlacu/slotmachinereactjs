{"ast":null,"code":"const Common = require('ethereumjs-common').default;\n\nconst utils = require('ethereumjs-util');\n\nconst BN = utils.BN;\n/**\n * An object that repersents the block header\n * @constructor\n * @param {Array} data raw data, deserialized\n * @param {Array} opts Options\n * @param {String|Number} opts.chain The chain for the block header [default: 'mainnet']\n * @param {String} opts.hardfork Hardfork for the block header [default: null, block number-based behaviour]\n * @param {Object} opts.common Alternatively pass a Common instance instead of setting chain/hardfork directly\n * @prop {Buffer} parentHash the blocks' parent's hash\n * @prop {Buffer} uncleHash sha3(rlp_encode(uncle_list))\n * @prop {Buffer} coinbase the miner address\n * @prop {Buffer} stateRoot The root of a Merkle Patricia tree\n * @prop {Buffer} transactionTrie the root of a Trie containing the transactions\n * @prop {Buffer} receiptTrie the root of a Trie containing the transaction Reciept\n * @prop {Buffer} bloom\n * @prop {Buffer} difficulty\n * @prop {Buffer} number the block's height\n * @prop {Buffer} gasLimit\n * @prop {Buffer} gasUsed\n * @prop {Buffer} timestamp\n * @prop {Buffer} extraData\n * @prop {Array.<Buffer>} raw an array of buffers containing the raw blocks.\n */\n\nvar BlockHeader = module.exports = function (data, opts) {\n  opts = opts || {};\n\n  if (opts.common) {\n    if (opts.chain) {\n      throw new Error('Instantiation with both opts.common and opts.chain parameter not allowed!');\n    }\n\n    this._common = opts.common;\n  } else {\n    let chain = opts.chain ? opts.chain : 'mainnet';\n    let hardfork = opts.hardfork ? opts.hardfork : null;\n    this._common = new Common(chain, hardfork);\n  }\n\n  var fields = [{\n    name: 'parentHash',\n    length: 32,\n    default: utils.zeros(32)\n  }, {\n    name: 'uncleHash',\n    default: utils.SHA3_RLP_ARRAY\n  }, {\n    name: 'coinbase',\n    length: 20,\n    default: utils.zeros(20)\n  }, {\n    name: 'stateRoot',\n    length: 32,\n    default: utils.zeros(32)\n  }, {\n    name: 'transactionsTrie',\n    length: 32,\n    default: utils.SHA3_RLP\n  }, {\n    name: 'receiptTrie',\n    length: 32,\n    default: utils.SHA3_RLP\n  }, {\n    name: 'bloom',\n    default: utils.zeros(256)\n  }, {\n    name: 'difficulty',\n    default: Buffer.from([])\n  }, {\n    name: 'number',\n    // TODO: params.homeSteadForkNumber.v left for legacy reasons, replace on future release\n    default: utils.intToBuffer(1150000)\n  }, {\n    name: 'gasLimit',\n    default: Buffer.from('ffffffffffffff', 'hex')\n  }, {\n    name: 'gasUsed',\n    empty: true,\n    default: Buffer.from([])\n  }, {\n    name: 'timestamp',\n    default: Buffer.from([])\n  }, {\n    name: 'extraData',\n    allowZero: true,\n    empty: true,\n    default: Buffer.from([])\n  }, {\n    name: 'mixHash',\n    default: utils.zeros(32) // length: 32\n\n  }, {\n    name: 'nonce',\n    default: utils.zeros(8) // sha3(42)\n\n  }];\n  utils.defineProperties(this, fields, data);\n};\n/**\n * Returns the canoncical difficulty of the block\n * @method canonicalDifficulty\n * @param {Block} parentBlock the parent `Block` of the this header\n * @return {BN}\n */\n\n\nBlockHeader.prototype.canonicalDifficulty = function (parentBlock) {\n  const hardfork = this._common.hardfork() || this._common.activeHardfork(utils.bufferToInt(this.number));\n\n  const blockTs = new BN(this.timestamp);\n  const parentTs = new BN(parentBlock.header.timestamp);\n  const parentDif = new BN(parentBlock.header.difficulty);\n  const minimumDifficulty = new BN(this._common.param('pow', 'minimumDifficulty', hardfork));\n  var offset = parentDif.div(new BN(this._common.param('pow', 'difficultyBoundDivisor', hardfork)));\n  var num = new BN(this.number);\n  var a;\n  var cutoff;\n  var dif;\n\n  if (this._common.hardforkGteHardfork(hardfork, 'byzantium')) {\n    // max((2 if len(parent.uncles) else 1) - ((timestamp - parent.timestamp) // 9), -99) (EIP100)\n    var uncleAddend = parentBlock.header.uncleHash.equals(utils.SHA3_RLP_ARRAY) ? 1 : 2;\n    a = blockTs.sub(parentTs).idivn(9).ineg().iaddn(uncleAddend);\n    cutoff = new BN(-99); // MAX(cutoff, a)\n\n    if (cutoff.cmp(a) === 1) {\n      a = cutoff;\n    }\n\n    dif = parentDif.add(offset.mul(a));\n  }\n\n  if (this._common.hardforkGteHardfork(hardfork, 'muirGlacier')) {\n    // Istanbul/Berlin difficulty bomb delay (EIP2384)\n    num.isubn(9000000);\n\n    if (num.ltn(0)) {\n      num = new BN(0);\n    }\n  } else if (this._common.hardforkGteHardfork(hardfork, 'constantinople')) {\n    // Constantinople difficulty bomb delay (EIP1234)\n    num.isubn(5000000);\n\n    if (num.ltn(0)) {\n      num = new BN(0);\n    }\n  } else if (this._common.hardforkGteHardfork(hardfork, 'byzantium')) {\n    // Byzantium difficulty bomb delay (EIP649)\n    num.isubn(3000000);\n\n    if (num.ltn(0)) {\n      num = new BN(0);\n    }\n  } else if (this._common.hardforkGteHardfork(hardfork, 'homestead')) {\n    // 1 - (block_timestamp - parent_timestamp) // 10\n    a = blockTs.sub(parentTs).idivn(10).ineg().iaddn(1);\n    cutoff = new BN(-99); // MAX(cutoff, a)\n\n    if (cutoff.cmp(a) === 1) {\n      a = cutoff;\n    }\n\n    dif = parentDif.add(offset.mul(a));\n  } else {\n    // pre-homestead\n    if (parentTs.addn(this._common.param('pow', 'durationLimit', hardfork)).cmp(blockTs) === 1) {\n      dif = offset.add(parentDif);\n    } else {\n      dif = parentDif.sub(offset);\n    }\n  }\n\n  var exp = num.idivn(100000).isubn(2);\n\n  if (!exp.isNeg()) {\n    dif.iadd(new BN(2).pow(exp));\n  }\n\n  if (dif.cmp(minimumDifficulty) === -1) {\n    dif = minimumDifficulty;\n  }\n\n  return dif;\n};\n/**\n * checks that the block's `difficuly` matches the canonical difficulty\n * @method validateDifficulty\n * @param {Block} parentBlock this block's parent\n * @return {Boolean}\n */\n\n\nBlockHeader.prototype.validateDifficulty = function (parentBlock) {\n  const dif = this.canonicalDifficulty(parentBlock);\n  return dif.cmp(new BN(this.difficulty)) === 0;\n};\n/**\n * Validates the gasLimit\n * @method validateGasLimit\n * @param {Block} parentBlock this block's parent\n * @returns {Boolean}\n */\n\n\nBlockHeader.prototype.validateGasLimit = function (parentBlock) {\n  const pGasLimit = new BN(parentBlock.header.gasLimit);\n  const gasLimit = new BN(this.gasLimit);\n  const hardfork = this._common.hardfork() ? this._common.hardfork() : this._common.activeHardfork(this.number);\n  const a = pGasLimit.div(new BN(this._common.param('gasConfig', 'gasLimitBoundDivisor', hardfork)));\n  const maxGasLimit = pGasLimit.add(a);\n  const minGasLimit = pGasLimit.sub(a);\n  return gasLimit.lt(maxGasLimit) && gasLimit.gt(minGasLimit) && gasLimit.gte(this._common.param('gasConfig', 'minGasLimit', hardfork));\n};\n/**\n * Validates the entire block header\n * @method validate\n * @param {Blockchain} blockChain the blockchain that this block is validating against\n * @param {Bignum} [height] if this is an uncle header, this is the height of the block that is including it\n * @param {Function} cb the callback function. The callback is given an `error` if the block is invalid\n */\n\n\nBlockHeader.prototype.validate = function (blockchain, height, cb) {\n  var self = this;\n\n  if (arguments.length === 2) {\n    cb = height;\n    height = false;\n  }\n\n  if (this.isGenesis()) {\n    return cb();\n  } // find the blocks parent\n\n\n  blockchain.getBlock(self.parentHash, function (err, parentBlock) {\n    if (err) {\n      return cb('could not find parent block');\n    }\n\n    self.parentBlock = parentBlock;\n    var number = new BN(self.number);\n\n    if (number.cmp(new BN(parentBlock.header.number).iaddn(1)) !== 0) {\n      return cb('invalid number');\n    }\n\n    if (height) {\n      var dif = height.sub(new BN(parentBlock.header.number));\n\n      if (!(dif.cmpn(8) === -1 && dif.cmpn(1) === 1)) {\n        return cb('uncle block has a parent that is too old or to young');\n      }\n    }\n\n    if (!self.validateDifficulty(parentBlock)) {\n      return cb('invalid Difficulty');\n    }\n\n    if (!self.validateGasLimit(parentBlock)) {\n      return cb('invalid gas limit');\n    }\n\n    if (utils.bufferToInt(parentBlock.header.number) + 1 !== utils.bufferToInt(self.number)) {\n      return cb('invalid heigth');\n    }\n\n    if (utils.bufferToInt(self.timestamp) <= utils.bufferToInt(parentBlock.header.timestamp)) {\n      return cb('invalid timestamp');\n    }\n\n    const hardfork = self._common.hardfork() ? self._common.hardfork() : self._common.activeHardfork(height);\n\n    if (self.extraData.length > self._common.param('vm', 'maxExtraDataSize', hardfork)) {\n      return cb('invalid amount of extra data');\n    }\n\n    cb();\n  });\n};\n/**\n * Returns the sha3 hash of the blockheader\n * @method hash\n * @return {Buffer}\n */\n\n\nBlockHeader.prototype.hash = function () {\n  return utils.rlphash(this.raw);\n};\n/**\n * checks if the blockheader is a genesis header\n * @method isGenesis\n * @return {Boolean}\n */\n\n\nBlockHeader.prototype.isGenesis = function () {\n  return this.number.toString('hex') === '';\n};\n/**\n * turns the header into the canonical genesis block header\n * @method setGenesisParams\n */\n\n\nBlockHeader.prototype.setGenesisParams = function () {\n  this.timestamp = this._common.genesis().timestamp;\n  this.gasLimit = this._common.genesis().gasLimit;\n  this.difficulty = this._common.genesis().difficulty;\n  this.extraData = this._common.genesis().extraData;\n  this.nonce = this._common.genesis().nonce;\n  this.stateRoot = this._common.genesis().stateRoot;\n  this.number = Buffer.from([]);\n};","map":{"version":3,"names":["Common","require","default","utils","BN","BlockHeader","module","exports","data","opts","common","chain","Error","_common","hardfork","fields","name","length","zeros","SHA3_RLP_ARRAY","SHA3_RLP","Buffer","from","intToBuffer","empty","allowZero","defineProperties","prototype","canonicalDifficulty","parentBlock","activeHardfork","bufferToInt","number","blockTs","timestamp","parentTs","header","parentDif","difficulty","minimumDifficulty","param","offset","div","num","a","cutoff","dif","hardforkGteHardfork","uncleAddend","uncleHash","equals","sub","idivn","ineg","iaddn","cmp","add","mul","isubn","ltn","addn","exp","isNeg","iadd","pow","validateDifficulty","validateGasLimit","pGasLimit","gasLimit","maxGasLimit","minGasLimit","lt","gt","gte","validate","blockchain","height","cb","self","arguments","isGenesis","getBlock","parentHash","err","cmpn","extraData","hash","rlphash","raw","toString","setGenesisParams","genesis","nonce","stateRoot"],"sources":["F:/Games/slotmachinereact/node_modules/ganache-core/node_modules/ethereumjs-block/header.js"],"sourcesContent":["const Common = require('ethereumjs-common').default\nconst utils = require('ethereumjs-util')\nconst BN = utils.BN\n  /**\n   * An object that repersents the block header\n   * @constructor\n   * @param {Array} data raw data, deserialized\n   * @param {Array} opts Options\n   * @param {String|Number} opts.chain The chain for the block header [default: 'mainnet']\n   * @param {String} opts.hardfork Hardfork for the block header [default: null, block number-based behaviour]\n   * @param {Object} opts.common Alternatively pass a Common instance instead of setting chain/hardfork directly\n   * @prop {Buffer} parentHash the blocks' parent's hash\n   * @prop {Buffer} uncleHash sha3(rlp_encode(uncle_list))\n   * @prop {Buffer} coinbase the miner address\n   * @prop {Buffer} stateRoot The root of a Merkle Patricia tree\n   * @prop {Buffer} transactionTrie the root of a Trie containing the transactions\n   * @prop {Buffer} receiptTrie the root of a Trie containing the transaction Reciept\n   * @prop {Buffer} bloom\n   * @prop {Buffer} difficulty\n   * @prop {Buffer} number the block's height\n   * @prop {Buffer} gasLimit\n   * @prop {Buffer} gasUsed\n   * @prop {Buffer} timestamp\n   * @prop {Buffer} extraData\n   * @prop {Array.<Buffer>} raw an array of buffers containing the raw blocks.\n   */\nvar BlockHeader = module.exports = function (data, opts) {\n  opts = opts || {}\n\n  if (opts.common) {\n    if (opts.chain) {\n      throw new Error('Instantiation with both opts.common and opts.chain parameter not allowed!')\n    }\n    this._common = opts.common\n  } else {\n    let chain = opts.chain ? opts.chain : 'mainnet'\n    let hardfork = opts.hardfork ? opts.hardfork : null\n    this._common = new Common(chain, hardfork)\n  }\n\n  var fields = [{\n    name: 'parentHash',\n    length: 32,\n    default: utils.zeros(32)\n  }, {\n    name: 'uncleHash',\n    default: utils.SHA3_RLP_ARRAY\n  }, {\n    name: 'coinbase',\n    length: 20,\n    default: utils.zeros(20)\n  }, {\n    name: 'stateRoot',\n    length: 32,\n    default: utils.zeros(32)\n  }, {\n    name: 'transactionsTrie',\n    length: 32,\n    default: utils.SHA3_RLP\n  }, {\n    name: 'receiptTrie',\n    length: 32,\n    default: utils.SHA3_RLP\n  }, {\n    name: 'bloom',\n    default: utils.zeros(256)\n  }, {\n    name: 'difficulty',\n    default: Buffer.from([])\n  }, {\n    name: 'number',\n    // TODO: params.homeSteadForkNumber.v left for legacy reasons, replace on future release\n    default: utils.intToBuffer(1150000)\n  }, {\n    name: 'gasLimit',\n    default: Buffer.from('ffffffffffffff', 'hex')\n  }, {\n    name: 'gasUsed',\n    empty: true,\n    default: Buffer.from([])\n  }, {\n    name: 'timestamp',\n    default: Buffer.from([])\n  }, {\n    name: 'extraData',\n    allowZero: true,\n    empty: true,\n    default: Buffer.from([])\n  }, {\n    name: 'mixHash',\n    default: utils.zeros(32)\n      // length: 32\n  }, {\n    name: 'nonce',\n    default: utils.zeros(8) // sha3(42)\n  }]\n  utils.defineProperties(this, fields, data)\n}\n\n/**\n * Returns the canoncical difficulty of the block\n * @method canonicalDifficulty\n * @param {Block} parentBlock the parent `Block` of the this header\n * @return {BN}\n */\nBlockHeader.prototype.canonicalDifficulty = function (parentBlock) {\n  const hardfork = this._common.hardfork() || this._common.activeHardfork(utils.bufferToInt(this.number))\n  const blockTs = new BN(this.timestamp)\n  const parentTs = new BN(parentBlock.header.timestamp)\n  const parentDif = new BN(parentBlock.header.difficulty)\n  const minimumDifficulty = new BN(this._common.param('pow', 'minimumDifficulty', hardfork))\n  var offset = parentDif.div(new BN(this._common.param('pow', 'difficultyBoundDivisor', hardfork)))\n  var num = new BN(this.number)\n  var a\n  var cutoff\n  var dif\n\n  if (this._common.hardforkGteHardfork(hardfork, 'byzantium')) {\n    // max((2 if len(parent.uncles) else 1) - ((timestamp - parent.timestamp) // 9), -99) (EIP100)\n    var uncleAddend = parentBlock.header.uncleHash.equals(utils.SHA3_RLP_ARRAY) ? 1 : 2\n    a = blockTs.sub(parentTs).idivn(9).ineg().iaddn(uncleAddend)\n    cutoff = new BN(-99)\n    // MAX(cutoff, a)\n    if (cutoff.cmp(a) === 1) {\n      a = cutoff\n    }\n    dif = parentDif.add(offset.mul(a))\n  }\n\n  if (this._common.hardforkGteHardfork(hardfork, 'muirGlacier')) {\n    // Istanbul/Berlin difficulty bomb delay (EIP2384)\n    num.isubn(9000000)\n    if (num.ltn(0)) {\n      num = new BN(0)\n    }\n  } else if (this._common.hardforkGteHardfork(hardfork, 'constantinople')) {\n    // Constantinople difficulty bomb delay (EIP1234)\n    num.isubn(5000000)\n    if (num.ltn(0)) {\n      num = new BN(0)\n    }\n  } else if (this._common.hardforkGteHardfork(hardfork, 'byzantium')) {\n    // Byzantium difficulty bomb delay (EIP649)\n    num.isubn(3000000)\n    if (num.ltn(0)) {\n      num = new BN(0)\n    }\n  } else if (this._common.hardforkGteHardfork(hardfork, 'homestead')) {\n    // 1 - (block_timestamp - parent_timestamp) // 10\n    a = blockTs.sub(parentTs).idivn(10).ineg().iaddn(1)\n    cutoff = new BN(-99)\n    // MAX(cutoff, a)\n    if (cutoff.cmp(a) === 1) {\n      a = cutoff\n    }\n    dif = parentDif.add(offset.mul(a))\n  } else {\n    // pre-homestead\n    if (parentTs.addn(this._common.param('pow', 'durationLimit', hardfork)).cmp(blockTs) === 1) {\n      dif = offset.add(parentDif)\n    } else {\n      dif = parentDif.sub(offset)\n    }\n  }\n\n  var exp = num.idivn(100000).isubn(2)\n  if (!exp.isNeg()) {\n    dif.iadd(new BN(2).pow(exp))\n  }\n\n  if (dif.cmp(minimumDifficulty) === -1) {\n    dif = minimumDifficulty\n  }\n\n  return dif\n}\n\n/**\n * checks that the block's `difficuly` matches the canonical difficulty\n * @method validateDifficulty\n * @param {Block} parentBlock this block's parent\n * @return {Boolean}\n */\nBlockHeader.prototype.validateDifficulty = function (parentBlock) {\n  const dif = this.canonicalDifficulty(parentBlock)\n  return dif.cmp(new BN(this.difficulty)) === 0\n}\n\n/**\n * Validates the gasLimit\n * @method validateGasLimit\n * @param {Block} parentBlock this block's parent\n * @returns {Boolean}\n */\nBlockHeader.prototype.validateGasLimit = function (parentBlock) {\n  const pGasLimit = new BN(parentBlock.header.gasLimit)\n  const gasLimit = new BN(this.gasLimit)\n  const hardfork = this._common.hardfork() ? this._common.hardfork() : this._common.activeHardfork(this.number)\n  const a = pGasLimit.div(new BN(this._common.param('gasConfig', 'gasLimitBoundDivisor', hardfork)))\n  const maxGasLimit = pGasLimit.add(a)\n  const minGasLimit = pGasLimit.sub(a)\n\n  return gasLimit.lt(maxGasLimit) && gasLimit.gt(minGasLimit) && gasLimit.gte(this._common.param('gasConfig', 'minGasLimit', hardfork))\n}\n\n/**\n * Validates the entire block header\n * @method validate\n * @param {Blockchain} blockChain the blockchain that this block is validating against\n * @param {Bignum} [height] if this is an uncle header, this is the height of the block that is including it\n * @param {Function} cb the callback function. The callback is given an `error` if the block is invalid\n */\nBlockHeader.prototype.validate = function (blockchain, height, cb) {\n  var self = this\n  if (arguments.length === 2) {\n    cb = height\n    height = false\n  }\n\n  if (this.isGenesis()) {\n    return cb()\n  }\n\n  // find the blocks parent\n  blockchain.getBlock(self.parentHash, function (err, parentBlock) {\n    if (err) {\n      return cb('could not find parent block')\n    }\n\n    self.parentBlock = parentBlock\n\n    var number = new BN(self.number)\n    if (number.cmp(new BN(parentBlock.header.number).iaddn(1)) !== 0) {\n      return cb('invalid number')\n    }\n\n    if (height) {\n      var dif = height.sub(new BN(parentBlock.header.number))\n      if (!(dif.cmpn(8) === -1 && dif.cmpn(1) === 1)) {\n        return cb('uncle block has a parent that is too old or to young')\n      }\n    }\n\n    if (!self.validateDifficulty(parentBlock)) {\n      return cb('invalid Difficulty')\n    }\n\n    if (!self.validateGasLimit(parentBlock)) {\n      return cb('invalid gas limit')\n    }\n\n    if (utils.bufferToInt(parentBlock.header.number) + 1 !== utils.bufferToInt(self.number)) {\n      return cb('invalid heigth')\n    }\n\n    if (utils.bufferToInt(self.timestamp) <= utils.bufferToInt(parentBlock.header.timestamp)) {\n      return cb('invalid timestamp')\n    }\n\n    const hardfork = self._common.hardfork() ? self._common.hardfork() : self._common.activeHardfork(height)\n    if (self.extraData.length > self._common.param('vm', 'maxExtraDataSize', hardfork)) {\n      return cb('invalid amount of extra data')\n    }\n\n    cb()\n  })\n}\n\n/**\n * Returns the sha3 hash of the blockheader\n * @method hash\n * @return {Buffer}\n */\nBlockHeader.prototype.hash = function () {\n  return utils.rlphash(this.raw)\n}\n\n/**\n * checks if the blockheader is a genesis header\n * @method isGenesis\n * @return {Boolean}\n */\nBlockHeader.prototype.isGenesis = function () {\n  return this.number.toString('hex') === ''\n}\n\n/**\n * turns the header into the canonical genesis block header\n * @method setGenesisParams\n */\nBlockHeader.prototype.setGenesisParams = function () {\n  this.timestamp = this._common.genesis().timestamp\n  this.gasLimit = this._common.genesis().gasLimit\n  this.difficulty = this._common.genesis().difficulty\n  this.extraData = this._common.genesis().extraData\n  this.nonce = this._common.genesis().nonce\n  this.stateRoot = this._common.genesis().stateRoot\n  this.number = Buffer.from([])\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}