{"ast":null,"code":"import _slicedToArray from \"F:/Games/slotmachinereact/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport { jsx as e } from \"react/jsx-runtime\";\nimport { createContext as t, useContext as n, useRef as i, useState as r } from \"react\";\nimport { config as s, useTransition as o, animated as a } from \"react-spring\";\nimport { useDrag as l } from \"@use-gesture/react\";\nimport { a as d, b as c, c as u } from \"./useThumbsModule-0944decf.js\";\nimport \"rxjs\";\nimport \"screenfull\";\nvar m = t(void 0);\n\nfunction g() {\n  var e = n(m);\n  if (!e) throw new Error(\"useTransitionCarouselContext isn't being used within the useTransitionCarousel context; \\n    use the context only inside a component that is rendered within the Carousel.\");\n  return e;\n}\n\nfunction h(_ref) {\n  var t = _ref.items,\n      _ref$withLoop = _ref.withLoop,\n      n = _ref$withLoop === void 0 ? !1 : _ref$withLoop,\n      _ref$withThumbs = _ref.withThumbs,\n      g = _ref$withThumbs === void 0 ? !1 : _ref$withThumbs,\n      _ref$springConfig = _ref.springConfig,\n      h = _ref$springConfig === void 0 ? s.default : _ref$springConfig,\n      _ref$thumbsSlideAxis = _ref.thumbsSlideAxis,\n      p = _ref$thumbsSlideAxis === void 0 ? \"x\" : _ref$thumbsSlideAxis,\n      _ref$enableThumbsWrap = _ref.enableThumbsWrapperScroll,\n      f = _ref$enableThumbsWrap === void 0 ? !0 : _ref$enableThumbsWrap,\n      _ref$draggingSlideTre = _ref.draggingSlideTreshold,\n      b = _ref$draggingSlideTre === void 0 ? 50 : _ref$draggingSlideTre,\n      x = _ref.prepareThumbsData,\n      v = _ref.toPrevItemSpringProps,\n      I = _ref.toNextItemSpringProps,\n      _ref$disableGestures = _ref.disableGestures,\n      T = _ref$disableGestures === void 0 ? !1 : _ref$disableGestures,\n      S = _ref.trail,\n      _ref$exitBeforeEnter = _ref.exitBeforeEnter,\n      j = _ref$exitBeforeEnter === void 0 ? !1 : _ref$exitBeforeEnter,\n      _ref$springAnimationP = _ref.springAnimationProps,\n      O = _ref$springAnimationP === void 0 ? {\n    initial: {\n      opacity: 1,\n      position: \"absolute\"\n    },\n    from: {\n      opacity: 0,\n      position: \"absolute\"\n    },\n    enter: {\n      opacity: 1,\n      position: \"absolute\"\n    },\n    leave: {\n      opacity: 0,\n      position: \"absolute\"\n    }\n  } : _ref$springAnimationP;\n\n  var y = i(\"next\"),\n      C = i(null),\n      w = i(!1),\n      _r = r(0),\n      _r2 = _slicedToArray(_r, 2),\n      A = _r2[0],\n      N = _r2[1],\n      _d = d(),\n      F = _d.emitObservable,\n      P = _d.useListenToCustomEvent,\n      _c = c({\n    emitObservable: F,\n    mainCarouselWrapperRef: C\n  }),\n      E = _c.enterFullscreen,\n      L = _c.exitFullscreen,\n      R = _c.getIsFullscreen,\n      _u = u({\n    items: t,\n    withThumbs: g,\n    thumbsSlideAxis: p,\n    springConfig: h,\n    prepareThumbsData: x,\n    slideType: \"fixed\"\n  }),\n      B = _u.thumbsFragment,\n      D = _u.handleThumbsScroll,\n      W = l(function (_ref2) {\n    var e = _ref2.last,\n        _ref2$movement = _slicedToArray(_ref2.movement, 1),\n        i = _ref2$movement[0];\n\n    if (!G() && e) {\n      var _e = i > b,\n          _r3 = i < -b,\n          _s = 0 === A,\n          _o = A === t.length - 1;\n\n      if (_r3) {\n        if (!n && _o) return;\n        H(), F({\n          eventName: \"onLeftSwipe\"\n        });\n      } else if (_e) {\n        if (!n && _s) return;\n        J(), F({\n          eventName: \"onRightSwipe\"\n        });\n      }\n    }\n  }, {\n    enabled: !T\n  });\n\n  var k = o(A, Object.assign(Object.assign({\n    config: h\n  }, function () {\n    var e = z();\n    return \"prev\" === e && v ? {\n      initial: Object.assign({}, O.initial),\n      from: Object.assign({}, v.from),\n      enter: Object.assign({}, v.enter),\n      leave: Object.assign({}, v.leave)\n    } : \"next\" === e && I ? {\n      initial: Object.assign({}, O.initial),\n      from: Object.assign({}, I.from),\n      enter: Object.assign({}, I.enter),\n      leave: Object.assign({}, I.leave)\n    } : {\n      initial: Object.assign({}, O.initial),\n      from: Object.assign({}, O.from),\n      enter: Object.assign({}, O.enter),\n      leave: Object.assign({}, O.leave)\n    };\n  }()), {\n    onStart: function onStart() {\n      return M(!0);\n    },\n    trail: S,\n    exitBeforeEnter: j,\n    key: t[A].id,\n    onRest: function onRest(e) {\n      e.finished && (M(!1), F({\n        eventName: \"onSlideChange\",\n        slideActionType: z(),\n        currentItem: {\n          index: A,\n          id: t[A].id\n        }\n      }));\n    }\n  }))(function (n, i) {\n    return e(a.div, Object.assign({\n      style: Object.assign(Object.assign({}, n), {\n        flex: \"1 0 100%\",\n        width: \"100%\",\n        height: \"100%\"\n      })\n    }, {\n      children: t[i].renderItem\n    }));\n  });\n\n  function G() {\n    return w.current;\n  }\n\n  function M(e) {\n    w.current = e;\n  }\n\n  function q(e) {\n    y.current = e;\n  }\n\n  function z() {\n    return y.current;\n  }\n\n  function H() {\n    var e = A === t.length - 1;\n    n ? (q(\"next\"), e ? (F({\n      eventName: \"onSlideStartChange\",\n      slideActionType: z(),\n      nextItem: {\n        index: 0,\n        id: t[0].id\n      }\n    }), N(0)) : (F({\n      eventName: \"onSlideStartChange\",\n      slideActionType: z(),\n      nextItem: {\n        index: A + 1,\n        id: t[A + 1].id\n      }\n    }), N(A + 1))) : e || (F({\n      eventName: \"onSlideStartChange\",\n      slideActionType: z(),\n      nextItem: {\n        index: A + 1,\n        id: t[A + 1].id\n      }\n    }), q(\"next\"), N(A + 1));\n  }\n\n  function J() {\n    var e = 0 === A;\n    n ? (q(\"prev\"), e ? (F({\n      eventName: \"onSlideStartChange\",\n      slideActionType: z(),\n      nextItem: {\n        index: t.length - 1,\n        id: t[t.length - 1].id\n      }\n    }), N(t.length - 1)) : (F({\n      eventName: \"onSlideStartChange\",\n      slideActionType: z(),\n      nextItem: {\n        index: A - 1,\n        id: t[A - 1].id\n      }\n    }), N(A - 1))) : e || (q(\"prev\"), F({\n      eventName: \"onSlideStartChange\",\n      slideActionType: z(),\n      nextItem: {\n        index: A - 1,\n        id: t[A - 1].id\n      }\n    }), N(A - 1));\n  }\n\n  function K(e) {\n    return t.findIndex(function (t) {\n      return t.id === e;\n    });\n  }\n\n  var Q = {\n    activeItem: A,\n    slideToItem: function slideToItem(e) {\n      var n = 0;\n      if (n = \"string\" == typeof e ? t.findIndex(function (t) {\n        return t.id === e;\n      }) : e, n >= t.length) throw Error(\"The item you want to slide to doesn't exist. This could be due to the fact that \\n        you provide a wrong id or a higher numeric index.\");\n      if (n === A) return;\n      var i = K(t[A].id),\n          r = K(t[n].id);\n      F({\n        eventName: \"onSlideStartChange\",\n        slideActionType: z(),\n        nextItem: {\n          index: r,\n          id: t[n].id\n        }\n      }), q(r > i ? \"next\" : \"prev\"), N(n), f && g && D(n);\n    },\n    slideToNextItem: H,\n    slideToPrevItem: J,\n    enterFullscreen: E,\n    exitFullscreen: L,\n    useListenToCustomEvent: P,\n    getIsNextItem: function getIsNextItem(e) {\n      var i = K(e);\n      return n && A === t.length - 1 ? 0 === i : i === A + 1;\n    },\n    getIsPrevItem: function getIsPrevItem(e) {\n      var i = K(e);\n      return n && 0 === A ? i === t.length - 1 : i === A - 1;\n    },\n    getIsAnimating: G,\n    getIsFullscreen: R,\n    getIsActiveItem: function getIsActiveItem(e) {\n      return K(e) === A;\n    },\n    getCurrentActiveItem: function getCurrentActiveItem() {\n      return {\n        id: t[A].id,\n        index: A\n      };\n    }\n  },\n      U = e(m.Provider, Object.assign({\n    value: Q\n  }, {\n    children: e(\"div\", Object.assign({\n      ref: C\n    }, W(), {\n      style: {\n        display: \"flex\",\n        position: \"relative\",\n        width: \"100%\",\n        height: \"100%\",\n        overflow: \"hidden\"\n      }\n    }, {\n      children: k\n    }))\n  })),\n      V = e(m.Provider, Object.assign({\n    value: Q\n  }, {\n    children: B\n  }));\n  return Object.assign({\n    carouselFragment: U,\n    thumbsFragment: V\n  }, Q);\n}\n\nexport { h as useTransitionCarousel, g as useTransitionCarouselContext };","map":{"version":3,"mappings":"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","names":["UseTransitionCarouselContext","createContext","undefined","useTransitionCarouselContext","context","useContext","Error","useTransitionCarousel","items","withLoop","withThumbs","springConfig","config","default","thumbsSlideAxis","enableThumbsWrapperScroll","draggingSlideTreshold","prepareThumbsData","toPrevItemSpringProps","toNextItemSpringProps","disableGestures","trail","exitBeforeEnter","springAnimationProps","initial","opacity","position","from","enter","leave","slideActionType","useRef","mainCarouselWrapperRef","isAnimating","useState","activeItem","setActiveItem","useCustomEventsModule","emitObservable","useListenToCustomEvent","useFullscreenModule","enterFullscreen","exitFullscreen","getIsFullscreen","useThumbsModule","slideType","_thumbsFragment","thumbsFragment","handleThumbsScroll","bindSwipe","useDrag","mx","last","movement","getIsAnimating","prevItemTreshold","nextItemTreshold","isFirstItem","isLastItem","length","slideToNextItem","eventName","slideToPrevItem","enabled","itemsFragment","useTransition","getSlideActionType","getTransitionConfig","onStart","setIsAnimating","key","id","onRest","val","finished","currentItem","index","styles","item","_jsx","animated","div","style","flex","width","height","children","renderItem","current","setSlideActionType","type","nextItem","findItemIndex","findIndex","contextProps","slideToItem","itemIndex","_item","newActiveItem","getIsNextItem","getIsPrevItem","getIsActiveItem","getCurrentActiveItem","carouselFragment","Provider","value","ref","display","overflow"],"sources":["F:\\Games\\slotmachinereact\\node_modules\\react-spring-carousel\\src\\useTransitionCarousel\\index.tsx"],"sourcesContent":["import { createContext, useRef, useState, useContext } from 'react'\nimport { useTransition, animated, config } from 'react-spring'\nimport { useDrag } from '@use-gesture/react'\nimport { useCustomEventsModule, useThumbsModule, useFullscreenModule } from '../modules'\nimport { SlideActionType } from '../types'\nimport {\n  UseTransitionCarouselContextProps,\n  UseTransitionCarouselProps,\n} from '../types/useTransitionCarousel'\nimport { ReactSpringCarouselItemWithThumbs } from '../types/useSpringCarousel'\n\nconst UseTransitionCarouselContext = createContext<\n  UseTransitionCarouselContextProps | undefined\n>(undefined)\n\nfunction useTransitionCarouselContext() {\n  const context = useContext(UseTransitionCarouselContext)\n\n  if (!context) {\n    throw new Error(`useTransitionCarouselContext isn't being used within the useTransitionCarousel context; \n    use the context only inside a component that is rendered within the Carousel.`)\n  }\n\n  return context\n}\n\nfunction useTransitionCarousel({\n  items,\n  withLoop = false,\n  withThumbs = false,\n  springConfig = config.default,\n  thumbsSlideAxis = 'x',\n  enableThumbsWrapperScroll = true,\n  draggingSlideTreshold = 50,\n  prepareThumbsData,\n  toPrevItemSpringProps,\n  toNextItemSpringProps,\n  disableGestures = false,\n  trail,\n  exitBeforeEnter = false,\n  springAnimationProps = {\n    initial: {\n      opacity: 1,\n      position: 'absolute',\n    },\n    from: {\n      opacity: 0,\n      position: 'absolute',\n    },\n    enter: {\n      opacity: 1,\n      position: 'absolute',\n    },\n    leave: {\n      opacity: 0,\n      position: 'absolute',\n    },\n  },\n}: UseTransitionCarouselProps) {\n  const slideActionType = useRef<SlideActionType>('next')\n  const mainCarouselWrapperRef = useRef<HTMLDivElement | null>(null)\n  const isAnimating = useRef(false)\n  const [activeItem, setActiveItem] = useState(0)\n\n  const { emitObservable, useListenToCustomEvent } =\n    useCustomEventsModule<'use-transition'>()\n  const { enterFullscreen, exitFullscreen, getIsFullscreen } = useFullscreenModule({\n    emitObservable,\n    mainCarouselWrapperRef,\n  })\n  const { thumbsFragment: _thumbsFragment, handleThumbsScroll } = useThumbsModule({\n    items: items as ReactSpringCarouselItemWithThumbs[],\n    withThumbs,\n    thumbsSlideAxis,\n    springConfig,\n    prepareThumbsData,\n    slideType: 'fixed',\n  })\n\n  const bindSwipe = useDrag(\n    ({ last, movement: [mx] }) => {\n      if (getIsAnimating()) {\n        return\n      }\n\n      if (last) {\n        const prevItemTreshold = mx > draggingSlideTreshold\n        const nextItemTreshold = mx < -draggingSlideTreshold\n        const isFirstItem = activeItem === 0\n        const isLastItem = activeItem === items.length - 1\n\n        if (nextItemTreshold) {\n          if (!withLoop && isLastItem) {\n            return\n          }\n\n          slideToNextItem()\n          emitObservable({\n            eventName: 'onLeftSwipe',\n          })\n        } else if (prevItemTreshold) {\n          if (!withLoop && isFirstItem) {\n            return\n          }\n\n          slideToPrevItem()\n          emitObservable({\n            eventName: 'onRightSwipe',\n          })\n        }\n      }\n    },\n    {\n      enabled: !disableGestures,\n    },\n  )\n\n  function getTransitionConfig() {\n    const slideActionType = getSlideActionType()\n\n    if (slideActionType === 'prev' && toPrevItemSpringProps) {\n      return {\n        initial: {\n          ...springAnimationProps.initial,\n        },\n        from: {\n          ...toPrevItemSpringProps.from,\n        },\n        enter: {\n          ...toPrevItemSpringProps.enter,\n        },\n        leave: {\n          ...toPrevItemSpringProps.leave,\n        },\n      }\n    }\n\n    if (slideActionType === 'next' && toNextItemSpringProps) {\n      return {\n        initial: {\n          ...springAnimationProps.initial,\n        },\n        from: {\n          ...toNextItemSpringProps.from,\n        },\n        enter: {\n          ...toNextItemSpringProps.enter,\n        },\n        leave: {\n          ...toNextItemSpringProps.leave,\n        },\n      }\n    }\n\n    return {\n      initial: {\n        ...springAnimationProps.initial,\n      },\n      from: {\n        ...springAnimationProps.from,\n      },\n      enter: {\n        ...springAnimationProps.enter,\n      },\n      leave: {\n        ...springAnimationProps.leave,\n      },\n    }\n  }\n\n  const transitions = useTransition(activeItem, {\n    config: springConfig,\n    ...getTransitionConfig(),\n    onStart: () => setIsAnimating(true),\n    trail,\n    exitBeforeEnter,\n    key: items[activeItem].id,\n    onRest: val => {\n      if (val.finished) {\n        setIsAnimating(false)\n        emitObservable({\n          eventName: 'onSlideChange',\n          slideActionType: getSlideActionType(),\n          currentItem: {\n            index: activeItem,\n            id: items[activeItem].id,\n          },\n        })\n      }\n    },\n  })\n  const itemsFragment = transitions((styles, item) => (\n    <animated.div\n      style={{\n        ...styles,\n        flex: '1 0 100%',\n        width: '100%',\n        height: '100%',\n      }}\n    >\n      {items[item].renderItem}\n    </animated.div>\n  ))\n\n  function getIsAnimating() {\n    return isAnimating.current\n  }\n  function setIsAnimating(val: boolean) {\n    isAnimating.current = val\n  }\n  function setSlideActionType(type: SlideActionType) {\n    slideActionType.current = type\n  }\n  function getSlideActionType() {\n    return slideActionType.current\n  }\n  function slideToItem(item: string | number) {\n    let itemIndex = 0\n\n    if (typeof item === 'string') {\n      itemIndex = items.findIndex(_item => _item.id === item)\n    } else {\n      itemIndex = item\n    }\n\n    if (itemIndex >= items.length) {\n      throw Error(\n        `The item you want to slide to doesn't exist. This could be due to the fact that \n        you provide a wrong id or a higher numeric index.`,\n      )\n    }\n\n    if (itemIndex === activeItem) {\n      return\n    }\n\n    const currentItem = findItemIndex(items[activeItem].id)\n    const newActiveItem = findItemIndex(items[itemIndex].id)\n\n    emitObservable({\n      eventName: 'onSlideStartChange',\n      slideActionType: getSlideActionType(),\n      nextItem: {\n        index: newActiveItem,\n        id: items[itemIndex].id,\n      },\n    })\n\n    if (newActiveItem > currentItem) {\n      setSlideActionType('next')\n    } else {\n      setSlideActionType('prev')\n    }\n\n    setActiveItem(itemIndex)\n\n    if (enableThumbsWrapperScroll && withThumbs) {\n      handleThumbsScroll(itemIndex)\n    }\n  }\n  function slideToNextItem() {\n    const isLastItem = activeItem === items.length - 1\n\n    if (withLoop) {\n      setSlideActionType('next')\n      if (isLastItem) {\n        emitObservable({\n          eventName: 'onSlideStartChange',\n          slideActionType: getSlideActionType(),\n          nextItem: {\n            index: 0,\n            id: items[0].id,\n          },\n        })\n        setActiveItem(0)\n      } else {\n        emitObservable({\n          eventName: 'onSlideStartChange',\n          slideActionType: getSlideActionType(),\n          nextItem: {\n            index: activeItem + 1,\n            id: items[activeItem + 1].id,\n          },\n        })\n        setActiveItem(activeItem + 1)\n      }\n    } else {\n      if (!isLastItem) {\n        emitObservable({\n          eventName: 'onSlideStartChange',\n          slideActionType: getSlideActionType(),\n          nextItem: {\n            index: activeItem + 1,\n            id: items[activeItem + 1].id,\n          },\n        })\n        setSlideActionType('next')\n        setActiveItem(activeItem + 1)\n      }\n    }\n  }\n  function slideToPrevItem() {\n    const isFirstItem = activeItem === 0\n\n    if (withLoop) {\n      setSlideActionType('prev')\n      if (isFirstItem) {\n        emitObservable({\n          eventName: 'onSlideStartChange',\n          slideActionType: getSlideActionType(),\n          nextItem: {\n            index: items.length - 1,\n            id: items[items.length - 1].id,\n          },\n        })\n\n        setActiveItem(items.length - 1)\n      } else {\n        emitObservable({\n          eventName: 'onSlideStartChange',\n          slideActionType: getSlideActionType(),\n          nextItem: {\n            index: activeItem - 1,\n            id: items[activeItem - 1].id,\n          },\n        })\n        setActiveItem(activeItem - 1)\n      }\n    } else {\n      if (!isFirstItem) {\n        setSlideActionType('prev')\n        emitObservable({\n          eventName: 'onSlideStartChange',\n          slideActionType: getSlideActionType(),\n          nextItem: {\n            index: activeItem - 1,\n            id: items[activeItem - 1].id,\n          },\n        })\n        setActiveItem(activeItem - 1)\n      }\n    }\n  }\n  function findItemIndex(id: string) {\n    return items.findIndex(item => item.id === id)\n  }\n  function getIsNextItem(id: string) {\n    const itemIndex = findItemIndex(id)\n\n    if (withLoop && activeItem === items.length - 1) {\n      return itemIndex === 0\n    }\n\n    return itemIndex === activeItem + 1\n  }\n  function getIsPrevItem(id: string) {\n    const itemIndex = findItemIndex(id)\n\n    if (withLoop && activeItem === 0) {\n      return itemIndex === items.length - 1\n    }\n\n    return itemIndex === activeItem - 1\n  }\n\n  const contextProps: UseTransitionCarouselContextProps = {\n    activeItem,\n    slideToItem,\n    slideToNextItem,\n    slideToPrevItem,\n    enterFullscreen,\n    exitFullscreen,\n    useListenToCustomEvent,\n    getIsNextItem,\n    getIsPrevItem,\n    getIsAnimating,\n    getIsFullscreen,\n    getIsActiveItem: id => {\n      return findItemIndex(id) === activeItem\n    },\n    getCurrentActiveItem: () => ({\n      id: items[activeItem].id,\n      index: activeItem,\n    }),\n  }\n\n  const carouselFragment = (\n    <UseTransitionCarouselContext.Provider value={contextProps}>\n      <div\n        ref={mainCarouselWrapperRef}\n        {...bindSwipe()}\n        style={{\n          display: 'flex',\n          position: 'relative',\n          width: '100%',\n          height: '100%',\n          overflow: 'hidden',\n        }}\n      >\n        {itemsFragment}\n      </div>\n    </UseTransitionCarouselContext.Provider>\n  )\n\n  const thumbsFragment = (\n    <UseTransitionCarouselContext.Provider value={contextProps}>\n      {_thumbsFragment}\n    </UseTransitionCarouselContext.Provider>\n  )\n\n  return {\n    carouselFragment,\n    thumbsFragment,\n    ...contextProps,\n  }\n}\n\nexport { useTransitionCarouselContext, useTransitionCarousel }\n"]},"metadata":{},"sourceType":"module"}