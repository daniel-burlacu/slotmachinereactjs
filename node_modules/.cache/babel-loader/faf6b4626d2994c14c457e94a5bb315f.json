{"ast":null,"code":"var _jsxFileName = \"F:\\\\Games\\\\slotmachinereact\\\\src\\\\components\\\\Reel.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport Constants from '../Constants';\nimport Symbol from './Symbol';\nimport { Animate } from 'react-move';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Reel = props => {\n  _s();\n\n  let currentScrollPos = position * symbolHeight * -1;\n  const [scrollPos, setScrollPos] = useState(currentScrollPos);\n  let symbols = Constants.REEL_SYMBOLS[props.index];\n  let reelSymbols = symbols.repeat(Constants.REELS_REPEAT).split(\"\");\n  let symbolHeight = props.height / Constants.SYMBOLS;\n  let symbolsRefs = [];\n  let position = reelSymbols.length - Constants.SYMBOLS;\n\n  const scrollByOffSet = (offset, callback) => {\n    for (let i = 0; i < Constants.SYMBOLS; i++) {\n      symbolsRefs[position + i].setActive(true);\n    }\n\n    currentScrollPos = currentScrollPos + symbolHeight * offset;\n    position = position - offset;\n    const container = {\n      hidden: {\n        opacity: 0\n      },\n      show: {\n        opacity: 1,\n        transition: {\n          delay: 0.3,\n          x: {\n            stiffness: 50,\n            damping: 3\n          },\n          default: {\n            duration: 0.5\n          }\n        }\n      }\n    };\n    Animate.timing(scrollPos, {\n      toValue: this.currentScrollPos,\n      duration: 750 + this.props.index * 250,\n      useNativeDriver: true,\n      easing: 0\n    }).start(() => {\n      this.position = (Constants.REELS_REPEAT - 2) * symbols.length + position % symbols.length;\n      let results = [];\n\n      for (let i = 0; i < Constants.SYMBOLS; i++) {\n        symbolsRefs[position + i].setActive(false);\n        results.push(reelSymbols[this.position + i]);\n      }\n\n      currentScrollPos = position * symbolHeight * -1;\n      scrollPos.setValue(currentScrollPos);\n      callback(props.index, results);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"reel\",\n    children: /*#__PURE__*/_jsxDEV(Animate.Div, {\n      style: {\n        width: props.width,\n        height: reelSymbols.length * symbolHeight,\n        transform: [{\n          translateY: scrollPos\n        }]\n      },\n      children: this.reelSymbols.map((el, idx) => {\n        return /*#__PURE__*/_jsxDEV(Symbol, {\n          symbol: el,\n          index: idx,\n          width: this.props.width,\n          height: this.symbolHeight,\n          ref: ref => {\n            this.symbolsRefs[idx] = ref;\n          }\n        }, idx, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 27\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 12\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Reel, \"305l50080JCEF42zQdW/tImmNiM=\");\n\n_c = Reel;\n\nvar _c;\n\n$RefreshReg$(_c, \"Reel\");","map":{"version":3,"names":["React","useState","Constants","Symbol","Animate","Reel","props","currentScrollPos","position","symbolHeight","scrollPos","setScrollPos","symbols","REEL_SYMBOLS","index","reelSymbols","repeat","REELS_REPEAT","split","height","SYMBOLS","symbolsRefs","length","scrollByOffSet","offset","callback","i","setActive","container","hidden","opacity","show","transition","delay","x","stiffness","damping","default","duration","timing","toValue","useNativeDriver","easing","start","results","push","setValue","width","transform","translateY","map","el","idx","ref"],"sources":["F:/Games/slotmachinereact/src/components/Reel.js"],"sourcesContent":["import React,{useState} from 'react';\r\nimport Constants from '../Constants';\r\nimport Symbol from './Symbol';\r\nimport { Animate } from 'react-move';\r\n\r\n\r\nconst Reel = (props) => {\r\n\r\n    let currentScrollPos=position * symbolHeight * -1;\r\n\r\n    const [scrollPos, setScrollPos] = useState(currentScrollPos);\r\n\r\n    let symbols=Constants.REEL_SYMBOLS[props.index];\r\n    let reelSymbols = symbols.repeat(Constants.REELS_REPEAT).split(\"\");\r\n    let symbolHeight = props.height/ Constants.SYMBOLS;\r\n    let symbolsRefs = [];\r\n    \r\n    let position = reelSymbols.length - Constants.SYMBOLS;\r\n  \r\n const scrollByOffSet = (offset, callback) => {\r\n \r\n          for(let i=0; i<Constants.SYMBOLS; i++){\r\n              symbolsRefs[position+i].setActive(true);\r\n\t\t  }\r\n\r\n        currentScrollPos = currentScrollPos + (symbolHeight * offset);\r\n        position = position - offset;\r\n\t\t\r\n\t\tconst container = {\r\n\t\t\thidden: { opacity: 0 },\r\n\t\t\t  show: {\r\n\t\t\t\t\t opacity: 1,\r\n\t\t\t\t\t transition:{\r\n                            delay: 0.3,\r\n                            x: { stiffness: 50, damping:3 },\r\n\t\t\t\t\t\t\tdefault: { duration:0.5 }\r\n\t\t\t\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n       \r\n\t   Animate.timing(\r\n            scrollPos,\r\n            {\r\n                toValue:this.currentScrollPos,\r\n                duration: 750 + (this.props.index * 250),\r\n                useNativeDriver: true,\r\n                easing:0\r\n\r\n            }\r\n      \r\n        ).start(()=>{\r\n            this.position = ((Constants.REELS_REPEAT - 2) * symbols.length ) + (position % symbols.length);\r\n            let results = [];\r\n            for(let i=0; i<Constants.SYMBOLS; i++){\r\n                symbolsRefs[position+i].setActive(false);\r\n                results.push(reelSymbols[this.position+i]);\r\n            }\r\n\r\n            currentScrollPos = position * symbolHeight * -1;\r\n            scrollPos.setValue(currentScrollPos);\r\n\r\n            callback(props.index, results);\r\n        });\r\n    }\r\n\r\n    return(\r\n        <div className=\"reel\">\r\n           <Animate.Div style={{ width:props.width, height:reelSymbols.length * symbolHeight, transform:[{ translateY: scrollPos }] }}>\r\n               {this.reelSymbols.map((el, idx)=>{\r\n                   return <Symbol symbol={el} key={idx} index={idx} width={this.props.width} height={this.symbolHeight} ref={(ref) => { this.symbolsRefs[idx]=ref; }}/>\r\n               })}\r\n           </Animate.Div>\r\n        </div>\r\n    );\r\n}\r\n\r\n\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}