{"ast":null,"code":"var _jsxFileName = \"F:\\\\Games\\\\slotmachinereact\\\\src\\\\components\\\\Mint.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState, useRef } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { connect } from \"../redux/blockchain/blockchainActions\";\nimport { fetchData } from \"../redux/data/dataActions\";\nimport '../assets/css/App.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Mint = props => {\n  _s();\n\n  const truncate = (input, len) => input.length > len ? `${input.substring(0, len)}...` : input;\n\n  const dispatch = useDispatch();\n  const blockchain = useSelector(state => state.blockchain);\n  const data = useSelector(state => state.data);\n  const [claimingNft, setClaimingNft] = useState(false);\n  const [feedback, setFeedback] = useState(`Click buy to mint your NFT.`);\n  const [mintAmount, setMintAmount] = useState(1);\n  const [CONFIG, SET_CONFIG] = useState({\n    CONTRACT_ADDRESS: \"\",\n    SCAN_LINK: \"\",\n    NETWORK: {\n      NAME: \"\",\n      SYMBOL: \"\",\n      ID: 0\n    },\n    NFT_NAME: \"\",\n    SYMBOL: \"\",\n    MAX_SUPPLY: 1,\n    WEI_COST: 0,\n    DISPLAY_COST: 0,\n    GAS_LIMIT: 0,\n    MARKETPLACE: \"\",\n    MARKETPLACE_LINK: \"\",\n    SHOW_BACKGROUND: false\n  });\n\n  const claimNFTs = () => {\n    let cost = CONFIG.WEI_COST;\n    let gasLimit = CONFIG.GAS_LIMIT;\n    let totalCostWei = String(cost * mintAmount);\n    let totalGasLimit = String(gasLimit * mintAmount);\n    console.log(\"Cost: \", totalCostWei);\n    console.log(\"Gas limit: \", totalGasLimit);\n    setFeedback(`Minting your ${CONFIG.NFT_NAME}...`);\n    setClaimingNft(true);\n    blockchain.smartContract.methods.mint(mintAmount).send({\n      gasLimit: String(totalGasLimit),\n      to: CONFIG.CONTRACT_ADDRESS,\n      from: blockchain.account,\n      value: totalCostWei\n    }).once(\"error\", err => {\n      console.log(err);\n      setFeedback(\"Sorry, something went wrong please try again later.\");\n      setClaimingNft(false);\n    }).then(receipt => {\n      console.log(receipt);\n      setFeedback(`WOW, the ${CONFIG.NFT_NAME} is yours! go visit Opensea.io to view it.`);\n      setClaimingNft(false);\n      dispatch(fetchData(blockchain.account));\n    });\n  };\n\n  const getData = () => {\n    if (blockchain.account !== \"\" && blockchain.smartContract !== null) {\n      dispatch(fetchData(blockchain.account));\n    }\n  };\n\n  const getConfig = async () => {\n    const configResponse = await fetch(\"/config/config.json\", {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\"\n      }\n    });\n    const config = await configResponse.json();\n    SET_CONFIG(config);\n  };\n\n  useEffect(() => {\n    getConfig();\n  }, []);\n  useEffect(() => {\n    getData();\n  }, [blockchain.account]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      class: \"form\",\n      onSubmit: claimNFTs(),\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        class: \"label-mint\",\n        children: [\"NFT's left to mint:\", /*#__PURE__*/_jsxDEV(\"p\", {\n          class: \"p-welcomeMint\",\n          children: [data.totalSupply, \" / \", CONFIG.MAX_SUPPLY]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 14\n        }, this), \"\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        class: \"form-label\",\n        children: [\"Mint Amount:\", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: mintAmount,\n          onChange: e => setMintAmount(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        class: \"form-submit-button\",\n        type: \"submit\",\n        value: \"Mint\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 9\n    }, this)\n  }, void 0, false);\n};\n\n_s(Mint, \"udyIWv1XkBniER8lAfsVM97dbrk=\", false, function () {\n  return [useDispatch, useSelector, useSelector];\n});\n\n_c = Mint;\nexport default Mint;\n\nvar _c;\n\n$RefreshReg$(_c, \"Mint\");","map":{"version":3,"names":["React","useEffect","useState","useRef","useDispatch","useSelector","connect","fetchData","Mint","props","truncate","input","len","length","substring","dispatch","blockchain","state","data","claimingNft","setClaimingNft","feedback","setFeedback","mintAmount","setMintAmount","CONFIG","SET_CONFIG","CONTRACT_ADDRESS","SCAN_LINK","NETWORK","NAME","SYMBOL","ID","NFT_NAME","MAX_SUPPLY","WEI_COST","DISPLAY_COST","GAS_LIMIT","MARKETPLACE","MARKETPLACE_LINK","SHOW_BACKGROUND","claimNFTs","cost","gasLimit","totalCostWei","String","totalGasLimit","console","log","smartContract","methods","mint","send","to","from","account","value","once","err","then","receipt","getData","getConfig","configResponse","fetch","headers","Accept","config","json","totalSupply","e","target"],"sources":["F:/Games/slotmachinereact/src/components/Mint.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { connect } from \"../redux/blockchain/blockchainActions\";\r\nimport { fetchData } from \"../redux/data/dataActions\";\r\nimport '../assets/css/App.css';\r\n\r\nconst Mint = (props) =>{\r\n\r\n  const truncate = (input, len) =>\r\n  input.length > len ? `${input.substring(0, len)}...` : input;\r\n\r\n  const dispatch = useDispatch();\r\n  const blockchain = useSelector((state) => state.blockchain);\r\n  const data = useSelector((state) => state.data);\r\n  const [claimingNft, setClaimingNft] = useState(false);\r\n  const [feedback, setFeedback] = useState(`Click buy to mint your NFT.`);\r\n  const [mintAmount, setMintAmount] = useState(1);\r\n  const [CONFIG, SET_CONFIG] = useState({\r\n    CONTRACT_ADDRESS: \"\",\r\n    SCAN_LINK: \"\",\r\n    NETWORK: {\r\n      NAME: \"\",\r\n      SYMBOL: \"\",\r\n      ID: 0,\r\n    },\r\n    NFT_NAME: \"\",\r\n    SYMBOL: \"\",\r\n    MAX_SUPPLY: 1,\r\n    WEI_COST: 0,\r\n    DISPLAY_COST: 0,\r\n    GAS_LIMIT: 0,\r\n    MARKETPLACE: \"\",\r\n    MARKETPLACE_LINK: \"\",\r\n    SHOW_BACKGROUND: false,\r\n  });\r\n\r\n  const claimNFTs = () => {\r\n    let cost = CONFIG.WEI_COST;\r\n    let gasLimit = CONFIG.GAS_LIMIT;\r\n    let totalCostWei = String(cost * mintAmount);\r\n    let totalGasLimit = String(gasLimit * mintAmount);\r\n    console.log(\"Cost: \", totalCostWei);\r\n    console.log(\"Gas limit: \", totalGasLimit);\r\n    setFeedback(`Minting your ${CONFIG.NFT_NAME}...`);\r\n    setClaimingNft(true);\r\n    blockchain.smartContract.methods\r\n      .mint(mintAmount)\r\n      .send({\r\n        gasLimit: String(totalGasLimit),\r\n        to: CONFIG.CONTRACT_ADDRESS,\r\n        from: blockchain.account,\r\n        value: totalCostWei,\r\n      })\r\n      .once(\"error\", (err) => {\r\n        console.log(err);\r\n        setFeedback(\"Sorry, something went wrong please try again later.\");\r\n        setClaimingNft(false);\r\n      })\r\n      .then((receipt) => {\r\n        console.log(receipt);\r\n        setFeedback(\r\n          `WOW, the ${CONFIG.NFT_NAME} is yours! go visit Opensea.io to view it.`\r\n        );\r\n        setClaimingNft(false);\r\n        dispatch(fetchData(blockchain.account));\r\n      });\r\n  };\r\n  const getData = () => {\r\n    if (blockchain.account !== \"\" && blockchain.smartContract !== null) {\r\n      dispatch(fetchData(blockchain.account));\r\n    }\r\n  };\r\n\r\n  const getConfig = async () => {\r\n    const configResponse = await fetch(\"/config/config.json\", {\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Accept: \"application/json\",\r\n      },\r\n    });\r\n    const config = await configResponse.json();\r\n    SET_CONFIG(config);\r\n  };\r\n\r\n  useEffect(() => {\r\n    getConfig();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    getData();\r\n  }, [blockchain.account]);\r\n\r\n      return (\r\n        <>\r\n        <form class=\"form\" onSubmit={claimNFTs()}>\r\n        <label class=\"label-mint\"> \r\n             NFT's left to mint:\r\n             <p class=\"p-welcomeMint\">{data.totalSupply} / {CONFIG.MAX_SUPPLY}</p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n        </label>\r\n          <label class=\"form-label\">\r\n            Mint Amount:\r\n            <input\r\n              type=\"text\"\r\n              value={mintAmount}\r\n              onChange={e => setMintAmount(e.target.value)}\r\n            />\r\n          </label>\r\n          <input class=\"form-submit-button\" type=\"submit\" value=\"Mint\" />\r\n          \r\n        </form>\r\n        </>\r\n    \r\n      );\r\n}\r\n\r\n\r\n\r\nexport default Mint;"],"mappings":"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"},"metadata":{},"sourceType":"module"}