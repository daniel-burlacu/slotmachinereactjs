{"ast":null,"code":"/*\nCopyright (c) 2020 Uber Technologies, Inc.\n\nThis source code is licensed under the MIT license found in the\nLICENSE file in the root directory of this source tree.\n*/\nimport * as React from 'react';\nimport SimpleEditor from 'react-simple-code-editor';\nimport Highlight, { Prism } from 'prism-react-renderer';\nimport { useValueDebounce, lightTheme } from '../index';\nimport { getStyles } from '../utils';\n\nconst highlightCode = _ref => {\n  let {\n    code,\n    theme,\n    transformToken,\n    language\n  } = _ref;\n  return React.createElement(Highlight, {\n    Prism: Prism,\n    code: code,\n    theme: theme,\n    language: language || 'jsx'\n  }, _ref2 => {\n    let {\n      tokens,\n      getLineProps,\n      getTokenProps\n    } = _ref2;\n    return React.createElement(React.Fragment, null, tokens.map((line, i) => React.createElement(\"div\", Object.assign({\n      key: i\n    }, getLineProps({\n      line,\n      key: i\n    })), line.map((token, key) => {\n      const tokenProps = getTokenProps({\n        token,\n        key\n      });\n\n      if (transformToken) {\n        return transformToken(tokenProps);\n      }\n\n      return React.createElement(\"span\", Object.assign({\n        key: key\n      }, tokenProps));\n    }))));\n  });\n};\n\nconst Editor = _ref3 => {\n  let {\n    code: globalCode,\n    transformToken,\n    onChange,\n    placeholder,\n    language,\n    theme,\n    ['data-testid']: testid,\n    className\n  } = _ref3;\n  const [focused, setFocused] = React.useState(false);\n  const editorTheme = Object.assign(Object.assign({}, theme || lightTheme), {\n    plain: Object.assign({\n      whiteSpace: 'break-spaces'\n    }, (theme || lightTheme).plain)\n  });\n  const [code, setCode] = useValueDebounce(globalCode, onChange);\n  return React.createElement(\"div\", Object.assign({\n    \"data-testid\": testid\n  }, getStyles({\n    boxSizing: 'border-box',\n    paddingLeft: '4px',\n    paddingRight: '4px',\n    maxWidth: 'auto',\n    overflow: 'hidden',\n    border: focused ? '1px solid #276EF1' : '1px solid #CCC',\n    borderRadius: '5px'\n  }, className)), React.createElement(\"style\", {\n    dangerouslySetInnerHTML: {\n      __html: `.npm__react-simple-code-editor__textarea { outline: none !important }`\n    }\n  }), React.createElement(SimpleEditor, {\n    value: code || '',\n    placeholder: placeholder,\n    highlight: code => highlightCode({\n      code,\n      theme: editorTheme,\n      transformToken,\n      language\n    }),\n    onValueChange: code => setCode(code),\n    onFocus: () => setFocused(true),\n    onBlur: () => setFocused(false),\n    padding: 8,\n    style: editorTheme.plain\n  }));\n};\n\nexport default Editor;","map":{"version":3,"mappings":"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","names":["React","SimpleEditor","Highlight","Prism","useValueDebounce","lightTheme","getStyles","highlightCode","code","theme","transformToken","language","tokens","getLineProps","getTokenProps","Fragment","map","line","i","key","token","tokenProps","Editor","globalCode","onChange","placeholder","testid","className","focused","setFocused","useState","editorTheme","plain","whiteSpace","setCode","boxSizing","paddingLeft","paddingRight","maxWidth","overflow","border","borderRadius","dangerouslySetInnerHTML","__html","value","highlight","onValueChange","onFocus","onBlur","padding","style"],"sources":["../../../src/ui/editor.tsx"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}