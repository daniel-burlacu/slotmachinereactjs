{"ast":null,"code":"import { jsx as e } from \"react/jsx-runtime\";\nimport { createContext as t, useRef as r, useContext as n } from \"react\";\nimport { config as i, useSpring as c, animated as o } from \"react-spring\";\nimport { useDrag as u } from \"@use-gesture/react\";\nimport { u as s, a as l, b as a, c as f, d } from \"./useThumbsModule-0944decf.js\";\nimport \"rxjs\";\nimport \"screenfull\";\nconst h = t(void 0),\n      g = Object.assign(Object.assign({}, i.default), {\n  mass: 1,\n  velocity: 0\n});\n\nfunction m(_ref) {\n  let {\n    items: t,\n    withLoop: n = !1,\n    draggingSlideTreshold: m,\n    springConfig: v = i.default,\n    shouldResizeOnWindowResize: p = !0,\n    withThumbs: y = !1,\n    enableThumbsWrapperScroll: b = !0,\n    slideWhenThresholdIsReached: x = !0,\n    carouselSlideAxis: w = \"x\",\n    thumbsSlideAxis: T = \"x\",\n    prepareThumbsData: O,\n    initialActiveItem: j = 0,\n    initialStartingPosition: I,\n    disableGestures: S = !1,\n    gutter: E = 0,\n    startEndGutter: A = 0,\n    touchAction: C,\n    slideAmount: R,\n    freeScroll: $ = !1,\n    enableFreeScrollDrag: W,\n    itemsPerSlide: L = 1,\n    slideType: M = \"fixed\"\n  } = _ref;\n\n  const F = r(!0),\n        N = r(\"initial\"),\n        P = n ? t.length === L ? [...t, ...t, ...t, ...t, ...t] : [...t, ...t, ...t] : t,\n        z = r(j),\n        D = r(null),\n        B = r(null),\n        k = r(!1),\n        q = r(!1),\n        G = r(!1),\n        V = r(0),\n        Y = r(!1),\n        H = r(0),\n        X = r(0),\n        J = r(0),\n        K = r(t),\n        Q = r(null != m ? m : 0),\n        U = r(L),\n        Z = r(E),\n        _ = r(A),\n        ee = r(j),\n        te = r(I),\n        re = r(w);\n\n  U.current = L, Z.current = E, _.current = A, ee.current = j, te.current = I, re.current = w;\n  const [ne, ie] = c(() => ({\n    y: 0,\n    x: 0,\n    onChange: _ref2 => {\n      let {\n        value: e\n      } = _ref2;\n      D.current && $ && (D.current[\"x\" === re.current ? \"scrollLeft\" : \"scrollTop\"] = Math.abs(e[re.current]));\n    }\n  }));\n\n  function ce() {\n    const e = null === (t = B.current) || void 0 === t ? void 0 : t.querySelector(\".use-spring-carousel-item\");\n    var t;\n    if (!e) throw Error(\"No carousel items available!\");\n    return e.getBoundingClientRect()[\"x\" === re.current ? \"width\" : \"height\"] + Z.current;\n  }\n\n  function oe() {\n    return ne[re.current].get();\n  }\n\n  function ue() {\n    return ce() * t.length < function () {\n      if (!D.current) throw new Error(\"mainCarouselWrapperRef is not available\");\n      return D.current.getBoundingClientRect()[\"x\" === re.current ? \"width\" : \"height\"];\n    }();\n  }\n\n  function se() {\n    var e;\n    return Math.round(Number(null === (e = B.current) || void 0 === e ? void 0 : e[\"x\" === re.current ? \"scrollWidth\" : \"scrollHeight\"]) - B.current.getBoundingClientRect()[\"x\" === re.current ? \"width\" : \"height\"]);\n  }\n\n  function le() {\n    return 0 === Ee();\n  }\n\n  function ae() {\n    if (!B.current) return 0;\n    const e = ce();\n\n    if (\"fluid\" === M && \"number\" == typeof R) {\n      if (R < e) throw new Error(\"slideAmount must be greater than the width of a single item.\");\n      return R;\n    }\n\n    return e;\n  }\n\n  function fe(e, r) {\n    const i = \"x\" === re.current ? \"left\" : \"top\";\n\n    function c() {\n      return ce() * t.length;\n    }\n\n    function o(t) {\n      n ? (e.style.top = \"0px\", e.style[i] = `-${t - _.current}px`) : (e.style.left = \"0px\", e.style.top = \"0px\", r && F.current && (e.style[i] = `calc(-${r} * 100%)`));\n    }\n\n    function u() {\n      o(c());\n    }\n\n    if (\"fixed\" === M) {\n      if (U.current > 1) switch (te.current) {\n        default:\n        case \"start\":\n          u();\n          break;\n\n        case \"center\":\n          s = U.current, o(c() - ae() * Math.round((s - 1) / 2));\n          break;\n\n        case \"end\":\n          !function (e) {\n            o(c() - ae() * Math.round(e - 1));\n          }(U.current);\n      } else u();\n    } else u();\n\n    var s;\n  }\n\n  function de() {\n    if (H.current = window.innerWidth, \"fluid\" === M) {\n      if (ue()) return void ie.start({\n        immediate: !0,\n        [re.current]: 0\n      });\n\n      if (V.current = se(), Y.current) {\n        const e = -V.current;\n        ie.start({\n          immediate: !0,\n          [re.current]: e\n        });\n      }\n\n      X.current = window.innerWidth;\n    } else ie.start({\n      immediate: !0,\n      [re.current]: -ae() * Ee()\n    });\n\n    V.current = se(), fe(B.current);\n  }\n\n  function he() {\n    window.innerWidth === H.current || $ || de();\n  }\n\n  s(() => {\n    Q.current = m || Math.floor(ae() / 2 / 2), de();\n  }, [m, L, E, A, j, I, w, T]);\n  const {\n    useListenToCustomEvent: ge,\n    emitObservable: me\n  } = l(),\n        {\n    enterFullscreen: ve,\n    exitFullscreen: pe,\n    getIsFullscreen: ye\n  } = a({\n    mainCarouselWrapperRef: D,\n    emitObservable: me,\n    handleResize: he\n  }),\n        {\n    thumbsFragment: be,\n    handleThumbsScroll: xe\n  } = f({\n    withThumbs: y,\n    items: t,\n    thumbsSlideAxis: T,\n    springConfig: v,\n    prepareThumbsData: O,\n    slideType: M,\n    getFluidWrapperScrollValue: se,\n    getSlideValue: ae\n  });\n\n  function we() {\n    if (!D.current) throw new Error(\"Missing mainCarouselWrapperRef.current\");\n    return D.current[\"x\" === re.current ? \"scrollLeft\" : \"scrollTop\"];\n  }\n\n  function Te() {\n    return \"boolean\" == typeof W ? W : \"function\" == typeof W && W();\n  }\n\n  const Oe = u(e => {\n    const t = e.dragging,\n          r = e.offset[\"x\" === re.current ? 0 : 1],\n          i = e.movement[\"x\" === re.current ? 0 : 1],\n          c = i > Q.current,\n          o = i < -Q.current,\n          u = e.direction[\"x\" === re.current ? 0 : 1];\n\n    function s() {\n      e.cancel();\n    }\n\n    function l() {\n      je(u > 0 ? \"prev\" : \"next\");\n    }\n\n    function a() {\n      me(Object.assign({\n        eventName: \"onDrag\",\n        slideActionType: Ie()\n      }, e));\n    }\n\n    function f() {\n      \"fluid\" === M ? ue() || le() && \"prev\" === Ie() ? ie.start({\n        [re.current]: 0,\n        config: Object.assign({\n          velocity: e.velocity\n        }, v)\n      }) : Y.current && \"next\" === Ie() ? ie.start({\n        [re.current]: -V.current,\n        config: Object.assign({\n          velocity: e.velocity\n        }, v)\n      }) : ie.start({\n        [re.current]: J.current,\n        config: Object.assign({\n          velocity: e.velocity\n        }, v)\n      }) : ie.start({\n        [re.current]: -Ee() * ae(),\n        config: Object.assign({\n          velocity: e.velocity\n        }, v)\n      });\n    }\n\n    function d() {\n      Math.abs(oe()) + 100 >= V.current && \"next\" === Ie() && (Y.current = !0), \"prev\" === Ie() && (Y.current = !1);\n    }\n\n    if ($ && Te()) return t && (Re() || Ce(!0), l(), a(), d()), ie.start({\n      from: {\n        [re.current]: we()\n      },\n      to: {\n        [re.current]: -r\n      },\n      config: {\n        velocity: e.velocity,\n        friction: 50,\n        tension: 1400\n      }\n    }), 0 === we() && \"prev\" === Ie() ? void s() : void (e.last && (\"prev\" === Ie() ? Pe(e.velocity) : ze(e.velocity), Ce(!1)));\n\n    if (t) {\n      if (Re() || Ce(!0), a(), l(), d(), $) {\n        if (Te()) {\n          if (0 === we() && \"prev\" === Ie()) return void s();\n          ie.start({\n            config: {\n              velocity: e.velocity,\n              friction: 50,\n              tension: 1400\n            },\n            from: {\n              [re.current]: we()\n            },\n            to: {\n              [re.current]: -r\n            }\n          });\n        }\n\n        return;\n      }\n\n      if (ie.start({\n        [re.current]: r,\n        config: {\n          velocity: e.velocity,\n          friction: 50,\n          tension: 1e3\n        }\n      }), (c || o) && ue() && \"fluid\" === M) s(), f();else if (Y.current && \"next\" === Ie() && o) Y.current = !1, s(), ie.start({\n        [re.current]: -V.current\n      });else if (x) {\n        if (o) return s(), void (!n && Ne() ? f() : ze(e.velocity));\n        if (c) return s(), void (!n && le() ? f() : Pe(e.velocity));\n      }\n    }\n\n    if (e.last && !x && (o || c) && !$) return Ce(!1), void (o ? !n && Ne() ? f() : ze(e.velocity) : c && (!n && le() ? f() : Pe(e.velocity)));\n    !e.last || o || c || $ || (f(), me(Object.assign({\n      eventName: \"onDrag\",\n      slideActionType: Ie()\n    }, e)));\n  }, {\n    enabled: !S,\n    axis: re.current,\n    from: () => $ ? \"x\" === re.current ? [-we(), 0] : [0, -we()] : [ne.x.get(), ne.y.get()]\n  });\n\n  function je(e) {\n    N.current = e;\n  }\n\n  function Ie() {\n    return N.current;\n  }\n\n  function Se(e) {\n    z.current = e;\n  }\n\n  function Ee() {\n    return z.current;\n  }\n\n  function Ae(e) {\n    q.current = e;\n  }\n\n  function Ce(e) {\n    k.current = e;\n  }\n\n  function Re() {\n    return k.current;\n  }\n\n  function $e() {\n    const e = Ee();\n    return 0 === e ? t.length - 1 : e - 1;\n  }\n\n  function We() {\n    const e = Ee();\n    return e === t.length - 1 ? 0 : e + 1;\n  }\n\n  function Le(e) {\n    return t.findIndex(t => t.id === e);\n  }\n\n  function Me(e, t) {\n    if (\"number\" == typeof e) return {\n      [re.current]: e\n    };\n    if (\"number\" != typeof t) throw new Error(\"to values is not a number!\");\n    return {\n      [re.current]: -ae() * t\n    };\n  }\n\n  function Fe(_ref3) {\n    let {\n      from: e,\n      to: r = -1,\n      customTo: n,\n      immediate: i = !1,\n      onRest: c = () => {},\n      velocity: o\n    } = _ref3;\n    i || (Se(r), Ae(!0), me({\n      eventName: \"onSlideStartChange\",\n      slideActionType: Ie(),\n      nextItem: {\n        index: \"fluid\" === M ? -1 : r,\n        id: \"fluid\" === M ? \"\" : t[r].id\n      }\n    })), J.current = Me(n, r)[w], ie.start(Object.assign(Object.assign(Object.assign(Object.assign({}, function (e) {\n      return \"number\" == typeof e ? {\n        from: {\n          [re.current]: e\n        }\n      } : {};\n    }(e)), {\n      to: Me(n, r)\n    }), o ? {\n      config: Object.assign(Object.assign({}, g), {\n        velocity: o,\n        friction: void 0,\n        tension: void 0\n      })\n    } : {\n      config: Object.assign({\n        velocity: 0\n      }, v)\n    }), {\n      immediate: i,\n      onRest: e => {\n        e.finished && (Ce(!1), Ae(!1), c(), i || me({\n          eventName: \"onSlideChange\",\n          slideActionType: Ie(),\n          currentItem: {\n            index: \"fluid\" === M ? -1 : Ee(),\n            id: \"fluid\" === M ? \"\" : t[Ee()].id\n          }\n        }));\n      }\n    })), b && y && !i && xe(r, Ie());\n  }\n\n  function Ne() {\n    return Ee() === t.length - 1;\n  }\n\n  function Pe(e) {\n    if (je(\"prev\"), Y.current = !1, \"fluid\" === M) {\n      if (Y.current = !1, ue()) return;\n      const r = oe() + ae() + 200;\n\n      if ($) {\n        const t = D.current.scrollLeft - ae();\n        Fe({\n          customTo: t < 0 ? 0 : t,\n          from: D.current.scrollLeft,\n          velocity: e\n        });\n      } else Fe(r >= 0 ? n ? {\n        from: oe() - ce() * t.length,\n        velocity: e,\n        customTo: oe() - ce() * t.length + ae()\n      } : {\n        customTo: 0,\n        velocity: e\n      } : {\n        customTo: oe() + ae(),\n        velocity: e\n      });\n    } else {\n      if (!n && 0 === Ee() || G.current) return;\n      le() ? Fe({\n        from: oe() - ae() * t.length,\n        to: t.length - 1,\n        velocity: e\n      }) : Fe({\n        to: $e(),\n        velocity: e\n      });\n    }\n  }\n\n  function ze(e) {\n    if (je(\"next\"), \"fluid\" === M) {\n      if (ue()) return;\n      const r = Math.abs(oe() - ae()) + 100 >= V.current;\n\n      if ($) {\n        const t = D.current.scrollLeft + ae() > V.current,\n              r = D.current.scrollLeft + ae();\n        Fe({\n          velocity: e,\n          customTo: t ? V.current : r,\n          from: D.current.scrollLeft\n        });\n      } else if (n && Math.abs(oe() - ae()) >= t.length * ce()) {\n        const r = ce() * t.length;\n        Fe({\n          from: oe() + r,\n          customTo: oe() + r - ae(),\n          velocity: e\n        });\n      } else {\n        if (Y.current) return;\n        r ? (Y.current = !0, Fe({\n          customTo: -V.current,\n          velocity: e\n        })) : Fe({\n          customTo: oe() - ae(),\n          velocity: e\n        });\n      }\n    } else {\n      if (!n && Ee() === P.length - 1 || G.current) return;\n      Math.abs(oe() - ae() + 25) > V.current && !Re() ? Y.current = !0 : Y.current ? Fe({\n        to: t.length - U.current,\n        velocity: e\n      }) : Ne() ? Fe({\n        from: oe() + ae() * t.length,\n        to: 0,\n        velocity: e\n      }) : Fe({\n        to: We(),\n        velocity: e\n      });\n    }\n  }\n\n  function De(e) {\n    let r = 0;\n    if (r = \"string\" == typeof e ? t.findIndex(t => t.id === e) : e, r >= t.length) throw Error(\"The item you want to slide to doesn't exist. This could be due to the fact that \\n        you provide a wrong id or a higher numeric index.\");\n    if (r === Ee() || t.length !== K.current.length && Ee() < t.length) return;\n    const n = Le(K.current[Ee()].id);\n    je(Le(t[r].id) > n ? \"next\" : \"prev\"), Fe({\n      to: r\n    });\n  }\n\n  d(() => {\n    if (L % 2 == 0 && te.current) throw new Error(\"initialStartingPosition can be only used if itemsPerSlide is an even value.\");\n    if (Q.current < 0) throw new Error(\"draggingSlideTreshold must be greater than 0\");\n    if (Q.current > ae() / 2) throw new Error(`draggingSlideTreshold must be equal or less than the half of the width of an item, which is ${Math.floor(ae() / 2)}`);\n    if (U.current < 1) throw new Error(\"The itemsPerSlide prop can't be less than 1.\");\n    if (U.current > t.length) throw new Error(\"The itemsPerSlide prop can't be greater than the total length of the items you provide.\");\n    if (ee.current < 0) throw new Error(\"The initialActiveItem cannot be less than 0.\");\n    if (ee.current > t.length) throw new Error(\"The initialActiveItem cannot be greater than the total length of the items you provide.\");\n    p || console.warn(\"You set shouldResizeOnWindowResize={false}; be aware that the carousel could behave in a strange way if you also use the fullscreen functionality or if you change the mobile orientation.\");\n  }), d(() => {\n    function e() {\n      document.hidden ? G.current = !0 : G.current = !1;\n    }\n\n    return document.addEventListener(\"visibilitychange\", e), () => {\n      document.removeEventListener(\"visibilitychange\", e);\n    };\n  }), d(() => {\n    F.current = !1, V.current = se(), X.current = window.innerWidth, H.current = window.innerWidth, j > 0 && (Fe({\n      to: j,\n      immediate: !0\n    }), Se(j), !n && B.current && (B.current.style.top = \"0px\", B.current.style.left = \"0px\"));\n  }), s(() => {\n    j < t.length && j !== z.current && (Fe({\n      to: j,\n      immediate: !0\n    }), Se(j));\n  }, [j]), s(() => {\n    if (p) return window.addEventListener(\"resize\", he), () => {\n      window.removeEventListener(\"resize\", he);\n    };\n  }, [p]), s(() => {\n    B.current && (\"x\" === re.current && (B.current.style.top = \"0px\"), \"y\" === re.current && (B.current.style.left = \"0px\"));\n  }, [w]), s(() => {\n    V.current = se();\n    !(t.length === K.current.length) && t.length < K.current.length && De(t.length - 1), K.current = t;\n  }, [se, t]);\n  const Be = Object.assign({\n    useListenToCustomEvent: ge,\n    getIsFullscreen: ye,\n    enterFullscreen: ve,\n    exitFullscreen: pe,\n    getIsAnimating: function () {\n      return q.current;\n    },\n    getIsDragging: Re,\n    getIsNextItem: function (e) {\n      const r = Le(e),\n            i = Ee();\n      return n && i === t.length - 1 ? 0 === r : r === i + 1;\n    },\n    getIsPrevItem: function (e) {\n      const r = Le(e),\n            i = Ee();\n      return n && 0 === i ? r === t.length - 1 : r === i - 1;\n    },\n\n    slideToPrevItem() {\n      Pe();\n    },\n\n    slideToNextItem() {\n      ze();\n    }\n\n  }, \"fixed\" === M ? {\n    slideToItem: De,\n    getIsActiveItem: e => Le(e) === Ee(),\n    getCurrentActiveItem: () => ({\n      id: t[Ee()].id,\n      index: Ee()\n    })\n  } : {});\n  const ke = e(h.Provider, Object.assign({\n    value: Be\n  }, {\n    children: e(\"div\", Object.assign({\n      ref: D,\n      className: \"use-spring-carousel-main-wrapper\",\n      \"data-testid\": \"use-spring-carousel-wrapper\"\n    }, $ ? {\n      onWheel() {\n        ne[re.current].stop();\n      }\n\n    } : {}, {\n      style: Object.assign({\n        display: \"flex\",\n        position: \"relative\",\n        width: \"100%\",\n        height: \"100%\"\n      }, $ ? \"x\" === re.current ? {\n        overflowX: \"auto\"\n      } : {\n        overflowY: \"auto\"\n      } : {})\n    }, {\n      children: e(o.div, Object.assign({}, Oe(), {\n        className: \"use-spring-carousel-track-wrapper\",\n        \"data-testid\": \"use-spring-carousel-animated-wrapper\",\n        ref: e => {\n          e && (B.current = e, fe(e, ee.current));\n        },\n        style: Object.assign(Object.assign(Object.assign({\n          display: \"flex\",\n          position: \"relative\",\n          touchAction: S ? \"unset\" : C || (\"x\" === re.current ? \"pan-y\" : \"pan-x\"),\n          flexDirection: \"x\" === re.current ? \"row\" : \"column\"\n        }, function () {\n          const e = `calc(100% - ${2 * _.current}px)`;\n          return {\n            width: \"x\" === re.current ? e : \"100%\",\n            height: \"y\" === re.current ? e : \"100%\"\n          };\n        }()), function () {\n          const e = t.length / L * 100,\n                r = 100 / L,\n                n = \"x\" === re.current ? \"left\" : \"y\",\n                i = Math.floor(50 / r);\n\n          if (\"fixed\" === M) {\n            if (\"center\" === te.current) return {\n              [n]: `calc(-${e}% + ${r * i}%)`\n            };\n            if (\"end\" === te.current) return {\n              [n]: `calc(-${e}% + ${r * (2 * i)}%)`\n            };\n          }\n\n          return {\n            [n]: \"0px\"\n          };\n        }()), $ ? {} : ne)\n      }, {\n        children: P.map((_ref4, n) => {\n          let {\n            id: t,\n            renderItem: r\n          } = _ref4;\n          return e(\"div\", Object.assign({\n            className: \"use-spring-carousel-item\",\n            \"data-testid\": \"use-spring-carousel-item-wrapper\",\n            style: Object.assign({\n              display: \"flex\",\n              position: \"relative\"\n            }, (i = U.current, \"fixed\" === M ? Object.assign(Object.assign({}, \"x\" === re.current ? {\n              marginRight: `${Z.current}px`\n            } : {\n              marginBottom: `${Z.current}px`\n            }), {\n              flex: `1 0 calc(100% / ${i} - ${Z.current * (i - 1) / i}px)`\n            }) : Object.assign({}, \"x\" === re.current ? {\n              marginRight: `${Z.current}px`\n            } : {\n              marginBottom: `${Z.current}px`\n            })))\n          }, {\n            children: r\n          }), `${t}-${n}`);\n          var i;\n        })\n      }))\n    }))\n  })),\n        qe = e(h.Provider, Object.assign({\n    value: Be\n  }, {\n    children: be\n  }));\n  return Object.assign(Object.assign({}, Be), {\n    carouselFragment: ke,\n    thumbsFragment: qe\n  });\n}\n\nfunction v() {\n  const e = n(h);\n  if (!e) throw new Error(\"useSpringCarouselContext must be used only inside a component that is rendered inside the Carousel.\");\n  return e;\n}\n\nexport { m as useSpringCarousel, v as useSpringCarouselContext };","map":{"version":3,"mappings":"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","names":["Context","createContext","undefined","defaultDragSpringConfig","config","default","mass","velocity","useSpringCarousel","items","withLoop","draggingSlideTreshold","springConfig","shouldResizeOnWindowResize","withThumbs","enableThumbsWrapperScroll","slideWhenThresholdIsReached","carouselSlideAxis","thumbsSlideAxis","prepareThumbsData","initialActiveItem","initialStartingPosition","disableGestures","gutter","startEndGutter","touchAction","slideAmount","freeScroll","enableFreeScrollDrag","itemsPerSlide","slideType","isFirstMount","useRef","slideActionType","internalItems","length","activeItem","mainCarouselWrapperRef","carouselTrackWrapperRef","isDragging","isAnimating","windowIsHidden","fluidTotalWrapperScrollValue","slideEndReached","currentWindowWidth","initialWindowWidth","prevSlidedValue","prevItems","draggingSlideTresholdRef","itemsPerSlideRef","gutterRef","startEndGutterRef","initialActiveItemRef","initialStartingPositionRef","carouselSlideAxisRef","current","carouselStyles","setCarouselStyles","useSpring","y","x","onChange","value","Math","abs","getCarouselItemWidth","carouselItem","querySelector","Error","getBoundingClientRect","getCurrentSlidedValue","get","getIfItemsNotFillTheCarousel","getMainCarouselWrapperWidth","getFluidWrapperScrollValue","round","Number","getIsFirstItem","getCurrentActiveItem","getSlideValue","itemVal","adjustCarouselWrapperPosition","ref","_initialActiveItem","positionProperty","getDefaultPositionValue","setPosition","v","style","top","left","setStartPosition","i","setEndPosition","resize","window","innerWidth","start","immediate","[object Object]","nextValue","handleResize","useIsomorphicLayoutEffect","floor","useListenToCustomEvent","emitObservable","useCustomEventsModule","enterFullscreen","exitFullscreen","getIsFullscreen","useFullscreenModule","thumbsFragment","_thumbsFragment","handleThumbsScroll","useThumbsModule","getWrapperScrollDirection","getIfShouldEnableFluidDrag","bindDrag","useDrag","props","dragging","movement","offset","currentMovement","prevItemTreshold","nextItemTreshold","direction","cancelDrag","cancel","setDragDirection","setSlideActionType","emitDragObservable","eventName","getSlideActionType","resetAnimation","checkBounds","getIsDragging","setIsDragging","from","to","friction","tension","last","slideToPrevItem","slideToNextItem","getIsLastItem","enabled","axis","type","setActiveItem","newItem","setIsAnimating","val","getPrevItem","currentActiveItem","getNextItem","findItemIndex","id","findIndex","item","getToValue","customTo","slideToItem","onRest","nextItem","index","getFromValue","finished","currentItem","nextPrevValue","scrollLeft","nextItemWillExceed","willExceed","currentWidth","_slideToItem","itemIndex","_item","useIsomorphicMount","console","warn","handleVisibilityChange","document","hidden","addEventListener","removeEventListener","contextProps","getIsAnimating","getIsNextItem","getIsPrevItem","getIsActiveItem","carouselFragment","_jsx","Provider","className","stop","display","position","width","height","overflowX","overflowY","children","animated","div","flexDirection","percentValue","getAnimatedWrapperStyles","totalValue","singleItemValue","cssProp","quantityToMove","getInitialStyles","map","renderItem","_itemsPerSlide","marginRight","marginBottom","flex","useSpringCarouselContext","context","useContext"],"sources":["F:\\Games\\slotmachinereact\\node_modules\\react-spring-carousel\\src\\useSpringCarousel\\index.tsx"],"sourcesContent":["import { useRef, createContext, useContext } from 'react'\nimport { useSpring, config, animated } from 'react-spring'\nimport { useDrag } from '@use-gesture/react'\nimport { useCustomEventsModule, useFullscreenModule, useThumbsModule } from '../modules'\nimport {\n  SlideToItemFnProps,\n  SlideActionType,\n  UseSpringFixedSlideTypeReturnProps,\n} from '../types'\nimport { useIsomorphicLayoutEffect, useIsomorphicMount } from '../utils'\nimport {\n  UseSpringCarouselProps,\n  ReactSpringCarouselItemWithThumbs,\n  UseSpringFluidSlideTypeReturnProps,\n  UseSpringCarouselBaseProps,\n  UseSpringCarouselWithThumbs,\n  UseSpringCarouselFluidType,\n  DisableGesturesProps,\n  WithLoopProps,\n  UseSpringCarouselWithNoThumbs,\n  EnableGesturesProps,\n  WithNoLoop,\n  UseSpringCarouselFixedSlideType,\n} from '../types/useSpringCarousel'\n\ntype ReturnType<T> = T extends 'fixed'\n  ? UseSpringFixedSlideTypeReturnProps\n  : UseSpringFluidSlideTypeReturnProps\ntype ContextTypes<T> = Omit<ReturnType<T>, 'carouselFragment' | 'thumbsFragment'>\n\nconst Context = createContext<ContextTypes<'fixed' | 'fluid'> | undefined>(undefined)\n\nconst defaultDragSpringConfig = {\n  ...config.default,\n  mass: 1,\n  velocity: 0,\n}\n\nfunction useSpringCarousel(\n  props: UseSpringCarouselBaseProps &\n    UseSpringCarouselFluidType &\n    (UseSpringCarouselWithThumbs | UseSpringCarouselWithNoThumbs) &\n    (DisableGesturesProps | EnableGesturesProps) &\n    (WithLoopProps | WithNoLoop),\n): ReturnType<'fluid'>\nfunction useSpringCarousel(\n  props: UseSpringCarouselBaseProps &\n    UseSpringCarouselFixedSlideType &\n    (UseSpringCarouselWithThumbs | UseSpringCarouselWithNoThumbs) &\n    (DisableGesturesProps | EnableGesturesProps) &\n    (WithLoopProps | WithNoLoop),\n): ReturnType<'fixed'>\n\nfunction useSpringCarousel({\n  items,\n  withLoop = false,\n  draggingSlideTreshold,\n  springConfig = config.default,\n  shouldResizeOnWindowResize = true,\n  withThumbs = false,\n  enableThumbsWrapperScroll = true,\n  slideWhenThresholdIsReached = true,\n  carouselSlideAxis = 'x',\n  thumbsSlideAxis = 'x',\n  prepareThumbsData,\n  initialActiveItem = 0,\n  initialStartingPosition,\n  disableGestures = false,\n  gutter = 0,\n  startEndGutter = 0,\n  touchAction,\n  slideAmount,\n  freeScroll = false,\n  enableFreeScrollDrag,\n  itemsPerSlide = 1,\n  slideType = 'fixed',\n}: UseSpringCarouselProps): ReturnType<'fixed' | 'fluid'> {\n  function getItems() {\n    if (withLoop) {\n      if (items.length === itemsPerSlide) {\n        return [...items, ...items, ...items, ...items, ...items]\n      }\n      return [...items, ...items, ...items]\n    }\n    return items\n  }\n\n  const isFirstMount = useRef(true)\n  const slideActionType = useRef<SlideActionType>('initial' as SlideActionType)\n  const internalItems = getItems()\n  const activeItem = useRef(initialActiveItem)\n  const mainCarouselWrapperRef = useRef<HTMLDivElement | null>(null)\n  const carouselTrackWrapperRef = useRef<HTMLDivElement | null>(null)\n  const isDragging = useRef(false)\n  const isAnimating = useRef(false)\n  const windowIsHidden = useRef(false)\n  const fluidTotalWrapperScrollValue = useRef(0)\n  const slideEndReached = useRef(false)\n  const currentWindowWidth = useRef(0)\n  const initialWindowWidth = useRef(0)\n  const prevSlidedValue = useRef(0)\n  const prevItems = useRef(items)\n\n  /**\n   * Instead of raw values, we store it in\n   * useRef for performances reasons during external rerenders\n   */\n  const draggingSlideTresholdRef = useRef<number>(draggingSlideTreshold ?? 0)\n  const itemsPerSlideRef = useRef(itemsPerSlide)\n  const gutterRef = useRef(gutter)\n  const startEndGutterRef = useRef(startEndGutter)\n  const initialActiveItemRef = useRef(initialActiveItem)\n  const initialStartingPositionRef = useRef(initialStartingPosition)\n  const carouselSlideAxisRef = useRef(carouselSlideAxis)\n\n  /**\n   * Update inner values during external rerenders!\n   */\n  itemsPerSlideRef.current = itemsPerSlide\n  gutterRef.current = gutter\n  startEndGutterRef.current = startEndGutter\n  initialActiveItemRef.current = initialActiveItem\n  initialStartingPositionRef.current = initialStartingPosition\n  carouselSlideAxisRef.current = carouselSlideAxis\n\n  const [carouselStyles, setCarouselStyles] = useSpring(() => ({\n    y: 0,\n    x: 0,\n    onChange: ({ value }) => {\n      if (mainCarouselWrapperRef.current && freeScroll) {\n        mainCarouselWrapperRef.current[\n          carouselSlideAxisRef.current === 'x' ? 'scrollLeft' : 'scrollTop'\n        ] = Math.abs(value[carouselSlideAxisRef.current])\n      }\n    },\n  }))\n\n  useIsomorphicLayoutEffect(() => {\n    if (draggingSlideTreshold) {\n      draggingSlideTresholdRef.current = draggingSlideTreshold\n    } else {\n      draggingSlideTresholdRef.current = Math.floor(getSlideValue() / 2 / 2)\n    }\n\n    resize()\n  }, [\n    draggingSlideTreshold,\n    itemsPerSlide,\n    gutter,\n    startEndGutter,\n    initialActiveItem,\n    initialStartingPosition,\n    carouselSlideAxis,\n    thumbsSlideAxis,\n  ])\n\n  function getCarouselItem() {\n    return carouselTrackWrapperRef.current?.querySelector('.use-spring-carousel-item')\n  }\n  function getMainCarouselWrapperWidth() {\n    if (!mainCarouselWrapperRef.current) {\n      throw new Error('mainCarouselWrapperRef is not available')\n    }\n    return mainCarouselWrapperRef.current.getBoundingClientRect()[\n      carouselSlideAxisRef.current === 'x' ? 'width' : 'height'\n    ]\n  }\n  function getCarouselItemWidth() {\n    const carouselItem = getCarouselItem()\n    if (!carouselItem) {\n      throw Error('No carousel items available!')\n    }\n    return (\n      carouselItem.getBoundingClientRect()[\n        carouselSlideAxisRef.current === 'x' ? 'width' : 'height'\n      ] + gutterRef.current\n    )\n  }\n  function getCurrentSlidedValue() {\n    return carouselStyles[carouselSlideAxisRef.current].get()\n  }\n  function getIfItemsNotFillTheCarousel() {\n    return getCarouselItemWidth() * items.length < getMainCarouselWrapperWidth()\n  }\n  function getFluidWrapperScrollValue() {\n    return Math.round(\n      Number(\n        carouselTrackWrapperRef.current?.[\n          carouselSlideAxisRef.current === 'x' ? 'scrollWidth' : 'scrollHeight'\n        ],\n      ) -\n        carouselTrackWrapperRef.current!.getBoundingClientRect()[\n          carouselSlideAxisRef.current === 'x' ? 'width' : 'height'\n        ],\n    )\n  }\n  function getIsFirstItem() {\n    return getCurrentActiveItem() === 0\n  }\n  function getSlideValue() {\n    if (!carouselTrackWrapperRef.current) {\n      return 0\n    }\n    const itemVal = getCarouselItemWidth()\n\n    if (slideType === 'fluid' && typeof slideAmount === 'number') {\n      if (slideAmount < itemVal) {\n        throw new Error('slideAmount must be greater than the width of a single item.')\n      }\n      return slideAmount\n    }\n    return itemVal\n  }\n  function adjustCarouselWrapperPosition(\n    ref: HTMLDivElement,\n    _initialActiveItem?: number,\n  ) {\n    const positionProperty = carouselSlideAxisRef.current === 'x' ? 'left' : 'top'\n    function getDefaultPositionValue() {\n      return getCarouselItemWidth() * items.length\n    }\n    function setPosition(v: number) {\n      if (withLoop) {\n        ref.style.top = '0px'\n        ref.style[positionProperty] = `-${v - startEndGutterRef.current}px`\n      } else {\n        ref.style.left = '0px'\n        ref.style.top = '0px'\n        if (_initialActiveItem && isFirstMount.current) {\n          ref.style[positionProperty] = `calc(-${_initialActiveItem} * 100%)`\n        }\n      }\n    }\n    function setStartPosition() {\n      setPosition(getDefaultPositionValue())\n    }\n\n    if (slideType === 'fixed') {\n      function setCenterPosition(i: number) {\n        setPosition(\n          getDefaultPositionValue() -\n            getSlideValue() * Math.round(((i as number) - 1) / 2),\n        )\n      }\n      function setEndPosition(i: number) {\n        setPosition(\n          getDefaultPositionValue() - getSlideValue() * Math.round((i as number) - 1),\n        )\n      }\n\n      if (itemsPerSlideRef.current > 1) {\n        switch (initialStartingPositionRef.current) {\n          default:\n          case 'start': {\n            setStartPosition()\n            break\n          }\n          case 'center': {\n            setCenterPosition(itemsPerSlideRef.current)\n            break\n          }\n          case 'end': {\n            setEndPosition(itemsPerSlideRef.current)\n            break\n          }\n        }\n      } else {\n        setStartPosition()\n      }\n    } else {\n      setStartPosition()\n    }\n  }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  function resize() {\n    currentWindowWidth.current = window.innerWidth\n\n    if (slideType === 'fluid') {\n      if (getIfItemsNotFillTheCarousel()) {\n        setCarouselStyles.start({\n          immediate: true,\n          [carouselSlideAxisRef.current]: 0,\n        })\n        return\n      }\n      fluidTotalWrapperScrollValue.current = getFluidWrapperScrollValue()\n\n      if (slideEndReached.current) {\n        const nextValue = -fluidTotalWrapperScrollValue.current\n        setCarouselStyles.start({\n          immediate: true,\n          [carouselSlideAxisRef.current]: nextValue,\n        })\n      }\n\n      initialWindowWidth.current = window.innerWidth\n    } else {\n      setCarouselStyles.start({\n        immediate: true,\n        [carouselSlideAxisRef.current]: -(getSlideValue() * getCurrentActiveItem()),\n      })\n    }\n\n    fluidTotalWrapperScrollValue.current = getFluidWrapperScrollValue()\n    adjustCarouselWrapperPosition(carouselTrackWrapperRef.current!)\n  }\n  function handleResize() {\n    if (window.innerWidth === currentWindowWidth.current || freeScroll) {\n      return\n    }\n    resize()\n  }\n  // Custom modules\n  const { useListenToCustomEvent, emitObservable } = useCustomEventsModule<'use-spring'>()\n  const { enterFullscreen, exitFullscreen, getIsFullscreen } =\n    useFullscreenModule<'use-spring'>({\n      mainCarouselWrapperRef,\n      emitObservable,\n      handleResize,\n    })\n  const { thumbsFragment: _thumbsFragment, handleThumbsScroll } = useThumbsModule({\n    withThumbs,\n    items: items as ReactSpringCarouselItemWithThumbs[],\n    thumbsSlideAxis,\n    springConfig,\n    prepareThumbsData,\n    slideType,\n    getFluidWrapperScrollValue,\n    getSlideValue,\n  })\n\n  function getWrapperScrollDirection() {\n    if (!mainCarouselWrapperRef.current) {\n      throw new Error('Missing mainCarouselWrapperRef.current')\n    }\n    return mainCarouselWrapperRef.current[\n      carouselSlideAxisRef.current === 'x' ? 'scrollLeft' : 'scrollTop'\n    ]\n  }\n  function getIfShouldEnableFluidDrag() {\n    if (typeof enableFreeScrollDrag === 'boolean') {\n      return enableFreeScrollDrag\n    } else if (typeof enableFreeScrollDrag === 'function') {\n      return enableFreeScrollDrag()\n    }\n    return false\n  }\n\n  const bindDrag = useDrag(\n    props => {\n      const isDragging = props.dragging\n      const movement = props.offset[carouselSlideAxisRef.current === 'x' ? 0 : 1]\n      const currentMovement = props.movement[carouselSlideAxisRef.current === 'x' ? 0 : 1]\n      const prevItemTreshold = currentMovement > draggingSlideTresholdRef.current\n      const nextItemTreshold = currentMovement < -draggingSlideTresholdRef.current\n      const direction = props.direction[carouselSlideAxisRef.current === 'x' ? 0 : 1]\n      function cancelDrag() {\n        props.cancel()\n      }\n      function setDragDirection() {\n        if (direction > 0) {\n          setSlideActionType('prev')\n        } else {\n          setSlideActionType('next')\n        }\n      }\n      function emitDragObservable() {\n        emitObservable({\n          eventName: 'onDrag',\n          slideActionType: getSlideActionType(),\n          ...props,\n        })\n      }\n      function resetAnimation() {\n        if (slideType === 'fluid') {\n          if (\n            getIfItemsNotFillTheCarousel() ||\n            (getIsFirstItem() && getSlideActionType() === 'prev')\n          ) {\n            setCarouselStyles.start({\n              [carouselSlideAxisRef.current]: 0,\n              config: {\n                velocity: props.velocity,\n                ...springConfig,\n              },\n            })\n          } else if (slideEndReached.current && getSlideActionType() === 'next') {\n            setCarouselStyles.start({\n              [carouselSlideAxisRef.current]: -fluidTotalWrapperScrollValue.current,\n              config: {\n                velocity: props.velocity,\n                ...springConfig,\n              },\n            })\n          } else {\n            setCarouselStyles.start({\n              [carouselSlideAxisRef.current]: prevSlidedValue.current,\n              config: {\n                velocity: props.velocity,\n                ...springConfig,\n              },\n            })\n          }\n        } else {\n          setCarouselStyles.start({\n            [carouselSlideAxisRef.current]: -(getCurrentActiveItem() * getSlideValue()),\n            config: {\n              velocity: props.velocity,\n              ...springConfig,\n            },\n          })\n        }\n      }\n      function checkBounds() {\n        const nextItemWillExceed =\n          Math.abs(getCurrentSlidedValue()) + 100 >= fluidTotalWrapperScrollValue.current\n\n        if (nextItemWillExceed && getSlideActionType() === 'next') {\n          slideEndReached.current = true\n        }\n        if (getSlideActionType() === 'prev') {\n          slideEndReached.current = false\n        }\n      }\n\n      if (freeScroll && getIfShouldEnableFluidDrag()) {\n        if (isDragging) {\n          if (!getIsDragging()) {\n            setIsDragging(true)\n          }\n\n          setDragDirection()\n          emitDragObservable()\n          checkBounds()\n        }\n\n        setCarouselStyles.start({\n          from: {\n            [carouselSlideAxisRef.current]: getWrapperScrollDirection(),\n          },\n          to: {\n            [carouselSlideAxisRef.current]: -movement,\n          },\n          config: {\n            velocity: props.velocity,\n            friction: 50,\n            tension: 1400,\n          },\n        })\n\n        if (getWrapperScrollDirection() === 0 && getSlideActionType() === 'prev') {\n          cancelDrag()\n          return\n        }\n        if (props.last) {\n          if (getSlideActionType() === 'prev') {\n            slideToPrevItem(props.velocity)\n          } else {\n            slideToNextItem(props.velocity)\n          }\n          setIsDragging(false)\n        }\n        return\n      }\n\n      if (isDragging) {\n        if (!getIsDragging()) {\n          setIsDragging(true)\n        }\n\n        emitDragObservable()\n        setDragDirection()\n        checkBounds()\n\n        if (freeScroll) {\n          if (getIfShouldEnableFluidDrag()) {\n            if (getWrapperScrollDirection() === 0 && getSlideActionType() === 'prev') {\n              cancelDrag()\n              return\n            } else {\n              setCarouselStyles.start({\n                config: {\n                  velocity: props.velocity,\n                  friction: 50,\n                  tension: 1400,\n                },\n                from: {\n                  [carouselSlideAxisRef.current]: getWrapperScrollDirection(),\n                },\n                to: {\n                  [carouselSlideAxisRef.current]: -movement,\n                },\n              })\n            }\n          }\n          return\n        } else {\n          setCarouselStyles.start({\n            [carouselSlideAxisRef.current]: movement,\n            config: {\n              velocity: props.velocity,\n              friction: 50,\n              tension: 1000,\n            },\n          })\n        }\n\n        if (\n          (prevItemTreshold || nextItemTreshold) &&\n          getIfItemsNotFillTheCarousel() &&\n          slideType === 'fluid'\n        ) {\n          cancelDrag()\n          resetAnimation()\n        } else if (\n          slideEndReached.current &&\n          getSlideActionType() === 'next' &&\n          nextItemTreshold\n        ) {\n          slideEndReached.current = false\n          cancelDrag()\n          setCarouselStyles.start({\n            [carouselSlideAxisRef.current]: -fluidTotalWrapperScrollValue.current,\n          })\n        } else if (slideWhenThresholdIsReached) {\n          if (nextItemTreshold) {\n            cancelDrag()\n            if (!withLoop && getIsLastItem()) {\n              resetAnimation()\n            } else {\n              slideToNextItem(props.velocity)\n            }\n            return\n          } else if (prevItemTreshold) {\n            cancelDrag()\n            if (!withLoop && getIsFirstItem()) {\n              resetAnimation()\n            } else {\n              slideToPrevItem(props.velocity)\n            }\n            return\n          }\n        }\n      }\n\n      if (\n        props.last &&\n        !slideWhenThresholdIsReached &&\n        (nextItemTreshold || prevItemTreshold) &&\n        !freeScroll\n      ) {\n        setIsDragging(false)\n        if (nextItemTreshold) {\n          if (!withLoop && getIsLastItem()) {\n            resetAnimation()\n          } else {\n            slideToNextItem(props.velocity)\n          }\n        } else if (prevItemTreshold) {\n          if (!withLoop && getIsFirstItem()) {\n            resetAnimation()\n          } else {\n            slideToPrevItem(props.velocity)\n          }\n        }\n        return\n      }\n\n      if (props.last && !nextItemTreshold && !prevItemTreshold) {\n        if (!freeScroll) {\n          resetAnimation()\n          emitObservable({\n            eventName: 'onDrag',\n            slideActionType: getSlideActionType(),\n            ...props,\n          })\n        }\n      }\n    },\n    {\n      enabled: !disableGestures,\n      axis: carouselSlideAxisRef.current,\n      from: () => {\n        if (freeScroll) {\n          if (carouselSlideAxisRef.current === 'x') {\n            return [-getWrapperScrollDirection(), 0]\n          }\n          return [0, -getWrapperScrollDirection()]\n        }\n        return [carouselStyles.x.get(), carouselStyles.y.get()]\n      },\n    },\n  )\n\n  function setSlideActionType(type: SlideActionType) {\n    slideActionType.current = type\n  }\n  function getSlideActionType() {\n    return slideActionType.current\n  }\n  function setActiveItem(newItem: number) {\n    activeItem.current = newItem\n  }\n  function getCurrentActiveItem() {\n    return activeItem.current\n  }\n  function getIsAnimating() {\n    return isAnimating.current\n  }\n  function setIsAnimating(val: boolean) {\n    isAnimating.current = val\n  }\n  function setIsDragging(val: boolean) {\n    isDragging.current = val\n  }\n  function getIsDragging() {\n    return isDragging.current\n  }\n  function getPrevItem() {\n    const currentActiveItem = getCurrentActiveItem()\n    if (currentActiveItem === 0) {\n      return items.length - 1\n    }\n    return currentActiveItem - 1\n  }\n  function getNextItem() {\n    const currentActiveItem = getCurrentActiveItem()\n    if (currentActiveItem === items.length - 1) {\n      return 0\n    }\n    return currentActiveItem + 1\n  }\n  function getIsNextItem(id: string) {\n    const itemIndex = findItemIndex(id)\n    const activeItem = getCurrentActiveItem()\n    if (withLoop && activeItem === items.length - 1) {\n      return itemIndex === 0\n    }\n    return itemIndex === activeItem + 1\n  }\n  function getIsPrevItem(id: string) {\n    const itemIndex = findItemIndex(id)\n    const activeItem = getCurrentActiveItem()\n    if (withLoop && activeItem === 0) {\n      return itemIndex === items.length - 1\n    }\n    return itemIndex === activeItem - 1\n  }\n  function findItemIndex(id: string) {\n    return items.findIndex(item => item.id === id)\n  }\n  function getFromValue(from: SlideToItemFnProps['from']) {\n    if (typeof from === 'number') {\n      return {\n        from: {\n          [carouselSlideAxisRef.current]: from,\n        },\n      }\n    }\n    return {}\n  }\n  function getToValue(\n    customTo: SlideToItemFnProps['customTo'],\n    to: SlideToItemFnProps['to'],\n  ) {\n    if (typeof customTo === 'number') {\n      return {\n        [carouselSlideAxisRef.current]: customTo,\n      }\n    }\n    if (typeof to !== 'number') {\n      throw new Error(`to values is not a number!`)\n    }\n    return {\n      [carouselSlideAxisRef.current]: -(getSlideValue() * to!),\n    }\n  }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  function slideToItem({\n    from,\n    to = -1,\n    customTo,\n    immediate = false,\n    onRest = () => {},\n    velocity,\n  }: SlideToItemFnProps) {\n    if (!immediate) {\n      setActiveItem(to)\n      setIsAnimating(true)\n      emitObservable({\n        eventName: 'onSlideStartChange',\n        slideActionType: getSlideActionType(),\n        nextItem: {\n          index: slideType === 'fluid' ? -1 : to,\n          id: slideType === 'fluid' ? '' : items[to].id,\n        },\n      })\n    }\n    prevSlidedValue.current = getToValue(customTo, to)[carouselSlideAxis]\n    setCarouselStyles.start({\n      ...getFromValue(from),\n      to: getToValue(customTo, to),\n      ...(velocity\n        ? {\n            config: {\n              ...defaultDragSpringConfig,\n              velocity,\n              friction: undefined,\n              tension: undefined,\n            },\n          }\n        : {\n            config: {\n              velocity: 0,\n              ...springConfig,\n            },\n          }),\n      immediate,\n      onRest: val => {\n        if (val.finished) {\n          setIsDragging(false)\n          setIsAnimating(false)\n          onRest()\n          if (!immediate) {\n            emitObservable({\n              eventName: 'onSlideChange',\n              slideActionType: getSlideActionType(),\n              currentItem: {\n                index: slideType === 'fluid' ? -1 : getCurrentActiveItem(),\n                id: slideType === 'fluid' ? '' : items[getCurrentActiveItem()].id,\n              },\n            })\n          }\n        }\n      },\n    })\n    if (enableThumbsWrapperScroll && withThumbs && !immediate) {\n      handleThumbsScroll(to, getSlideActionType())\n    }\n  }\n  function getIsLastItem() {\n    return getCurrentActiveItem() === items.length - 1\n  }\n  function slideToPrevItem(velocity?: number[]) {\n    setSlideActionType('prev')\n    slideEndReached.current = false\n\n    if (slideType === 'fluid') {\n      slideEndReached.current = false\n\n      if (getIfItemsNotFillTheCarousel()) {\n        return\n      }\n      const nextPrevValue = getCurrentSlidedValue() + getSlideValue() + 200\n\n      if (freeScroll) {\n        const nextValue = mainCarouselWrapperRef.current!.scrollLeft - getSlideValue()\n        slideToItem({\n          customTo: nextValue < 0 ? 0 : nextValue,\n          from: mainCarouselWrapperRef.current!.scrollLeft,\n          velocity,\n        })\n      } else if (nextPrevValue >= 0) {\n        if (withLoop) {\n          slideToItem({\n            from: getCurrentSlidedValue() - getCarouselItemWidth() * items.length,\n            velocity,\n            customTo:\n              getCurrentSlidedValue() -\n              getCarouselItemWidth() * items.length +\n              getSlideValue(),\n          })\n        } else {\n          slideToItem({\n            customTo: 0,\n            velocity,\n          })\n        }\n      } else {\n        slideToItem({\n          customTo: getCurrentSlidedValue() + getSlideValue(),\n          velocity,\n        })\n      }\n    } else {\n      if ((!withLoop && getCurrentActiveItem() === 0) || windowIsHidden.current) {\n        return\n      }\n\n      if (getIsFirstItem()) {\n        slideToItem({\n          from: getCurrentSlidedValue() - getSlideValue() * items.length,\n          to: items.length - 1,\n          velocity,\n        })\n      } else {\n        slideToItem({\n          to: getPrevItem(),\n          velocity,\n        })\n      }\n    }\n  }\n  function slideToNextItem(velocity?: number[]) {\n    setSlideActionType('next')\n\n    if (slideType === 'fluid') {\n      if (getIfItemsNotFillTheCarousel()) {\n        return\n      }\n\n      const nextItemWillExceed =\n        Math.abs(getCurrentSlidedValue() - getSlideValue()) + 100 >=\n        fluidTotalWrapperScrollValue.current\n\n      if (freeScroll) {\n        const nextValue = mainCarouselWrapperRef.current!.scrollLeft + getSlideValue()\n        const willExceed = nextValue > fluidTotalWrapperScrollValue.current\n        const val = mainCarouselWrapperRef.current!.scrollLeft + getSlideValue()\n\n        slideToItem({\n          velocity,\n          customTo: willExceed ? fluidTotalWrapperScrollValue.current : val,\n          from: mainCarouselWrapperRef.current!.scrollLeft,\n        })\n      } else if (\n        withLoop &&\n        Math.abs(getCurrentSlidedValue() - getSlideValue()) >=\n          items.length * getCarouselItemWidth()\n      ) {\n        const currentWidth = getCarouselItemWidth() * items.length\n        slideToItem({\n          from: getCurrentSlidedValue() + currentWidth,\n          customTo: getCurrentSlidedValue() + currentWidth - getSlideValue(),\n          velocity,\n        })\n      } else if (slideEndReached.current) {\n        return\n      } else if (nextItemWillExceed) {\n        slideEndReached.current = true\n        slideToItem({\n          customTo: -fluidTotalWrapperScrollValue.current,\n          velocity,\n        })\n      } else {\n        slideToItem({\n          customTo: getCurrentSlidedValue() - getSlideValue(),\n          velocity,\n        })\n      }\n    } else {\n      if (\n        (!withLoop && getCurrentActiveItem() === internalItems.length - 1) ||\n        windowIsHidden.current\n      ) {\n        return\n      }\n\n      const nextItemWillExceed =\n        Math.abs(getCurrentSlidedValue() - getSlideValue() + 25) >\n        fluidTotalWrapperScrollValue.current\n\n      if (nextItemWillExceed && !getIsDragging()) {\n        slideEndReached.current = true\n      } else if (slideEndReached.current) {\n        slideToItem({\n          to: items.length - itemsPerSlideRef.current,\n          velocity,\n        })\n      } else if (getIsLastItem()) {\n        slideToItem({\n          from: getCurrentSlidedValue() + getSlideValue() * items.length,\n          to: 0,\n          velocity,\n        })\n      } else {\n        slideToItem({\n          to: getNextItem(),\n          velocity,\n        })\n      }\n    }\n  }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  function _slideToItem(item: string | number) {\n    let itemIndex = 0\n\n    if (typeof item === 'string') {\n      itemIndex = items.findIndex(_item => _item.id === item)\n    } else {\n      itemIndex = item\n    }\n\n    if (itemIndex >= items.length) {\n      throw Error(\n        `The item you want to slide to doesn't exist. This could be due to the fact that \n        you provide a wrong id or a higher numeric index.`,\n      )\n    }\n\n    if (\n      itemIndex === getCurrentActiveItem() ||\n      (items.length !== prevItems.current.length && getCurrentActiveItem() < items.length)\n    ) {\n      return\n    }\n\n    const currentItem = findItemIndex(prevItems.current[getCurrentActiveItem()].id)\n    const newActiveItem = findItemIndex(items[itemIndex].id)\n\n    if (newActiveItem > currentItem) {\n      setSlideActionType('next')\n    } else {\n      setSlideActionType('prev')\n    }\n\n    slideToItem({\n      to: itemIndex,\n    })\n  }\n  function getItemStyles(_itemsPerSlide: number) {\n    if (slideType === 'fixed') {\n      return {\n        ...(carouselSlideAxisRef.current === 'x'\n          ? { marginRight: `${gutterRef.current}px` }\n          : { marginBottom: `${gutterRef.current}px` }),\n        flex: `1 0 calc(100% / ${_itemsPerSlide} - ${\n          (gutterRef.current * (_itemsPerSlide - 1)) / _itemsPerSlide\n        }px)`,\n      }\n    }\n    return {\n      ...(carouselSlideAxisRef.current === 'x'\n        ? { marginRight: `${gutterRef.current}px` }\n        : { marginBottom: `${gutterRef.current}px` }),\n    }\n  }\n  function getAnimatedWrapperStyles() {\n    const percentValue = `calc(100% - ${startEndGutterRef.current * 2}px)`\n    return {\n      width: carouselSlideAxisRef.current === 'x' ? percentValue : '100%',\n      height: carouselSlideAxisRef.current === 'y' ? percentValue : '100%',\n    }\n  }\n  function getOverflowStyles() {\n    if (freeScroll) {\n      if (carouselSlideAxisRef.current === 'x') {\n        return {\n          overflowX: 'auto',\n        }\n      }\n      return {\n        overflowY: 'auto',\n      }\n    }\n    return {}\n  }\n  function getWheelEvent() {\n    if (freeScroll) {\n      return {\n        onWheel() {\n          carouselStyles[carouselSlideAxisRef.current].stop()\n        },\n      }\n    }\n    return {}\n  }\n  function getTouchAction() {\n    if (disableGestures) {\n      return 'unset'\n    } else if (!touchAction) {\n      if (carouselSlideAxisRef.current === 'x') {\n        return 'pan-y'\n      }\n      return 'pan-x'\n    }\n    return touchAction\n  }\n  // Perform some check on first mount\n  useIsomorphicMount(() => {\n    if (itemsPerSlide % 2 === 0 && initialStartingPositionRef.current) {\n      throw new Error(\n        `initialStartingPosition can be only used if itemsPerSlide is an even value.`,\n      )\n    }\n    if (draggingSlideTresholdRef.current < 0) {\n      throw new Error('draggingSlideTreshold must be greater than 0')\n    }\n    if (draggingSlideTresholdRef.current > getSlideValue() / 2) {\n      throw new Error(\n        `draggingSlideTreshold must be equal or less than the half of the width of an item, which is ${Math.floor(\n          getSlideValue() / 2,\n        )}`,\n      )\n    }\n    if (itemsPerSlideRef.current < 1) {\n      throw new Error(`The itemsPerSlide prop can't be less than 1.`)\n    }\n    if (itemsPerSlideRef.current > items.length) {\n      throw new Error(\n        `The itemsPerSlide prop can't be greater than the total length of the items you provide.`,\n      )\n    }\n    if (initialActiveItemRef.current < 0) {\n      throw new Error('The initialActiveItem cannot be less than 0.')\n    }\n    if (initialActiveItemRef.current > items.length) {\n      throw new Error(\n        'The initialActiveItem cannot be greater than the total length of the items you provide.',\n      )\n    }\n    if (!shouldResizeOnWindowResize) {\n      console.warn(\n        'You set shouldResizeOnWindowResize={false}; be aware that the carousel could behave in a strange way if you also use the fullscreen functionality or if you change the mobile orientation.',\n      )\n    }\n  })\n  useIsomorphicMount(() => {\n    function handleVisibilityChange() {\n      if (document.hidden) {\n        windowIsHidden.current = true\n      } else {\n        windowIsHidden.current = false\n      }\n    }\n    document.addEventListener('visibilitychange', handleVisibilityChange)\n    return () => {\n      document.removeEventListener('visibilitychange', handleVisibilityChange)\n    }\n  })\n  useIsomorphicMount(() => {\n    isFirstMount.current = false\n    fluidTotalWrapperScrollValue.current = getFluidWrapperScrollValue()\n    initialWindowWidth.current = window.innerWidth\n    currentWindowWidth.current = window.innerWidth\n\n    if (initialActiveItem > 0) {\n      slideToItem({\n        to: initialActiveItem,\n        immediate: true,\n      })\n      setActiveItem(initialActiveItem)\n      if (!withLoop && carouselTrackWrapperRef.current) {\n        carouselTrackWrapperRef.current.style.top = '0px'\n        carouselTrackWrapperRef.current.style.left = '0px'\n      }\n    }\n  })\n  useIsomorphicLayoutEffect(() => {\n    if (initialActiveItem < items.length && initialActiveItem !== activeItem.current) {\n      slideToItem({\n        to: initialActiveItem,\n        immediate: true,\n      })\n      setActiveItem(initialActiveItem)\n    }\n  }, [initialActiveItem])\n  useIsomorphicLayoutEffect(() => {\n    if (shouldResizeOnWindowResize) {\n      window.addEventListener('resize', handleResize)\n      return () => {\n        window.removeEventListener('resize', handleResize)\n      }\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [shouldResizeOnWindowResize])\n  useIsomorphicLayoutEffect(() => {\n    if (carouselTrackWrapperRef.current) {\n      if (carouselSlideAxisRef.current === 'x') {\n        carouselTrackWrapperRef.current.style.top = '0px'\n      }\n      if (carouselSlideAxisRef.current === 'y') {\n        carouselTrackWrapperRef.current.style.left = '0px'\n      }\n    }\n  }, [carouselSlideAxis])\n  useIsomorphicLayoutEffect(() => {\n    fluidTotalWrapperScrollValue.current = getFluidWrapperScrollValue()\n    const itemsAreEqual = items.length === prevItems.current.length\n\n    if (!itemsAreEqual && items.length < prevItems.current.length) {\n      _slideToItem(items.length - 1)\n    }\n\n    prevItems.current = items\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [getFluidWrapperScrollValue, items])\n\n  const contextProps = {\n    useListenToCustomEvent,\n    getIsFullscreen,\n    enterFullscreen,\n    exitFullscreen,\n    getIsAnimating,\n    getIsDragging,\n    getIsNextItem,\n    getIsPrevItem,\n    slideToPrevItem() {\n      slideToPrevItem()\n    },\n    slideToNextItem() {\n      slideToNextItem()\n    },\n    ...(slideType === 'fixed'\n      ? {\n          slideToItem: _slideToItem,\n          getIsActiveItem: (id: string) => {\n            return findItemIndex(id) === getCurrentActiveItem()\n          },\n          getCurrentActiveItem: () => ({\n            id: items[getCurrentActiveItem()].id,\n            index: getCurrentActiveItem(),\n          }),\n        }\n      : {}),\n  }\n\n  const handleCarouselFragmentRef = (ref: HTMLDivElement | null) => {\n    if (ref) {\n      carouselTrackWrapperRef.current = ref\n      adjustCarouselWrapperPosition(ref, initialActiveItemRef.current)\n    }\n  }\n\n  function getInitialStyles() {\n    const totalValue = (items.length / itemsPerSlide) * 100\n    const singleItemValue = 100 / itemsPerSlide\n    const cssProp = carouselSlideAxisRef.current === 'x' ? 'left' : 'y'\n    const quantityToMove = Math.floor(50 / singleItemValue)\n\n    if (slideType === 'fixed') {\n      if (initialStartingPositionRef.current === 'center') {\n        return {\n          [cssProp]: `calc(-${totalValue}% + ${singleItemValue * quantityToMove}%)`,\n        }\n      }\n      if (initialStartingPositionRef.current === 'end') {\n        return {\n          [cssProp]: `calc(-${totalValue}% + ${singleItemValue * (quantityToMove * 2)}%)`,\n        }\n      }\n    }\n    return {\n      [cssProp]: `0px`,\n    }\n  }\n\n  const carouselFragment = (\n    <Context.Provider value={contextProps}>\n      <div\n        ref={mainCarouselWrapperRef}\n        className=\"use-spring-carousel-main-wrapper\"\n        data-testid=\"use-spring-carousel-wrapper\"\n        {...getWheelEvent()}\n        // @ts-ignore\n        style={{\n          display: 'flex',\n          position: 'relative',\n          width: '100%',\n          height: '100%',\n          ...getOverflowStyles(),\n        }}\n      >\n        <animated.div\n          {...bindDrag()}\n          className=\"use-spring-carousel-track-wrapper\"\n          data-testid=\"use-spring-carousel-animated-wrapper\"\n          ref={handleCarouselFragmentRef}\n          style={{\n            display: 'flex',\n            position: 'relative',\n            touchAction: getTouchAction(),\n            flexDirection: carouselSlideAxisRef.current === 'x' ? 'row' : 'column',\n            ...getAnimatedWrapperStyles(),\n            ...getInitialStyles(),\n            ...(freeScroll ? {} : carouselStyles),\n          }}\n        >\n          {internalItems.map(({ id, renderItem }, index) => {\n            return (\n              <div\n                key={`${id}-${index}`}\n                className=\"use-spring-carousel-item\"\n                data-testid=\"use-spring-carousel-item-wrapper\"\n                style={{\n                  display: 'flex',\n                  position: 'relative',\n                  ...getItemStyles(itemsPerSlideRef.current),\n                }}\n              >\n                {renderItem}\n              </div>\n            )\n          })}\n        </animated.div>\n      </div>\n    </Context.Provider>\n  )\n  const thumbsFragment = (\n    <Context.Provider value={contextProps}>{_thumbsFragment}</Context.Provider>\n  )\n\n  return {\n    ...contextProps,\n    carouselFragment,\n    thumbsFragment,\n  }\n}\n\nfunction useSpringCarouselContext<T = 'fixed' | 'fluid'>() {\n  const context = useContext(Context)\n  if (!context) {\n    throw new Error(\n      'useSpringCarouselContext must be used only inside a component that is rendered inside the Carousel.',\n    )\n  }\n  return context as ContextTypes<T>\n}\n\nexport { useSpringCarousel, useSpringCarouselContext }\n"]},"metadata":{},"sourceType":"module"}