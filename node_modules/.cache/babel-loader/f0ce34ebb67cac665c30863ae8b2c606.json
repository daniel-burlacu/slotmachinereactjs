{"ast":null,"code":"/*\nCopyright (c) 2020 Uber Technologies, Inc.\n\nThis source code is licensed under the MIT license found in the\nLICENSE file in the root directory of this source tree.\n*/\nimport * as React from 'react';\nimport Popover from '@miksu/react-tiny-popover';\nimport { useValueDebounce, PropTypes, Error, Editor } from '../index';\nimport { useHover } from '../utils';\n\nconst getTooltip = (description, type, name) => React.createElement(\"div\", {\n  style: {\n    backgroundColor: 'white',\n    border: '1px solid #CCC',\n    padding: '8px',\n    borderRadius: '5px',\n    fontFamily: \"'Helvetica Neue', Arial\",\n    fontSize: '14px'\n  }\n}, React.createElement(\"b\", null, name), \": \", React.createElement(\"i\", null, type), React.createElement(\"br\", null), React.createElement(\"br\", null), description);\n\nconst Spacing = _ref => {\n  let {\n    children,\n    name\n  } = _ref;\n  return React.createElement(\"div\", {\n    \"data-testid\": `rv-knob-${name}`,\n    style: {\n      margin: '10px 0px',\n      fontFamily: \"'Helvetica Neue', Arial\",\n      fontSize: '14px'\n    }\n  }, children);\n};\n\nconst Label = _ref2 => {\n  let {\n    children,\n    tooltip\n  } = _ref2;\n  const [hoverRef, isHover] = useHover();\n  return React.createElement(Popover, {\n    isOpen: Boolean(isHover),\n    position: 'top',\n    content: React.createElement(\"div\", null, tooltip)\n  }, React.createElement(\"label\", {\n    ref: hoverRef,\n    style: {\n      fontWeight: 500,\n      lineHeight: '20px'\n    }\n  }, children, \" \", React.createElement(\"span\", {\n    style: {\n      fontSize: '12px',\n      fontWeight: 400\n    }\n  }, \"[?]\")));\n};\n\nconst BooleanKnob = _ref3 => {\n  let {\n    tooltip,\n    name,\n    val,\n    globalSet\n  } = _ref3;\n  const [hoverRef, isHover] = useHover();\n  return React.createElement(Popover, {\n    isOpen: Boolean(isHover),\n    position: 'top',\n    content: React.createElement(\"div\", null, tooltip)\n  }, React.createElement(\"div\", {\n    ref: hoverRef,\n    style: {\n      display: 'flex',\n      alignItems: 'center',\n      fontWeight: 500\n    }\n  }, React.createElement(\"input\", {\n    id: name,\n    type: \"checkbox\",\n    style: {\n      marginRight: '8px',\n      marginLeft: '0px'\n    },\n    checked: Boolean(val),\n    onChange: () => {\n      globalSet(!val);\n    }\n  }), React.createElement(\"label\", {\n    htmlFor: name\n  }, name, \" \", React.createElement(\"span\", {\n    style: {\n      fontSize: '12px',\n      fontWeight: 400\n    }\n  }, \"[?]\"))));\n};\n\nconst Knob = _ref4 => {\n  let {\n    name,\n    error,\n    type,\n    val: globalVal,\n    set: globalSet,\n    options = {},\n    description,\n    placeholder,\n    enumName,\n    imports\n  } = _ref4;\n  const [val] = useValueDebounce(globalVal, globalSet);\n\n  const getEnumValue = opt => imports ? `${enumName || name.toUpperCase()}.${opt}` : opt;\n\n  switch (type) {\n    case PropTypes.Ref:\n      return React.createElement(Spacing, null, React.createElement(Label, {\n        tooltip: getTooltip(description, type, name)\n      }, name), React.createElement(\"a\", {\n        href: \"https://reactjs.org/docs/refs-and-the-dom.html\",\n        target: \"_blank\",\n        rel: \"noopener noreferrer\",\n        style: {\n          fontSize: '14px',\n          display: 'block'\n        }\n      }, \"React Ref documentation\"), React.createElement(Error, {\n        msg: error,\n        isPopup: true\n      }));\n\n    case PropTypes.Boolean:\n      return React.createElement(Spacing, null, React.createElement(BooleanKnob, {\n        tooltip: getTooltip(description, type, name),\n        val: Boolean(val),\n        globalSet: globalSet,\n        name: name\n      }), React.createElement(Error, {\n        msg: error,\n        isPopup: true\n      }));\n\n    case PropTypes.Enum:\n      const optionsKeys = Object.keys(options);\n      const numberOfOptions = optionsKeys.length;\n      return React.createElement(Spacing, null, React.createElement(Label, {\n        tooltip: getTooltip(description, type, name)\n      }, name), numberOfOptions < 7 ? React.createElement(\"div\", {\n        style: {\n          display: 'flex',\n          flexWrap: 'wrap'\n        }\n      }, Object.keys(options).map(opt => {\n        const enumValue = getEnumValue(opt);\n        return React.createElement(\"div\", {\n          style: {\n            marginRight: '16px',\n            marginBottom: '8px',\n            display: 'flex',\n            alignItems: 'center'\n          },\n          key: opt\n        }, React.createElement(\"input\", {\n          style: {\n            marginRight: '8px',\n            marginLeft: '0px'\n          },\n          type: \"radio\",\n          checked: enumValue === val,\n          key: opt,\n          id: `${name}_${opt}`,\n          value: enumValue,\n          name: `radio_${name}`,\n          onChange: e => globalSet(e.target.value)\n        }), React.createElement(\"label\", {\n          htmlFor: `${name}_${opt}`\n        }, opt));\n      })) : React.createElement(\"select\", {\n        onChange: e => globalSet(e.target.value),\n        value: String(val),\n        name: name,\n        style: {\n          display: 'block',\n          padding: '8.5px 10px',\n          MozAppearance: 'none',\n          WebkitAppearance: 'none',\n          appearance: 'none',\n          width: '100%',\n          border: '1px solid #CCC',\n          background: `url(data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0Ljk1IDEwIj48ZGVmcz48c3R5bGU+LmNscy0ye2ZpbGw6IzQ0NDt9PC9zdHlsZT48L2RlZnM+PHRpdGxlPmFycm93czwvdGl0bGU+PHBvbHlnb24gY2xhc3M9ImNscy0yIiBwb2ludHM9IjEuNDEgNC42NyAyLjQ4IDMuMTggMy41NCA0LjY3IDEuNDEgNC42NyIvPjxwb2x5Z29uIGNsYXNzPSJjbHMtMiIgcG9pbnRzPSIzLjU0IDUuMzMgMi40OCA2LjgyIDEuNDEgNS4zMyAzLjU0IDUuMzMiLz48L3N2Zz4=) no-repeat 95% 50%`,\n          fontSize: '14px',\n          borderRadius: '5px'\n        }\n      }, Object.keys(options).map(opt => {\n        const enumValue = getEnumValue(opt);\n        return React.createElement(\"option\", {\n          key: `${name}_${opt}`,\n          value: enumValue\n        }, opt);\n      })), React.createElement(Error, {\n        msg: error,\n        isPopup: true\n      }));\n\n    case PropTypes.ReactNode:\n    case PropTypes.Function:\n    case PropTypes.Array:\n    case PropTypes.Object:\n    case PropTypes.String:\n    case PropTypes.Date:\n    case PropTypes.Number:\n      return React.createElement(Spacing, {\n        name: name\n      }, React.createElement(Label, {\n        tooltip: getTooltip(description, type, name)\n      }, name), React.createElement(Editor, {\n        onChange: code => {\n          globalSet(code);\n        },\n        code: val ? String(val) : '',\n        placeholder: placeholder,\n        small: true\n      }), React.createElement(Error, {\n        msg: error,\n        isPopup: true\n      }));\n\n    default:\n      return null;\n  }\n};\n\nexport default Knob;","map":{"version":3,"mappings":"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","names":["React","Popover","useValueDebounce","PropTypes","Error","Editor","useHover","getTooltip","description","type","name","style","backgroundColor","border","padding","borderRadius","fontFamily","fontSize","Spacing","children","margin","Label","tooltip","hoverRef","isHover","isOpen","Boolean","position","content","ref","fontWeight","lineHeight","BooleanKnob","val","globalSet","display","alignItems","id","marginRight","marginLeft","checked","onChange","htmlFor","Knob","error","globalVal","set","options","placeholder","enumName","imports","getEnumValue","opt","toUpperCase","Ref","href","target","rel","msg","isPopup","Enum","optionsKeys","Object","keys","numberOfOptions","length","flexWrap","map","enumValue","marginBottom","key","value","e","String","MozAppearance","WebkitAppearance","appearance","width","background","ReactNode","Function","Array","Date","Number","code","small"],"sources":["../../../src/ui/knob.tsx"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}