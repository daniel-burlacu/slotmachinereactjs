{"ast":null,"code":"/*\nCopyright (c) 2020 Uber Technologies, Inc.\n\nThis source code is licensed under the MIT license found in the\nLICENSE file in the root directory of this source tree.\n*/\nimport { clone } from '../utils';\nimport { PropTypes, formatCode as rvFormatCode } from '../';\nimport { addToImportList } from '../code-generator';\n\nconst formatCode = code => {\n  if (code && typeof code === 'string') {\n    const isJsx = code.startsWith('<');\n\n    try {\n      if (isJsx) {\n        code = rvFormatCode(`<>${code}</>`);\n      } else {\n        code = rvFormatCode(`<>{${code}}</>`);\n      }\n\n      const addSpaces = !code.startsWith('<>\\n');\n\n      if (isJsx) {\n        code = code.replace(/^<>\\s*/, '').replace(/\\s*<\\/>$/, '');\n      } else {\n        code = code.replace(/^<>\\s*\\{/, '').replace(/\\}\\s*<\\/>$/, '');\n      }\n\n      if (addSpaces) {\n        code = code.replace(/\\n/g, '\\n  ');\n      }\n    } catch (e) {}\n\n    code = code.replace(/\\}/g, '\\\\}').replace(/\\$/g, '\\\\$');\n  }\n\n  return code;\n};\n\nconst joinNamed = (items, ctr) => {\n  if (!items) return '';\n  let output = `\\${${ctr++}:{`;\n\n  for (let i = 0; i < items.length; i++) {\n    if (i !== items.length - 1) {\n      output += `\\${${ctr++}:${items[i]}, }`;\n    } else {\n      output += `\\${${ctr++}:${items[i]}}`;\n    }\n  }\n\n  return `${output}\\\\}}`;\n};\n\nconst getImportBody = (imports, props) => {\n  const importList = imports ? clone(imports) : {}; // prop level imports (typically enums related) that are displayed\n  // only when the prop is being used\n\n  props && Object.values(props).forEach(prop => {\n    if (prop.imports) {\n      addToImportList(importList, prop.imports);\n    }\n  });\n  const importBody = [];\n  let ctr = 1;\n\n  for (const from in importList) {\n    const def = importList[from].default;\n    const named = Array.isArray(importList[from].named) && importList[from].named.length > 0 ? importList[from].named : undefined;\n    const defaultImport = def ? `\\${${ctr++}:${def}${named ? ', }' : '}'}` : '';\n    importBody.push(`import ${defaultImport}${joinNamed(named, ctr)} from '${from}';`);\n\n    if (named) {\n      ctr += named.length + 1;\n    }\n  }\n\n  return importBody;\n};\n\nconst getComponentBody = (componentName, props) => {\n  let ctr = 1;\n  const componentBody = [`<${componentName}`];\n\n  if (props) {\n    for (const propName in props) {\n      if (props[propName].hidden) continue;\n      if (propName === 'children') continue;\n\n      if (props[propName].type === PropTypes.Boolean) {\n        const row = `  \\${${ctr++}:${propName}}`;\n        componentBody.push(row);\n      } else if (props[propName].type === PropTypes.Enum) {\n        const enumName = props[propName].imports ? props[propName].enumName || propName.toUpperCase() : null;\n        const opts = Object.values(props[propName].options).map(opt => enumName ? opt.includes('-') ? `${enumName}['${opt}']` : `${enumName}.${opt}` : opt).filter(opt => opt !== props[propName].defaultValue);\n\n        if (props[propName].defaultValue) {\n          opts.unshift(props[propName].defaultValue);\n        }\n\n        if (!props[propName].imports) {\n          const row = `  \\${${ctr++}:${propName}=\"\\${${ctr++}|${opts.join(',')}|}\\\"}`;\n          componentBody.push(row);\n        } else {\n          const row = `  \\${${ctr++}:${propName}={\\${${ctr++}|${opts.join(',')}|}\\\\}}`;\n          componentBody.push(row);\n        }\n      } else if (props[propName].type === PropTypes.String && typeof props[propName].value === PropTypes.String) {\n        const row = `  \\${${ctr++}:${propName}=\"\\${${ctr++}:${formatCode(props[propName].defaultValue || props[propName].value)}}\\\"}`;\n        componentBody.push(row);\n      } else {\n        const row = `  \\${${ctr++}:${propName}={\\${${ctr++}:${formatCode(props[propName].defaultValue || props[propName].value)}}\\\\}}`;\n        componentBody.push(row);\n      }\n    }\n\n    if (props['children'] && !props['children'].hidden) {\n      componentBody.push('>');\n      componentBody.push(`  \\${${ctr++}:${formatCode(props['children'].value)}}`);\n      componentBody.push(`</${componentName}>`);\n    } else {\n      componentBody.push(`/>`);\n    }\n  } else {\n    componentBody.push(`/>`);\n  }\n\n  return componentBody;\n};\n\nconst vscodeSnippet = _ref => {\n  let {\n    componentName,\n    prefix,\n    imports,\n    props,\n    description\n  } = _ref;\n  const output = {};\n  const importBody = getImportBody(imports, props);\n\n  if (importBody.length > 0) {\n    output[`${componentName} import`] = {\n      scope: 'javascript,javascriptreact,typescript,typescriptreact',\n      prefix: [`${prefix || componentName} import`],\n      description: description || `Base ${componentName} import.`,\n      body: importBody\n    };\n  }\n\n  output[`${componentName}`] = {\n    scope: 'javascript,javascriptreact,typescript,typescriptreact',\n    prefix: [`${prefix || componentName} component`],\n    description: description || `Base ${componentName} component.`,\n    body: getComponentBody(componentName, props)\n  };\n  return output;\n};\n\nexport default vscodeSnippet;","map":{"version":3,"mappings":"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","names":["clone","PropTypes","formatCode","rvFormatCode","addToImportList","code","isJsx","startsWith","addSpaces","replace","e","joinNamed","items","ctr","output","i","length","getImportBody","imports","props","importList","Object","values","forEach","prop","importBody","from","def","default","named","Array","isArray","undefined","defaultImport","push","getComponentBody","componentName","componentBody","propName","hidden","type","Boolean","row","Enum","enumName","toUpperCase","opts","options","map","opt","includes","filter","defaultValue","unshift","join","String","value","vscodeSnippet","prefix","description","scope","body"],"sources":["../../../src/snippets/vscode-snippet.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}