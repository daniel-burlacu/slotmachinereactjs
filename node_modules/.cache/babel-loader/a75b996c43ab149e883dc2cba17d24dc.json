{"ast":null,"code":"/* Copyright (c) 2012-2016 LevelUP contributors\n * See list at <https://github.com/level/levelup#contributing>\n * MIT License\n * <https://github.com/level/levelup/blob/master/LICENSE.md>\n */\nvar util = require('./util');\n\nvar WriteError = require('level-errors').WriteError;\n\nvar getOptions = util.getOptions;\nvar dispatchError = util.dispatchError;\n\nfunction Batch(levelup, codec) {\n  this._levelup = levelup;\n  this._codec = codec;\n  this.batch = levelup.db.batch();\n  this.ops = [];\n  this.length = 0;\n}\n\nBatch.prototype.put = function (key_, value_, options) {\n  options = getOptions(options);\n\n  var key = this._codec.encodeKey(key_, options);\n\n  var value = this._codec.encodeValue(value_, options);\n\n  try {\n    this.batch.put(key, value);\n  } catch (e) {\n    throw new WriteError(e);\n  }\n\n  this.ops.push({\n    type: 'put',\n    key: key,\n    value: value\n  });\n  this.length++;\n  return this;\n};\n\nBatch.prototype.del = function (key_, options) {\n  options = getOptions(options);\n\n  var key = this._codec.encodeKey(key_, options);\n\n  try {\n    this.batch.del(key);\n  } catch (err) {\n    throw new WriteError(err);\n  }\n\n  this.ops.push({\n    type: 'del',\n    key: key\n  });\n  this.length++;\n  return this;\n};\n\nBatch.prototype.clear = function () {\n  try {\n    this.batch.clear();\n  } catch (err) {\n    throw new WriteError(err);\n  }\n\n  this.ops = [];\n  this.length = 0;\n  return this;\n};\n\nBatch.prototype.write = function (callback) {\n  var levelup = this._levelup;\n  var ops = this.ops;\n\n  try {\n    this.batch.write(function (err) {\n      if (err) {\n        return dispatchError(levelup, new WriteError(err), callback);\n      }\n\n      levelup.emit('batch', ops);\n\n      if (callback) {\n        callback();\n      }\n    });\n  } catch (err) {\n    throw new WriteError(err);\n  }\n};\n\nmodule.exports = Batch;","map":{"version":3,"names":["util","require","WriteError","getOptions","dispatchError","Batch","levelup","codec","_levelup","_codec","batch","db","ops","length","prototype","put","key_","value_","options","key","encodeKey","value","encodeValue","e","push","type","del","err","clear","write","callback","emit","module","exports"],"sources":["F:/Games/slotmachinereact/node_modules/ganache-core/node_modules/ethereumjs-block/node_modules/levelup/lib/batch.js"],"sourcesContent":["/* Copyright (c) 2012-2016 LevelUP contributors\n * See list at <https://github.com/level/levelup#contributing>\n * MIT License\n * <https://github.com/level/levelup/blob/master/LICENSE.md>\n */\n\nvar util = require('./util')\nvar WriteError = require('level-errors').WriteError\nvar getOptions = util.getOptions\nvar dispatchError = util.dispatchError\n\nfunction Batch (levelup, codec) {\n  this._levelup = levelup\n  this._codec = codec\n  this.batch = levelup.db.batch()\n  this.ops = []\n  this.length = 0\n}\n\nBatch.prototype.put = function (key_, value_, options) {\n  options = getOptions(options)\n\n  var key = this._codec.encodeKey(key_, options)\n  var value = this._codec.encodeValue(value_, options)\n\n  try {\n    this.batch.put(key, value)\n  } catch (e) {\n    throw new WriteError(e)\n  }\n\n  this.ops.push({ type: 'put', key: key, value: value })\n  this.length++\n\n  return this\n}\n\nBatch.prototype.del = function (key_, options) {\n  options = getOptions(options)\n\n  var key = this._codec.encodeKey(key_, options)\n\n  try {\n    this.batch.del(key)\n  } catch (err) {\n    throw new WriteError(err)\n  }\n\n  this.ops.push({ type: 'del', key: key })\n  this.length++\n\n  return this\n}\n\nBatch.prototype.clear = function () {\n  try {\n    this.batch.clear()\n  } catch (err) {\n    throw new WriteError(err)\n  }\n\n  this.ops = []\n  this.length = 0\n\n  return this\n}\n\nBatch.prototype.write = function (callback) {\n  var levelup = this._levelup\n  var ops = this.ops\n\n  try {\n    this.batch.write(function (err) {\n      if (err) { return dispatchError(levelup, new WriteError(err), callback) }\n      levelup.emit('batch', ops)\n      if (callback) { callback() }\n    })\n  } catch (err) {\n    throw new WriteError(err)\n  }\n}\n\nmodule.exports = Batch\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AAEA,IAAIA,IAAI,GAAGC,OAAO,CAAC,QAAD,CAAlB;;AACA,IAAIC,UAAU,GAAGD,OAAO,CAAC,cAAD,CAAP,CAAwBC,UAAzC;;AACA,IAAIC,UAAU,GAAGH,IAAI,CAACG,UAAtB;AACA,IAAIC,aAAa,GAAGJ,IAAI,CAACI,aAAzB;;AAEA,SAASC,KAAT,CAAgBC,OAAhB,EAAyBC,KAAzB,EAAgC;EAC9B,KAAKC,QAAL,GAAgBF,OAAhB;EACA,KAAKG,MAAL,GAAcF,KAAd;EACA,KAAKG,KAAL,GAAaJ,OAAO,CAACK,EAAR,CAAWD,KAAX,EAAb;EACA,KAAKE,GAAL,GAAW,EAAX;EACA,KAAKC,MAAL,GAAc,CAAd;AACD;;AAEDR,KAAK,CAACS,SAAN,CAAgBC,GAAhB,GAAsB,UAAUC,IAAV,EAAgBC,MAAhB,EAAwBC,OAAxB,EAAiC;EACrDA,OAAO,GAAGf,UAAU,CAACe,OAAD,CAApB;;EAEA,IAAIC,GAAG,GAAG,KAAKV,MAAL,CAAYW,SAAZ,CAAsBJ,IAAtB,EAA4BE,OAA5B,CAAV;;EACA,IAAIG,KAAK,GAAG,KAAKZ,MAAL,CAAYa,WAAZ,CAAwBL,MAAxB,EAAgCC,OAAhC,CAAZ;;EAEA,IAAI;IACF,KAAKR,KAAL,CAAWK,GAAX,CAAeI,GAAf,EAAoBE,KAApB;EACD,CAFD,CAEE,OAAOE,CAAP,EAAU;IACV,MAAM,IAAIrB,UAAJ,CAAeqB,CAAf,CAAN;EACD;;EAED,KAAKX,GAAL,CAASY,IAAT,CAAc;IAAEC,IAAI,EAAE,KAAR;IAAeN,GAAG,EAAEA,GAApB;IAAyBE,KAAK,EAAEA;EAAhC,CAAd;EACA,KAAKR,MAAL;EAEA,OAAO,IAAP;AACD,CAhBD;;AAkBAR,KAAK,CAACS,SAAN,CAAgBY,GAAhB,GAAsB,UAAUV,IAAV,EAAgBE,OAAhB,EAAyB;EAC7CA,OAAO,GAAGf,UAAU,CAACe,OAAD,CAApB;;EAEA,IAAIC,GAAG,GAAG,KAAKV,MAAL,CAAYW,SAAZ,CAAsBJ,IAAtB,EAA4BE,OAA5B,CAAV;;EAEA,IAAI;IACF,KAAKR,KAAL,CAAWgB,GAAX,CAAeP,GAAf;EACD,CAFD,CAEE,OAAOQ,GAAP,EAAY;IACZ,MAAM,IAAIzB,UAAJ,CAAeyB,GAAf,CAAN;EACD;;EAED,KAAKf,GAAL,CAASY,IAAT,CAAc;IAAEC,IAAI,EAAE,KAAR;IAAeN,GAAG,EAAEA;EAApB,CAAd;EACA,KAAKN,MAAL;EAEA,OAAO,IAAP;AACD,CAfD;;AAiBAR,KAAK,CAACS,SAAN,CAAgBc,KAAhB,GAAwB,YAAY;EAClC,IAAI;IACF,KAAKlB,KAAL,CAAWkB,KAAX;EACD,CAFD,CAEE,OAAOD,GAAP,EAAY;IACZ,MAAM,IAAIzB,UAAJ,CAAeyB,GAAf,CAAN;EACD;;EAED,KAAKf,GAAL,GAAW,EAAX;EACA,KAAKC,MAAL,GAAc,CAAd;EAEA,OAAO,IAAP;AACD,CAXD;;AAaAR,KAAK,CAACS,SAAN,CAAgBe,KAAhB,GAAwB,UAAUC,QAAV,EAAoB;EAC1C,IAAIxB,OAAO,GAAG,KAAKE,QAAnB;EACA,IAAII,GAAG,GAAG,KAAKA,GAAf;;EAEA,IAAI;IACF,KAAKF,KAAL,CAAWmB,KAAX,CAAiB,UAAUF,GAAV,EAAe;MAC9B,IAAIA,GAAJ,EAAS;QAAE,OAAOvB,aAAa,CAACE,OAAD,EAAU,IAAIJ,UAAJ,CAAeyB,GAAf,CAAV,EAA+BG,QAA/B,CAApB;MAA8D;;MACzExB,OAAO,CAACyB,IAAR,CAAa,OAAb,EAAsBnB,GAAtB;;MACA,IAAIkB,QAAJ,EAAc;QAAEA,QAAQ;MAAI;IAC7B,CAJD;EAKD,CAND,CAME,OAAOH,GAAP,EAAY;IACZ,MAAM,IAAIzB,UAAJ,CAAeyB,GAAf,CAAN;EACD;AACF,CAbD;;AAeAK,MAAM,CAACC,OAAP,GAAiB5B,KAAjB"},"metadata":{},"sourceType":"script"}