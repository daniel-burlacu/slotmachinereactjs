{"ast":null,"code":"/*\nCopyright (c) 2020 Uber Technologies, Inc.\n\nThis source code is licensed under the MIT license found in the\nLICENSE file in the root directory of this source tree.\n*/\nimport { parseCode } from './ast';\nimport { Action, PropTypes } from './const';\nexport const updateCode = (dispatch, newCode) => {\n  dispatch({\n    type: Action.UpdateCode,\n    payload: newCode\n  });\n};\nexport const updateCodeAndProvider = (dispatch, newCode, providerValue) => {\n  dispatch({\n    type: Action.UpdateCodeAndProvider,\n    payload: {\n      code: newCode,\n      providerValue\n    }\n  });\n};\nexport const updateAll = (dispatch, newCode, componentName, propsConfig, parseProvider, customProps) => {\n  const propValues = {};\n  const {\n    parsedProps,\n    parsedProvider\n  } = parseCode(newCode, componentName, parseProvider);\n  Object.keys(propsConfig).forEach(name => {\n    propValues[name] = propsConfig[name].value;\n\n    if (customProps && customProps[name] && customProps[name].parse) {\n      // custom prop parser\n      propValues[name] = customProps[name].parse(parsedProps[name], propsConfig);\n    } else if (propsConfig[name].type === PropTypes.Date) {\n      const match = parsedProps[name].match(/^new\\s*Date\\(\\s*\"([0-9-T:.Z]+)\"\\s*\\)$/);\n\n      if (match) {\n        propValues[name] = match[1];\n      } else {\n        propValues[name] = parsedProps[name];\n      }\n    } else {\n      propValues[name] = parsedProps[name];\n    }\n  });\n  dispatch({\n    type: Action.Update,\n    payload: {\n      code: newCode,\n      updatedPropValues: propValues,\n      providerValue: parsedProvider\n    }\n  });\n};\nexport const updatePropsAndCodeNoRecompile = (dispatch, newCode, propName, propValue) => {\n  dispatch({\n    type: Action.UpdatePropsAndCodeNoRecompile,\n    payload: {\n      codeNoRecompile: newCode,\n      updatedPropValues: {\n        [propName]: propValue\n      }\n    }\n  });\n};\nexport const updatePropsAndCode = (dispatch, newCode, propName, propValue) => {\n  dispatch({\n    type: Action.UpdatePropsAndCode,\n    payload: {\n      code: newCode,\n      updatedPropValues: {\n        [propName]: propValue\n      }\n    }\n  });\n};\nexport const updateProps = (dispatch, propName, propValue) => {\n  dispatch({\n    type: Action.UpdateProps,\n    payload: {\n      [propName]: propValue\n    }\n  });\n};\nexport const reset = (dispatch, initialCode, providerValue, propsConfig) => {\n  dispatch({\n    type: Action.Reset,\n    payload: {\n      code: initialCode,\n      props: propsConfig,\n      providerValue\n    }\n  });\n};","map":{"version":3,"mappings":"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","names":["parseCode","Action","PropTypes","updateCode","dispatch","newCode","type","UpdateCode","payload","updateCodeAndProvider","providerValue","UpdateCodeAndProvider","code","updateAll","componentName","propsConfig","parseProvider","customProps","propValues","parsedProps","parsedProvider","Object","keys","forEach","name","value","parse","Date","match","Update","updatedPropValues","updatePropsAndCodeNoRecompile","propName","propValue","UpdatePropsAndCodeNoRecompile","codeNoRecompile","updatePropsAndCode","UpdatePropsAndCode","updateProps","UpdateProps","reset","initialCode","Reset","props"],"sources":["../../src/actions.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}