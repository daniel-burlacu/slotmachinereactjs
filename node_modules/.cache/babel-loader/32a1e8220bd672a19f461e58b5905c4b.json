{"ast":null,"code":"/* Copyright (c) 2017 Rod Vagg, MIT License */\nfunction AbstractChainedBatch(db) {\n  this._db = db;\n  this._operations = [];\n  this._written = false;\n}\n\nAbstractChainedBatch.prototype._serializeKey = function (key) {\n  return this._db._serializeKey(key);\n};\n\nAbstractChainedBatch.prototype._serializeValue = function (value) {\n  return this._db._serializeValue(value);\n};\n\nAbstractChainedBatch.prototype._checkWritten = function () {\n  if (this._written) {\n    throw new Error('write() already called on this batch');\n  }\n};\n\nAbstractChainedBatch.prototype.put = function (key, value) {\n  this._checkWritten();\n\n  var err = this._db._checkKey(key, 'key');\n\n  if (err) {\n    throw err;\n  }\n\n  key = this._serializeKey(key);\n  value = this._serializeValue(value);\n\n  this._put(key, value);\n\n  return this;\n};\n\nAbstractChainedBatch.prototype._put = function (key, value) {\n  this._operations.push({\n    type: 'put',\n    key: key,\n    value: value\n  });\n};\n\nAbstractChainedBatch.prototype.del = function (key) {\n  this._checkWritten();\n\n  var err = this._db._checkKey(key, 'key');\n\n  if (err) {\n    throw err;\n  }\n\n  key = this._serializeKey(key);\n\n  this._del(key);\n\n  return this;\n};\n\nAbstractChainedBatch.prototype._del = function (key) {\n  this._operations.push({\n    type: 'del',\n    key: key\n  });\n};\n\nAbstractChainedBatch.prototype.clear = function () {\n  this._checkWritten();\n\n  this._operations = [];\n\n  this._clear();\n\n  return this;\n};\n\nAbstractChainedBatch.prototype._clear = function noop() {};\n\nAbstractChainedBatch.prototype.write = function (options, callback) {\n  this._checkWritten();\n\n  if (typeof options === 'function') {\n    callback = options;\n  }\n\n  if (typeof callback !== 'function') {\n    throw new Error('write() requires a callback argument');\n  }\n\n  if (typeof options !== 'object') {\n    options = {};\n  }\n\n  this._written = true; // @ts-ignore\n\n  if (typeof this._write === 'function') {\n    return this._write(callback);\n  }\n\n  if (typeof this._db._batch === 'function') {\n    return this._db._batch(this._operations, options, callback);\n  }\n\n  process.nextTick(callback);\n};\n\nmodule.exports = AbstractChainedBatch;","map":{"version":3,"names":["AbstractChainedBatch","db","_db","_operations","_written","prototype","_serializeKey","key","_serializeValue","value","_checkWritten","Error","put","err","_checkKey","_put","push","type","del","_del","clear","_clear","noop","write","options","callback","_write","_batch","process","nextTick","module","exports"],"sources":["F:/Games/slotmachinereact/node_modules/ganache-core/node_modules/encoding-down/node_modules/abstract-leveldown/abstract-chained-batch.js"],"sourcesContent":["/* Copyright (c) 2017 Rod Vagg, MIT License */\n\nfunction AbstractChainedBatch (db) {\n  this._db = db\n  this._operations = []\n  this._written = false\n}\n\nAbstractChainedBatch.prototype._serializeKey = function (key) {\n  return this._db._serializeKey(key)\n}\n\nAbstractChainedBatch.prototype._serializeValue = function (value) {\n  return this._db._serializeValue(value)\n}\n\nAbstractChainedBatch.prototype._checkWritten = function () {\n  if (this._written) {\n    throw new Error('write() already called on this batch')\n  }\n}\n\nAbstractChainedBatch.prototype.put = function (key, value) {\n  this._checkWritten()\n\n  var err = this._db._checkKey(key, 'key')\n  if (err) { throw err }\n\n  key = this._serializeKey(key)\n  value = this._serializeValue(value)\n\n  this._put(key, value)\n\n  return this\n}\n\nAbstractChainedBatch.prototype._put = function (key, value) {\n  this._operations.push({ type: 'put', key: key, value: value })\n}\n\nAbstractChainedBatch.prototype.del = function (key) {\n  this._checkWritten()\n\n  var err = this._db._checkKey(key, 'key')\n  if (err) { throw err }\n\n  key = this._serializeKey(key)\n  this._del(key)\n\n  return this\n}\n\nAbstractChainedBatch.prototype._del = function (key) {\n  this._operations.push({ type: 'del', key: key })\n}\n\nAbstractChainedBatch.prototype.clear = function () {\n  this._checkWritten()\n  this._operations = []\n  this._clear()\n\n  return this\n}\n\nAbstractChainedBatch.prototype._clear = function noop () {}\n\nAbstractChainedBatch.prototype.write = function (options, callback) {\n  this._checkWritten()\n\n  if (typeof options === 'function') { callback = options }\n  if (typeof callback !== 'function') {\n    throw new Error('write() requires a callback argument')\n  }\n  if (typeof options !== 'object') { options = {} }\n\n  this._written = true\n\n  // @ts-ignore\n  if (typeof this._write === 'function') { return this._write(callback) }\n\n  if (typeof this._db._batch === 'function') {\n    return this._db._batch(this._operations, options, callback)\n  }\n\n  process.nextTick(callback)\n}\n\nmodule.exports = AbstractChainedBatch\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}