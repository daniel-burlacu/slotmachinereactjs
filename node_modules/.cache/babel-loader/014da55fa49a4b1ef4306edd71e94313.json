{"ast":null,"code":"var Subprovider = require(\"web3-provider-engine/subproviders/subprovider.js\");\n\nvar inherits = require(\"util\").inherits;\n\ninherits(RequestFunnel, Subprovider);\nmodule.exports = RequestFunnel; // See if any payloads for the specified methods are marked as external.\n// If they are external, and match the method list, process them one at\n// a time.\n\nfunction RequestFunnel() {\n  // We use an object here for O(1) lookups (speed).\n  this.methods = {\n    eth_call: true,\n    eth_getStorageAt: true,\n    eth_sendTransaction: true,\n    eth_sendRawTransaction: true,\n    // Ensure block filter and filter changes are process one at a time\n    // as well so filter requests that come in after a transaction get\n    // processed once that transaction has finished processing.\n    eth_newBlockFilter: true,\n    eth_getFilterChanges: true,\n    eth_getFilterLogs: true\n  };\n  this.queue = [];\n  this.isWorking = false;\n}\n\nRequestFunnel.prototype.handleRequest = function (payload, next, end) {\n  if (payload.external !== true || this.methods[payload.method] !== true) {\n    return next();\n  }\n\n  this.queue.push([payload, next]);\n\n  if (this.isWorking === false) {\n    this.processNext();\n  }\n};\n\nRequestFunnel.prototype.processNext = function () {\n  var self = this;\n\n  if (this.queue.length === 0) {\n    this.isWorking = false;\n    return;\n  }\n\n  this.isWorking = true;\n  var item = this.queue.shift();\n  var next = item[1];\n  next(function (error, request, cb) {\n    if (error) {\n      return cb(error);\n    }\n\n    cb();\n    self.processNext();\n  });\n};","map":{"version":3,"names":["Subprovider","require","inherits","RequestFunnel","module","exports","methods","eth_call","eth_getStorageAt","eth_sendTransaction","eth_sendRawTransaction","eth_newBlockFilter","eth_getFilterChanges","eth_getFilterLogs","queue","isWorking","prototype","handleRequest","payload","next","end","external","method","push","processNext","self","length","item","shift","error","request","cb"],"sources":["F:/Games/slotmachinereact/node_modules/ganache-core/lib/subproviders/requestfunnel.js"],"sourcesContent":["var Subprovider = require(\"web3-provider-engine/subproviders/subprovider.js\");\nvar inherits = require(\"util\").inherits;\n\ninherits(RequestFunnel, Subprovider);\n\nmodule.exports = RequestFunnel;\n\n// See if any payloads for the specified methods are marked as external.\n// If they are external, and match the method list, process them one at\n// a time.\nfunction RequestFunnel() {\n  // We use an object here for O(1) lookups (speed).\n  this.methods = {\n    eth_call: true,\n    eth_getStorageAt: true,\n    eth_sendTransaction: true,\n    eth_sendRawTransaction: true,\n\n    // Ensure block filter and filter changes are process one at a time\n    // as well so filter requests that come in after a transaction get\n    // processed once that transaction has finished processing.\n    eth_newBlockFilter: true,\n    eth_getFilterChanges: true,\n    eth_getFilterLogs: true\n  };\n  this.queue = [];\n  this.isWorking = false;\n}\n\nRequestFunnel.prototype.handleRequest = function(payload, next, end) {\n  if (payload.external !== true || this.methods[payload.method] !== true) {\n    return next();\n  }\n\n  this.queue.push([payload, next]);\n\n  if (this.isWorking === false) {\n    this.processNext();\n  }\n};\n\nRequestFunnel.prototype.processNext = function() {\n  var self = this;\n\n  if (this.queue.length === 0) {\n    this.isWorking = false;\n    return;\n  }\n\n  this.isWorking = true;\n\n  var item = this.queue.shift();\n  var next = item[1];\n\n  next(function(error, request, cb) {\n    if (error) {\n      return cb(error);\n    }\n    cb();\n    self.processNext();\n  });\n};\n"],"mappings":"AAAA,IAAIA,WAAW,GAAGC,OAAO,CAAC,kDAAD,CAAzB;;AACA,IAAIC,QAAQ,GAAGD,OAAO,CAAC,MAAD,CAAP,CAAgBC,QAA/B;;AAEAA,QAAQ,CAACC,aAAD,EAAgBH,WAAhB,CAAR;AAEAI,MAAM,CAACC,OAAP,GAAiBF,aAAjB,C,CAEA;AACA;AACA;;AACA,SAASA,aAAT,GAAyB;EACvB;EACA,KAAKG,OAAL,GAAe;IACbC,QAAQ,EAAE,IADG;IAEbC,gBAAgB,EAAE,IAFL;IAGbC,mBAAmB,EAAE,IAHR;IAIbC,sBAAsB,EAAE,IAJX;IAMb;IACA;IACA;IACAC,kBAAkB,EAAE,IATP;IAUbC,oBAAoB,EAAE,IAVT;IAWbC,iBAAiB,EAAE;EAXN,CAAf;EAaA,KAAKC,KAAL,GAAa,EAAb;EACA,KAAKC,SAAL,GAAiB,KAAjB;AACD;;AAEDZ,aAAa,CAACa,SAAd,CAAwBC,aAAxB,GAAwC,UAASC,OAAT,EAAkBC,IAAlB,EAAwBC,GAAxB,EAA6B;EACnE,IAAIF,OAAO,CAACG,QAAR,KAAqB,IAArB,IAA6B,KAAKf,OAAL,CAAaY,OAAO,CAACI,MAArB,MAAiC,IAAlE,EAAwE;IACtE,OAAOH,IAAI,EAAX;EACD;;EAED,KAAKL,KAAL,CAAWS,IAAX,CAAgB,CAACL,OAAD,EAAUC,IAAV,CAAhB;;EAEA,IAAI,KAAKJ,SAAL,KAAmB,KAAvB,EAA8B;IAC5B,KAAKS,WAAL;EACD;AACF,CAVD;;AAYArB,aAAa,CAACa,SAAd,CAAwBQ,WAAxB,GAAsC,YAAW;EAC/C,IAAIC,IAAI,GAAG,IAAX;;EAEA,IAAI,KAAKX,KAAL,CAAWY,MAAX,KAAsB,CAA1B,EAA6B;IAC3B,KAAKX,SAAL,GAAiB,KAAjB;IACA;EACD;;EAED,KAAKA,SAAL,GAAiB,IAAjB;EAEA,IAAIY,IAAI,GAAG,KAAKb,KAAL,CAAWc,KAAX,EAAX;EACA,IAAIT,IAAI,GAAGQ,IAAI,CAAC,CAAD,CAAf;EAEAR,IAAI,CAAC,UAASU,KAAT,EAAgBC,OAAhB,EAAyBC,EAAzB,EAA6B;IAChC,IAAIF,KAAJ,EAAW;MACT,OAAOE,EAAE,CAACF,KAAD,CAAT;IACD;;IACDE,EAAE;IACFN,IAAI,CAACD,WAAL;EACD,CANG,CAAJ;AAOD,CApBD"},"metadata":{},"sourceType":"script"}