{"ast":null,"code":"var _jsxFileName = \"F:\\\\Games\\\\slotmachinereact\\\\src\\\\components\\\\Withdrawal.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState, useRef } from \"react\";\nimport '../assets/css/App.css';\nimport { ethers } from \"ethers\";\nimport PFPRacerNFT from '../artifacts/contracts/PFPRacerNFT.sol/abi.json';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Withdrawal = props => {\n  _s();\n\n  const [rolling, setRolling] = useState(false);\n  const [name, setName] = useState(\"\");\n  const [account, setAccount] = useState(\"\");\n  const [contract, setContract] = useState(\"\");\n  let refCode = \"\";\n  const contractAddr = \"0x30c570f1e7EBC685CDEdFCEFc2ab87Fa8A2EbD60\";\n  const url = \"https://vast-ridge-99820.herokuapp.com\";\n\n  const createSmartKey = async refCode => {\n    //    let hashCode=\"dbabe1135898ac301cfb00e6ce2122515ccae2390fc4c304eef3523a8f69843b\";\n    let hashCode = \"\";\n    const customConfig = {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    };\n    const dataToSend = JSON.stringify({\n      \"refCode\": refCode\n    });\n    console.log(\"My JSON dataToSend is: \" + dataToSend); // console.log(\"Creating the smartKey:\"+ requestOptions);\n\n    const link = url + \"/api/post_refCode\";\n    await fetch(link, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: dataToSend\n    }).then(response => {\n      return response.text();\n    }).then(data => {\n      hashCode = data;\n      console.log(\"My data is:\" + data);\n      console.log(\"My response data is:\" + data);\n    }, error => {\n      console.log(error);\n    });\n    console.log(\"My hash code is: \" + hashCode);\n    return hashCode;\n  };\n\n  const initConnection = async () => {\n    if (typeof window.ethereum !== \"undefined\") {\n      const accounts = await window.ethereum.request({\n        method: \"eth_requestAccounts\"\n      });\n      const provider = new ethers.providers.Web3Provider(window.ethereum);\n      const gasPrice = await provider.getGasPrice();\n      console.log(\"My gas price is: \" + gasPrice);\n      const newSigner = provider.getSigner();\n      setAccount(accounts[0]);\n      setContract(new ethers.Contract(contractAddr, PFPRacerNFT.abi, newSigner));\n    } else {\n      console.log(\"Please install metamask\");\n    }\n  };\n\n  useEffect(() => {\n    initConnection();\n  }, [account]);\n\n  const makeWithdrawal = async refCode => {\n    console.log(\"My refCode in makeWithdrawal is: \" + refCode);\n    let withdrawalAmount = Math.floor(props.getScoreCallback());\n    console.log(\"My score in makeWithdrawal is \" + withdrawalAmount);\n    let fail = false;\n\n    if (withdrawalAmount > 0) {\n      window.confirm(\"GasLimit is set to 174860 WEI,DO NOT CHANGE && Please be aware: if you have 1.2 or 20.2 NFT's you will be able to withdrawal only the integer part of it, like 1 or 2.\"); //await contract.withdrawal(refCode);\n\n      console.log(\"This is the withdrawal function !!!\");\n      let withdrawalCosts = await contract.getWithdrawalCost();\n      let price = withdrawalCosts * withdrawalAmount;\n      price = price.toString();\n      console.log(\"Withdrawal price is: \" + price); // try{\n      // {gasPrice: ethers.utils.parseUnits('100', 'gwei'), gasLimit: 1000000}\n\n      console.log(\"Converting price to:\" + ethers.utils.parseUnits(price, 'wei'));\n      var options = {\n        gasLimit: 174860,\n        nonce: 45,\n        value: ethers.utils.parseUnits(price, 'wei')\n      };\n      await contract.withdrawal(withdrawalAmount, refCode, options); // }catch(err){\n      //   fail=true;\n      //   alert(\"Network is quite crowded at this this very moment and gas cost's are very high, please try again later !!\");\n      // }\n\n      if (!fail) {\n        insertWalletIntoDB();\n        let myScr = props.getScoreCallback() - withdrawalAmount;\n        console.log(\"My score is \" + myScr); //props.callbackSetScore(myScr);\n\n        props.setScoreCallBack(myScr);\n      }\n    }\n  };\n\n  const checkWallet = async () => {\n    // /checkUserWallet, setCheckUserWallet\n    let results = false;\n    const dataToSend = JSON.stringify({\n      \"wallet\": account\n    }); // Send data to the backend via POST\n\n    let link = url + \"/api/getWalletVerify\";\n    console.log(\"My fetch link getWalletVerify is: \" + link);\n    await fetch(link, {\n      //    await fetch('http://localhost:3333/api/getWalletVerify', {\n      method: 'POST',\n      //      mode: 'no-cors', // <---\n      headers: {\n        //        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: dataToSend\n    }).then(response => {\n      return response.text();\n    }).then(data => {\n      console.log(\"My converted number is: \" + data);\n\n      if (data !== '\"0\"') {\n        results = true;\n        console.log(\"Setting results on :\" + results);\n      }\n\n      console.log(\"My response data is:\" + data);\n    }, error => {\n      console.log(error);\n    });\n    console.log(\"returning \" + results);\n    return results;\n  };\n\n  const insertWalletIntoDB = async () => {\n    const withdrawalAmount = Math.floor(props.getScoreCallback());\n    const dataToSend = JSON.stringify({\n      \"wallet\": account,\n      \"txtype\": \"withdrawal\",\n      \"amount\": withdrawalAmount\n    });\n    console.log(\"My insertwalletintodb dataToSend is: \" + dataToSend);\n    const link = url + \"/api/insertWallet\";\n    await fetch(link, {\n      //  await fetch('http://localhost:3333/api/insertWallet', {\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: dataToSend\n    });\n  };\n\n  const promtRefCode = async () => {\n    let code = prompt(\"Please enter your refCode:\", \"RefCode\");\n    return code;\n  };\n\n  const handleSubmit = async () => {\n    if (account !== \"\") {\n      let withdrawalPaused = await contract.getWithdrawalPaused();\n\n      if (!withdrawalPaused) {\n        console.log(\"My withdrawal is: \" + props.blockWithdraw);\n        let respCheckWallet = await checkWallet();\n        console.log(\"My respCheckWallet is: \" + respCheckWallet);\n\n        if (!respCheckWallet) {\n          if (!props.blockWithdraw) {\n            let score = Math.floor(props.getScoreCallback());\n            console.log(\"Withdrawal has been activated\");\n            console.log(\"My account is: \" + account);\n\n            if (score > 0) {\n              refCode = await promtRefCode();\n\n              if (refCode === null || refCode === \"\" || refCode !== \"RACECOUPLE2022\") {\n                let text = \"Wrong RefCode ! But you can Mint !\";\n                window.confirm(text);\n              } else {\n                //checkAccount and insert to database\n                let hashKey = await createSmartKey(refCode);\n                console.log(\"My hashKey in withdrawal is:\" + hashKey);\n                makeWithdrawal(hashKey);\n              }\n            }\n          } else {\n            window.confirm(\"You need to have at least 1 NFT to withdrawal\");\n          }\n        } else {\n          window.confirm(\"You already had your chance ! But you can still Mint & play !\");\n        }\n      } else {\n        alert(\"Withdrawal has been paused, please try again later !\");\n      }\n    } else {\n      alert(\"Please connect to Metamask !!! Or install Metamask wallet if not already installed in order to place a withdrawal !!!\");\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: handleSubmit ? \"roll rolling\" : \"roll\",\n    onClick: () => {\n      handleSubmit();\n    },\n    children: \"Withdrawal\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 214,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Withdrawal, \"YMWh4SPmI+fS85XywQLQRJu3nhQ=\");\n\n_c = Withdrawal;\nexport default Withdrawal;\n\nvar _c;\n\n$RefreshReg$(_c, \"Withdrawal\");","map":{"version":3,"names":["React","useEffect","useState","useRef","ethers","PFPRacerNFT","Withdrawal","props","rolling","setRolling","name","setName","account","setAccount","contract","setContract","refCode","contractAddr","url","createSmartKey","hashCode","customConfig","headers","dataToSend","JSON","stringify","console","log","link","fetch","method","body","then","response","text","data","error","initConnection","window","ethereum","accounts","request","provider","providers","Web3Provider","gasPrice","getGasPrice","newSigner","getSigner","Contract","abi","makeWithdrawal","withdrawalAmount","Math","floor","getScoreCallback","fail","confirm","withdrawalCosts","getWithdrawalCost","price","toString","utils","parseUnits","options","gasLimit","nonce","value","withdrawal","insertWalletIntoDB","myScr","setScoreCallBack","checkWallet","results","promtRefCode","code","prompt","handleSubmit","withdrawalPaused","getWithdrawalPaused","blockWithdraw","respCheckWallet","score","hashKey","alert"],"sources":["F:/Games/slotmachinereact/src/components/Withdrawal.js"],"sourcesContent":["import  React, { useEffect, useState, useRef } from \"react\";\r\nimport '../assets/css/App.css';\r\nimport {ethers} from \"ethers\";\r\nimport PFPRacerNFT from '../artifacts/contracts/PFPRacerNFT.sol/abi.json';\r\n\r\nconst Withdrawal=(props)=>{\r\n\r\n    const [rolling, setRolling] = useState(false);\r\n    const [name, setName] = useState(\"\");\r\n    const [account, setAccount] = useState(\"\");\r\n    const [contract, setContract] = useState(\"\");\r\n    let refCode =\"\";\r\n    const contractAddr=\"0x30c570f1e7EBC685CDEdFCEFc2ab87Fa8A2EbD60\";\r\n    const url=\"https://vast-ridge-99820.herokuapp.com\";\r\n    \r\n\r\n    const createSmartKey = async (refCode)=>{\r\n  //    let hashCode=\"dbabe1135898ac301cfb00e6ce2122515ccae2390fc4c304eef3523a8f69843b\";\r\n      let hashCode=\"\";\r\n      const customConfig = {\r\n        headers: {\r\n        'Content-Type': 'application/json'\r\n        }\r\n      };\r\n\r\n      const dataToSend = JSON.stringify({ \"refCode\": refCode });\r\n      console.log(\"My JSON dataToSend is: \"+dataToSend);\r\n     // console.log(\"Creating the smartKey:\"+ requestOptions);\r\n  const link = url+\"/api/post_refCode\";\r\n\r\n  await fetch(link, {\r\n    method:'POST',\r\n    headers:{'Content-Type':'application/json'},\r\n    body:dataToSend\r\n  }).then(response => {\r\n    return response.text();\r\n    }).then(data => {\r\n      hashCode=data;\r\n      console.log(\"My data is:\"+data)\r\n        console.log(\"My response data is:\"+data);\r\n       }, error => {\r\n        console.log(error);\r\n      });\r\n      console.log(\"My hash code is: \"+hashCode);  \r\n      return hashCode;\r\n    }\r\n\r\n    const initConnection = async () =>{\r\n      if(typeof window.ethereum !== \"undefined\"){\r\n        const accounts = await window.ethereum.request({\r\n          method: \"eth_requestAccounts\",\r\n        });\r\n        const provider = new ethers.providers.Web3Provider(window.ethereum);\r\n        const gasPrice = await provider.getGasPrice();\r\n        console.log(\"My gas price is: \"+gasPrice);\r\n        const newSigner = provider.getSigner();\r\n        setAccount(accounts[0]);\r\n        setContract(\r\n          new ethers.Contract(\r\n            contractAddr,\r\n            PFPRacerNFT.abi,\r\n            newSigner\r\n          )\r\n        )\r\n      }else{\r\n        console.log(\"Please install metamask\");\r\n      }\r\n    }\r\n\r\n\r\n    useEffect(()=>{\r\n      initConnection();\r\n    },[account]);\r\n\r\n  const makeWithdrawal = async(refCode) => {\r\n    console.log(\"My refCode in makeWithdrawal is: \"+refCode);\r\n    let withdrawalAmount = Math.floor(props.getScoreCallback());\r\n    console.log(\"My score in makeWithdrawal is \"+withdrawalAmount);\r\n    let fail=false;\r\n      if(withdrawalAmount > 0){\r\n      window.confirm(\"GasLimit is set to 174860 WEI,DO NOT CHANGE && Please be aware: if you have 1.2 or 20.2 NFT's you will be able to withdrawal only the integer part of it, like 1 or 2.\");\r\n      //await contract.withdrawal(refCode);\r\n      console.log(\"This is the withdrawal function !!!\");\r\n      let withdrawalCosts= await contract.getWithdrawalCost();\r\n\r\n      let price=withdrawalCosts*withdrawalAmount;\r\n      price = price.toString();\r\n      console.log(\"Withdrawal price is: \"+ price);\r\n      // try{\r\n        // {gasPrice: ethers.utils.parseUnits('100', 'gwei'), gasLimit: 1000000}\r\n        console.log(\"Converting price to:\"+ethers.utils.parseUnits(price, 'wei'));\r\n        var options = { gasLimit: 174860, nonce: 45, value: ethers.utils.parseUnits(price, 'wei') };\r\n        await contract.withdrawal(withdrawalAmount,refCode,options);\r\n        \r\n    // }catch(err){\r\n    //   fail=true;\r\n    //   alert(\"Network is quite crowded at this this very moment and gas cost's are very high, please try again later !!\");\r\n    // }\r\n    \r\n    if(!fail){\r\n      insertWalletIntoDB();\r\n      let myScr= props.getScoreCallback()-withdrawalAmount;\r\n      console.log(\"My score is \"+myScr);\r\n      //props.callbackSetScore(myScr);\r\n      props.setScoreCallBack(myScr);\r\n    }\r\n\r\n    }\r\n  }\r\n\r\n  const checkWallet = async()=>{\r\n    // /checkUserWallet, setCheckUserWallet\r\n    let results=false;\r\n    const dataToSend = JSON.stringify({ \"wallet\": account });\r\n    // Send data to the backend via POST\r\n    let link = url+\"/api/getWalletVerify\";\r\n    console.log(\"My fetch link getWalletVerify is: \"+link);\r\n    await fetch(link, {\r\n//    await fetch('http://localhost:3333/api/getWalletVerify', {\r\n      method: 'POST',\r\n//      mode: 'no-cors', // <---\r\n      headers: {\r\n//        'Accept': 'application/json',\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: dataToSend\r\n    }).then(response => {\r\n      return response.text();\r\n      }).then(data => {\r\n        console.log(\"My converted number is: \"+data);\r\n\r\n        if(data!=='\"0\"'){\r\n          results=true;\r\n          console.log(\"Setting results on :\"+results);\r\n        }\r\n          console.log(\"My response data is:\"+data);\r\n         }, error => {\r\n          console.log(error);\r\n        });\r\n    console.log(\"returning \"+results);\r\n    return results;\r\n  }\r\n\r\n  const insertWalletIntoDB = async()=>{\r\n    const withdrawalAmount=Math.floor(props.getScoreCallback());\r\n\r\n    const dataToSend = JSON.stringify({ \"wallet\": account,\r\n                                        \"txtype\":\"withdrawal\",\r\n                                        \"amount\":withdrawalAmount,\r\n                                         });\r\n   \r\n   console.log(\"My insertwalletintodb dataToSend is: \"+dataToSend);\r\n      const link = url+\"/api/insertWallet\";\r\n      await fetch(link,{\r\n  //  await fetch('http://localhost:3333/api/insertWallet', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Accept': 'application/json',\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: dataToSend\r\n    })\r\n\r\n  }\r\n  \r\n  const promtRefCode = async()=>{\r\n    let code = prompt(\"Please enter your refCode:\", \"RefCode\");\r\n    return code;\r\n  }\r\n\r\n  const handleSubmit = async() => {\r\n\r\n    if(account!==\"\"){\r\n      let withdrawalPaused = await contract.getWithdrawalPaused();\r\n      if(!withdrawalPaused){\r\n        console.log(\"My withdrawal is: \"+props.blockWithdraw);\r\n        let respCheckWallet = await checkWallet();\r\n        console.log(\"My respCheckWallet is: \"+respCheckWallet);\r\n      if(!respCheckWallet){\r\n          \r\n          if(!props.blockWithdraw){\r\n            let score = Math.floor(props.getScoreCallback());\r\n              console.log(\"Withdrawal has been activated\");\r\n              console.log(\"My account is: \"+account);\r\n            if(score>0){\r\n            refCode = await promtRefCode();\r\n              if (refCode === null || refCode === \"\" || refCode !== \"RACECOUPLE2022\") {\r\n                let text = \"Wrong RefCode ! But you can Mint !\";\r\n                window.confirm(text)\r\n              } else {\r\n            //checkAccount and insert to database\r\n\r\n              let hashKey = await createSmartKey(refCode);\r\n              console.log(\"My hashKey in withdrawal is:\"+hashKey);\r\n              \r\n              makeWithdrawal(hashKey);\r\n            }\r\n          }\r\n        }else{\r\n          window.confirm(\"You need to have at least 1 NFT to withdrawal\");\r\n        }\r\n    } else{\r\n      window.confirm(\"You already had your chance ! But you can still Mint & play !\");\r\n    }\r\n  }else{\r\n    alert(\"Withdrawal has been paused, please try again later !\");\r\n  }\r\n  }else{\r\n    alert(\"Please connect to Metamask !!! Or install Metamask wallet if not already installed in order to place a withdrawal !!!\");\r\n  }\r\n};\r\n\r\n    return(\r\n    <div\r\n         className={handleSubmit ? \"roll rolling\" : \"roll\"}\r\n         onClick={() => {handleSubmit()}}\r\n    >Withdrawal</div>\r\n    )\r\n}\r\n\r\nexport default Withdrawal;"],"mappings":"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"},"metadata":{},"sourceType":"module"}