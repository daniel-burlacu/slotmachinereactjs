{"ast":null,"code":"/*\nCopyright (c) 2020 Uber Technologies, Inc.\n\nThis source code is licensed under the MIT license found in the\nLICENSE file in the root directory of this source tree.\n*/\nimport * as React from 'react';\nimport { codeFrameColumns } from '@babel/code-frame';\nexport function assertUnreachable() {\n  throw new Error(\"Didn't expect to get here\");\n}\nexport const formatBabelError = error => {\n  const isTemplate = error.includes('/* @babel/template */');\n  return error.replace('1 | /* @babel/template */;', '').replace(/\\((\\d+):(\\d+)\\)/, (_, line, col) => `(${parseInt(line, 10) - (isTemplate ? 1 : 0)}:${col})`).replace('<>', '').replace('</>', '').replace(/(\\d+) \\|/g, (_, line) => {\n    const lineNum = parseInt(line, 10);\n    const newLineNum = lineNum - 1;\n    const lenDiff = line.length - `${newLineNum}`.length;\n    return `${' '.repeat(lenDiff)}${newLineNum} |`;\n  });\n};\nexport const frameError = (error, code) => {\n  if (error) {\n    const found = error.match(/\\((\\d+)\\:(\\d+)\\)$/);\n\n    if (found) {\n      const location = {\n        start: {\n          line: parseInt(found[1], 10),\n          column: parseInt(found[2], 10)\n        }\n      };\n      return `${error}\\n\\n${codeFrameColumns(code, location)}`;\n    }\n  }\n\n  return error;\n};\nexport const buildPropsObj = (stateProps, updatedPropValues) => {\n  const newProps = {};\n  Object.keys(stateProps).forEach(name => {\n    newProps[name] = Object.assign({}, stateProps[name]);\n  });\n  Object.keys(updatedPropValues).forEach(name => {\n    newProps[name] = {\n      value: typeof updatedPropValues[name] !== 'undefined' ? updatedPropValues[name] : stateProps[name].defaultValue,\n      type: stateProps[name].type,\n      options: stateProps[name].options,\n      enumName: stateProps[name].enumName,\n      description: stateProps[name].description,\n      placeholder: stateProps[name].placeholder,\n      hidden: stateProps[name].hidden,\n      custom: stateProps[name].custom,\n      stateful: stateProps[name].stateful,\n      propHook: stateProps[name].propHook,\n      imports: stateProps[name].imports,\n      defaultValue: stateProps[name].defaultValue\n    };\n  });\n  return newProps;\n}; // creates a duplicate internal state, so we can preserve instant value editing\n// while debouncing top-level state updates that are slow\n\nexport function useValueDebounce(globalVal, globalSet) {\n  const [val, set] = React.useState(globalVal);\n  React.useEffect(() => {\n    // begins a countdown when 'val' changes. if it changes before countdown\n    // ends, clear the timeout avoids lodash debounce to avoid stale\n    // values in globalSet.\n    if (val !== globalVal) {\n      const timeout = setTimeout(() => globalSet(val), 250);\n      return () => clearTimeout(timeout);\n    }\n\n    return void 0;\n  }, [val]);\n  React.useEffect(() => {\n    set(globalVal);\n  }, [globalVal]);\n  return [val, set];\n}\nexport function useHover() {\n  const [value, setValue] = React.useState(false);\n  const ref = React.useRef(null);\n\n  const handleMouseOver = () => setValue(true);\n\n  const handleMouseOut = () => setValue(false);\n\n  React.useEffect(() => {\n    const node = ref.current;\n\n    if (node) {\n      node.addEventListener('mouseover', handleMouseOver);\n      node.addEventListener('mouseout', handleMouseOut);\n      return () => {\n        node.removeEventListener('mouseover', handleMouseOver);\n        node.removeEventListener('mouseout', handleMouseOut);\n      };\n    }\n\n    return undefined;\n  }, [ref.current]);\n  return [ref, value];\n}\nexport function clone(obj) {\n  if (typeof obj == 'function') {\n    return obj;\n  }\n\n  const result = Array.isArray(obj) ? [] : {};\n\n  for (const key in obj) {\n    const value = obj[key];\n    const type = {}.toString.call(value).slice(8, -1);\n\n    if (type == 'Array' || type == 'Object') {\n      result[key] = clone(value);\n    } else {\n      result[key] = value;\n    }\n  }\n\n  return result;\n}\nexport function getStyles(style, className) {\n  return className ? {\n    className\n  } : {\n    style\n  };\n}","map":{"version":3,"mappings":"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","names":["React","codeFrameColumns","assertUnreachable","Error","formatBabelError","error","isTemplate","includes","replace","_","line","col","parseInt","lineNum","newLineNum","lenDiff","length","repeat","frameError","code","found","match","location","start","column","buildPropsObj","stateProps","updatedPropValues","newProps","Object","keys","forEach","name","value","defaultValue","type","options","enumName","description","placeholder","hidden","custom","stateful","propHook","imports","useValueDebounce","globalVal","globalSet","val","set","useState","useEffect","timeout","setTimeout","clearTimeout","useHover","setValue","ref","useRef","handleMouseOver","handleMouseOut","node","current","addEventListener","removeEventListener","undefined","clone","obj","result","Array","isArray","key","toString","call","slice","getStyles","style","className"],"sources":["../../src/utils.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}