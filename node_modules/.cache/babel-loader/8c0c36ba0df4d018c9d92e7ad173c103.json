{"ast":null,"code":"var Log = require(\"../utils/log\");\n\nvar async = require(\"async\");\n\nfunction BlockLogsSerializer(database) {\n  this.database = database;\n}\n\nBlockLogsSerializer.prototype.encode = function (logs, done) {\n  logs = logs.map(function (log) {\n    return log.toJSON();\n  });\n  done(null, logs);\n};\n\nBlockLogsSerializer.prototype.decode = function (json, done) {\n  var self = this;\n\n  if (json.length === 0) {\n    return done(null, []);\n  }\n\n  this.database.blockHashes.get(json[0].blockHash, function (err, blockIndex) {\n    if (err) {\n      return done(err);\n    }\n\n    self.database.blocks.get(blockIndex, function (err, block) {\n      if (err) {\n        return done(err);\n      }\n\n      async.map(json, function (log, finished) {\n        finished(null, new Log({\n          block: block,\n          logIndex: log.logIndex,\n          transactionIndex: log.transactionIndex,\n          transactionHash: log.transactionHash,\n          address: log.address,\n          data: log.data,\n          topics: log.topics,\n          type: log.type\n        }));\n      }, function (err, logs) {\n        if (err) {\n          return done(err);\n        }\n\n        done(null, logs);\n      });\n    });\n  });\n};\n\nmodule.exports = BlockLogsSerializer;","map":{"version":3,"names":["Log","require","async","BlockLogsSerializer","database","prototype","encode","logs","done","map","log","toJSON","decode","json","self","length","blockHashes","get","blockHash","err","blockIndex","blocks","block","finished","logIndex","transactionIndex","transactionHash","address","data","topics","type","module","exports"],"sources":["F:/Games/slotmachinereact/node_modules/ganache-core/lib/database/blocklogsserializer.js"],"sourcesContent":["var Log = require(\"../utils/log\");\nvar async = require(\"async\");\n\nfunction BlockLogsSerializer(database) {\n  this.database = database;\n}\n\nBlockLogsSerializer.prototype.encode = function(logs, done) {\n  logs = logs.map(function(log) {\n    return log.toJSON();\n  });\n\n  done(null, logs);\n};\n\nBlockLogsSerializer.prototype.decode = function(json, done) {\n  var self = this;\n\n  if (json.length === 0) {\n    return done(null, []);\n  }\n\n  this.database.blockHashes.get(json[0].blockHash, function(err, blockIndex) {\n    if (err) {\n      return done(err);\n    }\n\n    self.database.blocks.get(blockIndex, function(err, block) {\n      if (err) {\n        return done(err);\n      }\n\n      async.map(\n        json,\n        function(log, finished) {\n          finished(\n            null,\n            new Log({\n              block: block,\n              logIndex: log.logIndex,\n              transactionIndex: log.transactionIndex,\n              transactionHash: log.transactionHash,\n              address: log.address,\n              data: log.data,\n              topics: log.topics,\n              type: log.type\n            })\n          );\n        },\n        function(err, logs) {\n          if (err) {\n            return done(err);\n          }\n          done(null, logs);\n        }\n      );\n    });\n  });\n};\n\nmodule.exports = BlockLogsSerializer;\n"],"mappings":"AAAA,IAAIA,GAAG,GAAGC,OAAO,CAAC,cAAD,CAAjB;;AACA,IAAIC,KAAK,GAAGD,OAAO,CAAC,OAAD,CAAnB;;AAEA,SAASE,mBAAT,CAA6BC,QAA7B,EAAuC;EACrC,KAAKA,QAAL,GAAgBA,QAAhB;AACD;;AAEDD,mBAAmB,CAACE,SAApB,CAA8BC,MAA9B,GAAuC,UAASC,IAAT,EAAeC,IAAf,EAAqB;EAC1DD,IAAI,GAAGA,IAAI,CAACE,GAAL,CAAS,UAASC,GAAT,EAAc;IAC5B,OAAOA,GAAG,CAACC,MAAJ,EAAP;EACD,CAFM,CAAP;EAIAH,IAAI,CAAC,IAAD,EAAOD,IAAP,CAAJ;AACD,CAND;;AAQAJ,mBAAmB,CAACE,SAApB,CAA8BO,MAA9B,GAAuC,UAASC,IAAT,EAAeL,IAAf,EAAqB;EAC1D,IAAIM,IAAI,GAAG,IAAX;;EAEA,IAAID,IAAI,CAACE,MAAL,KAAgB,CAApB,EAAuB;IACrB,OAAOP,IAAI,CAAC,IAAD,EAAO,EAAP,CAAX;EACD;;EAED,KAAKJ,QAAL,CAAcY,WAAd,CAA0BC,GAA1B,CAA8BJ,IAAI,CAAC,CAAD,CAAJ,CAAQK,SAAtC,EAAiD,UAASC,GAAT,EAAcC,UAAd,EAA0B;IACzE,IAAID,GAAJ,EAAS;MACP,OAAOX,IAAI,CAACW,GAAD,CAAX;IACD;;IAEDL,IAAI,CAACV,QAAL,CAAciB,MAAd,CAAqBJ,GAArB,CAAyBG,UAAzB,EAAqC,UAASD,GAAT,EAAcG,KAAd,EAAqB;MACxD,IAAIH,GAAJ,EAAS;QACP,OAAOX,IAAI,CAACW,GAAD,CAAX;MACD;;MAEDjB,KAAK,CAACO,GAAN,CACEI,IADF,EAEE,UAASH,GAAT,EAAca,QAAd,EAAwB;QACtBA,QAAQ,CACN,IADM,EAEN,IAAIvB,GAAJ,CAAQ;UACNsB,KAAK,EAAEA,KADD;UAENE,QAAQ,EAAEd,GAAG,CAACc,QAFR;UAGNC,gBAAgB,EAAEf,GAAG,CAACe,gBAHhB;UAINC,eAAe,EAAEhB,GAAG,CAACgB,eAJf;UAKNC,OAAO,EAAEjB,GAAG,CAACiB,OALP;UAMNC,IAAI,EAAElB,GAAG,CAACkB,IANJ;UAONC,MAAM,EAAEnB,GAAG,CAACmB,MAPN;UAQNC,IAAI,EAAEpB,GAAG,CAACoB;QARJ,CAAR,CAFM,CAAR;MAaD,CAhBH,EAiBE,UAASX,GAAT,EAAcZ,IAAd,EAAoB;QAClB,IAAIY,GAAJ,EAAS;UACP,OAAOX,IAAI,CAACW,GAAD,CAAX;QACD;;QACDX,IAAI,CAAC,IAAD,EAAOD,IAAP,CAAJ;MACD,CAtBH;IAwBD,CA7BD;EA8BD,CAnCD;AAoCD,CA3CD;;AA6CAwB,MAAM,CAACC,OAAP,GAAiB7B,mBAAjB"},"metadata":{},"sourceType":"script"}